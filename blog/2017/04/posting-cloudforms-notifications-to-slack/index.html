<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ - Posting CloudForms Notifications to Slack</title>
  <meta name="description" content="Keeping the whole IT team informed about events or actions in your IT infrastructure can be challenging. Many IT teams have turned to team messaging applicat...">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <script>
    stored_theme = localStorage.getItem('miq-theme');
    theme        = stored_theme && JSON.parse(localStorage.getItem('miq-theme'));

    if (theme === "light-theme") {
      document.querySelector('html').classList.add("light-theme");
    }

    if (theme === "dark-theme") {
      document.querySelector('html').classList.add("dark-theme");
    }
  </script>

  <link type="text/css" rel="stylesheet" href="/assets/main-364a522e6cb5aa31700d9562491465966c2c1081a61b11529597f13bf81cfb69.css">
  <link rel="canonical" href="http://manageiq.org/blog/2022/07/2017-04-12-posting-cloudforms-notifications-to-slack/">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li class="active">
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa theme-toggle" data-toggle-theme></i>
  </li>
</ul>

  </div>
</header>


    <main data-url="/blog/2017/04/posting-cloudforms-notifications-to-slack/">
      <div class="blog">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-10">
        <header class="blog_header">
          <h1>
            ManageIQ Blog
          </h1>
        </header>
      </div>
    </div>
    <div class="row"> 
      <div class="col-xs-12 col-sm-10 blog_main">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
          <header class="post-header">
            <h1 class="page-title" itemprop="name headline">Posting CloudForms Notifications to Slack</h1>

            <div class="post-meta">
              <time datetime="2017-04-12T00:00:00+00:00" itemprop="datePublished">
                Apr 12, 2017
              </time>

              
              <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                by
                <i itemprop="name">
                  Nick Catling
                </i>
              </span>
              

              <ul class="post-tags">
                
                <li>
                  <a href="/blog/tags/cloudformscloudforms slack">cloudformscloudforms slack</a>
                </li>
                
              </ul>
            </div>
          </header>

          <div class="post-content" itemprop="articleBody">
            <p>Keeping the whole IT team informed about events or actions in your IT infrastructure can be challenging. Many IT teams have turned to team messaging applications, like Slack, to improve internal team communications. CloudForms, with its flexible integration capabilities, can be connected to Slack to notify the team whenever important events happen.</p>

<p>The Event Switchboard in CloudForms exposes provider events to Automate, allowing automation based on any events. In this example, we will post Slack messages to a team channel whenever Kubernetes events are raised.</p>

<h2 id="slack-webhook-and-ruby-gem">Slack Webhook and Ruby Gem</h2>

<p>In order to post messages to Slack, we first need a [webhook] (<a href="https://api.slack.com/messaging/webhooks">https://api.slack.com/messaging/webhooks</a>) and the associated access token, which is created via a [Slack Button] (<a href="https://api.slack.com/docs/slack-button)">https://api.slack.com/docs/slack-button)</a>. During this process, the CloudForms-bot user account will be given the proper permissions to post messages. Next, we need client side code to interface to Slack. In this case, there is the [slack-ruby-client] (<a href="https://rubygems.org/gems/slack-ruby-client">https://rubygems.org/gems/slack-ruby-client</a>) which will need to be installed on the appliance, along with any prerequisites. \</p>

<p>#gem install slack-ruby-client</p>

<h2 id="reading-the-event-stream-and-posting-a-message">Reading the Event Stream and Posting a Message</h2>

<p>The present event data is contained within the event_stream object and can be read easily, for example:</p>

<p>event_stream = $evm.root[‘event_stream’]
data = event_stream.full_data</p>

<p>p data[:event_type]
p data[:timestamp]
p data[:message]</p>

<p>Configuring CloudForms to post an event to Slack involves writing up a short ruby method to interface with Slack and then connecting that method to the events we would like posted. The channel we are posting to is defined in the calling method. Here is an [example method] (<a href="https://github.com/supernoodz/CloudForms/blob/master/Automate/Integration/Slack/Methods.class/__methods__/post_emsevent.rb">https://github.com/supernoodz/CloudForms/blob/master/Automate/Integration/Slack/Methods.class/__methods__/post_emsevent.rb</a>) used to connect CloudForms to Slack.</p>

<p>Next, we need to call this method whenever an event is triggered. To do this, we update the schema to invoke it for all events. In Automate explorer, navigate to the ‘Kubernetes’ Class, edit the Schema and add a relationship value to call the new method, ‘rel1’ in the example below.</p>

<h2 id="results">Results</h2>

<p>Now CloudForms posts a message to the team Slack channel whenever an event is triggered.</p>

<p>This is just one example of how CloudForms can be integrated into IT notification systems. Other examples could include raising SNMP traps, sending emails or creating ServiceNow records based on events.</p>

          </div>
        </article>
      </div>

      <div class="col-xs-12 col-sm-2 blog_side">
          <div class="blog_side-group">
  <h3 class="blog_side-heading">
    Categories
  </h3>

  <ul id="blog_tag_menu" class="blog_menu">
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/external">external</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/operations">operations</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms,">cloudforms,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/vmware,">vmware,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/rhev,">rhev,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/kvm,">kvm,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cluster,">cluster,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/vm,">vm,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/datastore,">datastore,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cf2,">cf2,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cf3,">cf3,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cfme, XML, XML">cfme, XML, XML</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/format">format</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/announcements">announcements</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/events">events</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/collaboration">collaboration</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/releases">releases</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/sprints">sprints</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/uncategorized">uncategorized</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/automate, cloud">automate, cloud</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/formations, cloud">formations, cloud</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/forms, heat, openstack, scale">forms, heat, openstack, scale</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms">cloudforms</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/automate">automate</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/LWIMIQ">LWIMIQ</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/ansible">ansible</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/ansiblecloudformsansible">ansiblecloudformsansible</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/ansible,">ansible,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/control,">control,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/policy">policy</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudformsmanagement">cloudformsmanagement</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/servicenow">servicenow</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudformscloudforms slack">cloudformscloudforms slack</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/management">management</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, custom,">cloudforms, custom,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/button, operations, rdp, ssh">button, operations, rdp, ssh</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/container">container</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, container, kubernetes, management, openshift, operations">cloudforms, container, kubernetes, management, openshift, operations</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/developers">developers</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/tutorials">tutorials</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, container, containers, management, openshift">cloudforms, container, containers, management, openshift</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, container, management, openshift">cloudforms, container, management, openshift</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, compliance, container, management, openscap, security">cloudforms, compliance, container, management, openscap, security</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, container, management, openshift, operations">cloudforms, container, management, openshift, operations</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/automate, best">automate, best</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/practices cloudforms">practices cloudforms</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/provisioning">provisioning</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/provisioning,">provisioning,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/Services">Services</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/openstack">openstack</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/architecture, cloudforms,cmdb, integration, servicenow, ucmdb">architecture, cloudforms,cmdb, integration, servicenow, ucmdb</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/show">show</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, github, manageiq, pull">cloudforms, github, manageiq, pull</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/request, vmware">request, vmware</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/AnsibleCloudFormsDeploymentansible">AnsibleCloudFormsDeploymentansible</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/appliance">appliance</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/configuration">configuration</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/deployment">deployment</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/Automation,">Automation,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/Azure,">Azure,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/microsoft,">microsoft,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/self-service,">self-service,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/servicenow,">servicenow,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/tower,">tower,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/workflows">workflows</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/ruby">ruby</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/internal">internal</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/aws">aws</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/aws, cloudforms, series">aws, cloudforms, series</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/aws,">aws,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/series">series</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/aws, cfme,">aws, cfme,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/automate, cfme, cloudforms, methods">automate, cfme, cloudforms, methods</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/AnsibleCloudFormsansible">AnsibleCloudFormsansible</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudforms, osp,rhv">cloudforms, osp,rhv</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/automate,">automate,</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudformscloudforms">cloudformscloudforms</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/api, cloudforms, rest">api, cloudforms, rest</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/api">api</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/cloudformsuxdcloudforms uxd">cloudformsuxdcloudforms uxd</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/none">none</a>
    </li>
    
    <li class="blog_menu-tag">
      <a href="/blog/tags/performance">performance</a>
    </li>
    
  </ul>
</div>

<div class="blog_side-group">
  <h3 class="blog_side-heading">
    Archive
  </h3>

  <ul id="blog_archive_menu" class="blog_menu">
    
    
    

    
    <li class="blog_menu-year">
      <a href="/blog/2022/index.html">
        2022
      </a>
      
        <ul class="blog_menu blog_months">
  
  
  <li class="blog_menu-month">
    <a href="/blog/2022/07/index.html">
      July
    </a>
    
  </li>
  
  <li class="blog_menu-month">
    <a href="/blog/2022/02/index.html">
      February
    </a>
    
  </li>
  
</ul>

      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2021/index.html">
        2021
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2020/index.html">
        2020
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2019/index.html">
        2019
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2018/index.html">
        2018
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2017/index.html">
        2017
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2016/index.html">
        2016
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2015/index.html">
        2015
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2014/index.html">
        2014
      </a>
      
    </li>
    
    <li class="blog_menu-year">
      <a href="/blog/2013/index.html">
        2013
      </a>
      
    </li>
    
  </ul>
</div>

      </div>

    </div>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li class="active">
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa theme-toggle" data-toggle-theme></i>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa fa-github"></i>
          Github
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa fa-gitter">
            <svg viewBox="45 47 78 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 40.1 (33804) - http://www.bohemiancoding.com/sketch -->
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(45.000000, 47.000000)">
        <g id="icon-gitter" transform="translate(10.000000, 0.000000)">
            <rect id="Rectangle-path" x="0" y="0.5" width="8.25" height="61"></rect>
            <rect id="Rectangle-path" x="49.75" y="14.5" width="8.25" height="47"></rect>
            <rect id="Rectangle-path" x="16.5" y="14.5" width="8.25" height="80.25"></rect>
            <rect id="Rectangle-path" x="33.25" y="14.5" width="8.25" height="80.25"></rect>
        </g>
    </g>
</svg>

          </i>
          Gitter
        </a>
      </li>
      <li>
        <a href="http://talk.manageiq.org/">
          <i class="fa fa-comments"></i>
          Forum
        </a>
      </li>
      
      <li>
        <a href="https://github.com/ManageIQ/manageiq.org/edit/master/site/_posts/2017-04-12-posting-cloudforms-notifications-to-slack.md">
          <i class="fa fa-pencil"></i>
          Edit this page
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2022 ManageIQ.
      </span>
      <span>
        <a href="http://community.redhat.com/software/" target="_blank">
          Sponsored by Red Hat, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://twitter.com/ManageIQ" class="social_link social_link-twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" class="social_link social_link-facebook">
            <span class="social_link-icon">
              <i class="fa fa-facebook"></i>
            </span>
          </a>
        </li>

        <!--  -->
        <li>
          <a href="https://www.linkedin.com/company/manageiq" class="social_link social_link-linkedin">
            <span class="social_link-icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" class="social_link social_link-youtube">
            <span class="social_link-icon">
              <i class="fa fa-youtube"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
