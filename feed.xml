<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ManageIQ</title>
    <description></description>
    <link>http://manageiq.org/</link>
    <atom:link href="http://manageiq.org/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 16 Jun 2021 16:17:59 +0000</pubDate>
    <lastBuildDate>Wed, 16 Jun 2021 16:17:59 +0000</lastBuildDate>
    <generator>Jekyll v3.9.1</generator>
    
      <item>
        <title>ManageIQ performance results and improvements</title>
        <description>&lt;p&gt;This document describes performance measurements for the ManageIQ Kasparov release in both podified and appliance mode, and performance improvements that have been made as a result.  The purpose of these measurements was to show the behavior of ManageIQ as the number of providers and managed resources are increased, and to look for inhibitors to scalability.  Podified measurements were taken on Red Hat OpenShift Container Platform (OCP) running on a VMware vSphere cluster dedicated to performance measurements.  Appliance measurements were taken on a VM running on the same VMware vSphere cluster.&lt;/p&gt;

&lt;h2 id=&quot;measurement-configuration&quot;&gt;Measurement configuration&lt;/h2&gt;

&lt;p&gt;These measurements were taken on a vCenter dedicated to performance measurements with the following configuration:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Hypervisor: VMware ESXi, 6.7.0, 15160138&lt;/li&gt;
  &lt;li&gt;Model: IBM System X iDataPlex dx360 M4 Server -[7912AC1]-&lt;/li&gt;
  &lt;li&gt;Processor Type: Intel(R) Xeon(R) CPU E5-2665 0 @ 2.40GHz&lt;/li&gt;
  &lt;li&gt;14 ESX hosts: 16 cores (32 logical processors), 256 GB Total Memory&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The podified measurements were taken on an OCP cluster with the following characteristics:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;OCP 4.6.15&lt;/li&gt;
  &lt;li&gt;Kasparov branch&lt;/li&gt;
  &lt;li&gt;3 OCP masters (8 core, 32 GB RAM)&lt;/li&gt;
  &lt;li&gt;4 workers (8 core, 32 GB RAM)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The appliance measurements were taken on a single VM running on the same vSphere cluster, with 16 cores, 64 GB RAM and a separate 200 GB hard disk.&lt;/p&gt;

&lt;p&gt;ManageIQ was configured with all server roles enabled, except Git Repositories Owner.  C &amp;amp; U Collection (metric collection) was enabled for all clusters and all datastores.&lt;/p&gt;

&lt;p&gt;For these measurements, up to 13 providers were added in a single, default zone:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1 Amazon Web Service cloud provider&lt;/li&gt;
  &lt;li&gt;1 Azure cloud provider&lt;/li&gt;
  &lt;li&gt;1 VMware infrastructure provider&lt;/li&gt;
  &lt;li&gt;10 additional VMware infrastructure providers simulated with the vCenter Server Simulator (VCSIM) tool, which is an unsupported tool available for free from VMware.  Each simulated vCenter runs on a separate VM.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;steady-state-cpu-utilization&quot;&gt;Steady state CPU utilization&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/blog/PodSteadyStateCPU.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The figure above shows the average process/pod CPU usage over a 2 hour period with the VMware provider running.  The appliance results (in blue) show the process-level CPU utilization based on data from the Linux ps command.   The podified results (in orange) show the pod-level CPU utilization from prometheus/grafana.  For most worker pods, CPU utilization in podified mode is consistently 8-9% higher than appliance mode.  In investigating this difference, the development team found that the extra overhead was caused by the liveness probe.  &lt;a href=&quot;https://github.com/ManageIQ/manageiq-pods/pull/688&quot;&gt;Rewriting and optimizing the liveness check&lt;/a&gt; resulted in a 20x speedup.  The podified results with the optimized liveness check show up as gray bars in the figure.  The worker pods each show an 8-9% reduction in steady state CPU utilization.  This performance improvement is included in the Lasker branch.&lt;/p&gt;

&lt;p&gt;The figure above also shows that the orchestrator CPU usage is lower in podified mode.  This is because the orchestrator pod doesn’t have to do the extra work of collecting worker CPU and memory usage, tracking worker heartbeats, and managing resource limits as it does in appliance mode.  For podified mode, this extra work is handled by Kubernetes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/blog/TotalSteadyStateCPU.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The figure above shows the total steady state ManageIQ CPU usage across all processes/pods for three workload scenarios:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;No providers defined&lt;/li&gt;
  &lt;li&gt;1 VMware provider&lt;/li&gt;
  &lt;li&gt;13 providers
For each workload scenario, the podified CPU usage is dramatically reduced (ranging from 74 to 94% lower) with the liveness probe improvement.  With the improvement, total ManageIQ podified CPU usage is lower than appliance mode in each case.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;vmdb-database-measurements&quot;&gt;VMDB database measurements&lt;/h2&gt;

&lt;p&gt;The ManageIQ architecture includes the Virtual Management Database (VMDB), which is “the definitive source of intelligence collected about your Virtual Infrastructure”.  During our performance measurements, we collected postgres statistics to see the total size, number of rows and activity for each of the 300+ tables in the VMDB database.&lt;/p&gt;

&lt;p&gt;The biggest tables in the vmdb database are related to metric collection.  The following observations are based on the postgres stats and discussion with development:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;24 raw tables, one per hour (metrics_00, metrics_01 … metrics_23)
    &lt;ul&gt;
      &lt;li&gt;Only the most recent four hours of raw metrics are kept, and every hour, the table with data older than 4 hours is truncated.&lt;/li&gt;
      &lt;li&gt;For each resource, metrics are collected in 20 second intervals.  Each resource gets one metric row per collection interval, with up to 180 rows collected per hour.&lt;/li&gt;
      &lt;li&gt;For the VMware data provider, collected resources are clusters, hosts and VMs.&lt;/li&gt;
      &lt;li&gt;For the AWS data provider, the collected resources are online instances (not offline or suspended)&lt;/li&gt;
      &lt;li&gt;For the Azure data provider, metrics are not collected unless the Microsoft.Insights resource provider is enabled, which was not the case in our measurements&lt;/li&gt;
      &lt;li&gt;The average row size for raw metrics is 715 bytes, based on observations with the VMware data provider.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;12 rollup tables, one per month (metric_rollups_01, metric_rollups_02 … metric_rollups_12)
    &lt;ul&gt;
      &lt;li&gt;Each resource gets one metric_rollups row per hour and another metric_rollup row per day.&lt;/li&gt;
      &lt;li&gt;The average row size for metric_rollups is 680 bytes, based on observations with the VMware data provider.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;vim_performance_states table
    &lt;ul&gt;
      &lt;li&gt;This table gets one row, per resource per hour, for each resource with records in the metric_rollups tables.  The rows in this table represent the state of the resource when the rollup was performed.&lt;/li&gt;
      &lt;li&gt;The average row size for the vim_performance_state table is 716 bytes, base on observations with the VMware data provider.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If metric collection is enabled, the above tables will be by far the biggest contributors to the vmdb database size.&lt;br /&gt;
To estimate the size of the metric collection portion of the database, you could use the following formula to estimate the storage in MB for one year for a given number of resources.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(number of resources) * ((180 raw rows/hour * 4 hours * 715 bytes/row) +  (25 rollup rows/day  * 365 days * (680 bytes/row) + (25 vim_performance_states rows/day * 365 days * 716 bytes/row))) / 1024 /1024
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which reduces to&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(number of resources) * 12.6 MB 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For 1,000 resources, the tables related to metric collection should grow to about 12 GB.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;This article describes results from our recent performance measurements of the ManageIQ Kasparov branch, including performance improvements that were made based on these findings.  The results show that, with these improvements, ManageIQ in podified mode can perform as well or better than appliance mode.&lt;/p&gt;
</description>
        <pubDate>Tue, 11 May 2021 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2021/05/manageiq-perf-results/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2021/05/manageiq-perf-results/</guid>
        
        <category>performance</category>
        
        
      </item>
    
      <item>
        <title>Announcing Lasker Beta</title>
        <description>&lt;p&gt;The first beta release of ManageIQ Lasker is here!  We’ve been working hard and have a lot of new features you can see in the &lt;a href=&quot;https://github.com/orgs/ManageIQ/projects/13#column-11434545&quot;&gt;roadmap&lt;/a&gt;. Here are the major highlights for this new release:&lt;/p&gt;

</description>
        <pubDate>Mon, 26 Apr 2021 13:27:43 +0000</pubDate>
        <link>http://manageiq.org/blog/2021/04/Announcing-Lasker-Beta/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2021/04/Announcing-Lasker-Beta/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>ManageIQ at scale at KPN</title>
        <description>&lt;h1 id=&quot;manageiq-at-scale-at-kpn&quot;&gt;ManageIQ at scale at KPN&lt;/h1&gt;

</description>
        <pubDate>Thu, 25 Feb 2021 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2021/02/manageiq-at-scale-at-kpn/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2021/02/manageiq-at-scale-at-kpn/</guid>
        
        <category>collaboration</category>
        
        
      </item>
    
      <item>
        <title>ManageIQ Kasparov GA announcement</title>
        <description>&lt;p&gt;On behalf of the ManageIQ team, I’m happy to announce the release of &lt;strong&gt;ManageIQ Kasparov&lt;/strong&gt;!  This release is named after the great chess grandmaster &lt;a href=&quot;https://en.wikipedia.org/wiki/Garry_Kasparov&quot;&gt;Garry Kasparov&lt;/a&gt;.  You can download the Kasparov-1 release on our &lt;a href=&quot;/download&quot;&gt;downloads page&lt;/a&gt;.&lt;/p&gt;

</description>
        <pubDate>Thu, 04 Feb 2021 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2021/02/manageiq-kasparov-ga-announcement/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2021/02/manageiq-kasparov-ga-announcement/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>Announcing Kasparov Beta, Jansa-3, and Ivanchuk-8</title>
        <description>&lt;p&gt;ManageIQ Kasparov-1-Beta1.1, Jansa-3, and Ivanchuk-8 are now available. These releases include security fixes. Many thanks goes to Dávid Halász (&lt;a href=&quot;https://github.com/skateman&quot;&gt;@skateman&lt;/a&gt;) and the team for finding and fixing these vulnerabilities.  Also, many thanks go to all of the contributors for all of their enhancements and bug fixes.&lt;/p&gt;

</description>
        <pubDate>Mon, 18 Jan 2021 17:01:13 +0000</pubDate>
        <link>http://manageiq.org/blog/2021/01/Announcing-Kasparov-Beta-Jansa-3-And-Ivanchuk-8/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2021/01/Announcing-Kasparov-Beta-Jansa-3-And-Ivanchuk-8/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>Announcing Kasparov Alpha Release</title>
        <description>&lt;p&gt;The first alpha release of ManageIQ Kasparov is here!  It has a bunch of interesting new stuff that you can see in the &lt;a href=&quot;https://github.com/orgs/ManageIQ/projects/13#column-8431168&quot;&gt;roadmap&lt;/a&gt;. Here are the major highlights for this new release:&lt;/p&gt;

</description>
        <pubDate>Fri, 04 Dec 2020 09:19:13 +0000</pubDate>
        <link>http://manageiq.org/blog/2020/12/Announcing-Kasparov-Alpha/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2020/12/Announcing-Kasparov-Alpha/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>Announcing Jansa-2</title>
        <description>&lt;p&gt;ManageIQ Jansa-2 is now available. This release is primarily a stabilization release and contains a number of bug fixes and performance fixes.&lt;/p&gt;

</description>
        <pubDate>Fri, 30 Oct 2020 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2020/10/Announcing-Jansa-2/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2020/10/Announcing-Jansa-2/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>ManageIQ Jansa GA announcement</title>
        <description>&lt;p&gt;On behalf of the ManageIQ team, I’m happy to announce the release of &lt;strong&gt;ManageIQ Jansa&lt;/strong&gt;!  This release is named after Czech chess grandmaster &lt;a href=&quot;https://en.wikipedia.org/wiki/Vlastimil_Jansa&quot;&gt;Vlastimil Jansa&lt;/a&gt;.  You can download the Jansa-1 release on our &lt;a href=&quot;/download&quot;&gt;downloads page&lt;/a&gt;.&lt;/p&gt;

</description>
        <pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2020/09/manageiq-jansa-ga-announcement/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2020/09/manageiq-jansa-ga-announcement/</guid>
        
        <category>releases</category>
        
        <category>announcements</category>
        
        
      </item>
    
      <item>
        <title>Troubleshooting OpenID-Connect Authentication on Containers</title>
        <description>&lt;p&gt;The goal of this blog post is to provide a basic understanding of how to troubleshoot ManageIQ 
configured for OpenID-Connect authentication when deploying ManageIQ on containers.&lt;/p&gt;

</description>
        <pubDate>Mon, 21 Sep 2020 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2020/09/troubleshooting-containerized-oidc/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2020/09/troubleshooting-containerized-oidc/</guid>
        
        <category>tutorials</category>
        
        
      </item>
    
      <item>
        <title>Using the API with OpenID-Connect Authentication</title>
        <description>&lt;p&gt;The goal of this blog post is to provide a basic understanding of how to use the ManageIQ REST API when configured with OpenID-Connect authentication.&lt;/p&gt;

</description>
        <pubDate>Thu, 03 Sep 2020 00:00:00 +0000</pubDate>
        <link>http://manageiq.org/blog/2020/09/oidc-auth-api-usage/</link>
        <guid isPermaLink="true">http://manageiq.org/blog/2020/09/oidc-auth-api-usage/</guid>
        
        <category>tutorials</category>
        
        
      </item>
    
  </channel>
</rss>
