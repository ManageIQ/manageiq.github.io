<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <script>
    stored_theme = localStorage.getItem('miq-theme');
    theme        = stored_theme && JSON.parse(localStorage.getItem('miq-theme'));

    if (theme === "light-theme") {
      document.querySelector('html').classList.add("light-theme");
    }

    if (theme === "dark-theme") {
      document.querySelector('html').classList.add("dark-theme");
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="canonical" href="http://manageiq.org/docs/reference/latest/installing_on_aws/">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa-solid fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa-solid fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa-solid theme-toggle" data-toggle-theme></button>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/reference/latest/installing_on_aws/index">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li class="active">
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li>
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

    <div class="col-lg-4 col-md-4 col-sm-12 pull-right" style="margin-top: 10px">
        <script async src="https://cse.google.com/cse.js?cx=006042792541147862616:dfkijfebdts"></script>
         <div class="gcse-search"></div>
    </div>
</nav>

<script>
  window.onload = demo;
	function demo() {
	    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search Documentation")
	}
</script>

<div class="doc_container">
  <div class="doc_menu">
    
    

<div class="doc_menu-heading">
  Latest
</div>

<ul class="menu menu-toplevel" id=ref_menu_latest>


  <li class="menu-parent">
    
    <a href="#">
      Installing
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Containerized (podified)
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_kubernetes/index.html">
      Kubernetes
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Appliance
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item active">
    <a href="/docs/reference/latest/installing_on_aws/index.html">
      Amazon Web Services (AWS)
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_ibm_cloud/index.html">
      IBM Cloud
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_microsoft_azure/index.html">
      Microsoft Azure
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_google_compute_engine/index.html">
      Google Compute Engine
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_vmware_vsphere/index.html">
      VMware vSphere
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_red_hat_enterprise_linux_openstack_platform/index.html">
      Red Hat Enterprise OpenStack Platform
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_red_hat_virtualization/index.html">
      Red Hat Enterprise Virtualization
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_scvmm/index.html">
      Microsoft System Center Virtual Machine Manager (SCVMM)
    </a>
    
  </li>


    </ul>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Upgrading
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/appliances/upgrading.html">
      Upgrading
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Using
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/general_configuration/index.html">
      General Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_infrastructure_and_inventory/index.html">
      Managing Infrastructure and Inventory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Managing Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/index.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Infrastructure Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/infrastructure_providers/red_hat_virtualization_providers.html">
      Red Hat Virtualization Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/infrastructure_providers/openstack_infrastructure_providers.html">
      OpenStack Infrastructure Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/infrastructure_providers/vmware_vcenter_providers.html">
      VMware vCenter Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/infrastructure_providers/ibm_power_hmc_providers.html">
      IBM Power HMC Providers
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Configuration Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/configuration_management_providers/ibm_terraform_provider.html">
      IBM Terraform Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/configuration_management_providers/red_hat_satellite_6.html">
      Red Hat Satellite 6 Providers
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/index.html#automation-management-providers">
      Automation Management Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Cloud Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/amazon_ec2_providers.html">
      Amazon EC2 Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/azure_providers.html">
      Azure Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/google_compute_engine_providers.html">
      Google Compute Engine Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/ibm_cic_providers.html">
      IBM CIC Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/ibm_cloud_vpc_providers.html">
      IBM Cloud VPC Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/ibm_power_vc_providers.html">
      IBM PowerVC Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/ibm_power_systems_virtual_servers_providers.html">
      IBM Power Systems Virtual Servers Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/cloud_providers/openstack_providers.html">
      OpenStack Providers
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Container Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/containers_providers/azure_kubernetes_providers.html">
      Azure Kubernetes Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/containers_providers/red_hat_openshift_providers.html">
      Red Hat OpenShift Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/containers_providers/ibm_cloud_kubernetes_service_providers.html">
      IBM Cloud Kubernetes Service Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/containers_providers/oracle_kubernetes_engine_providers.html">
      Oracle Kubernetes Engine Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/containers_providers/vmware_tanzu_providers.html">
      VMware Tanzu Providers
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Storage Providers
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/storage_providers/amazon_ebs_managers.html">
      Amazon Elastic Block Store Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/storage_providers/openstack_block_storage_managers.html">
      OpenStack Block Storage Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/storage_providers/openstack_object_storage_managers.html">
      OpenStack Object Storage Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_providers/storage_providers/ibm_cloud_object_storage_managers.html">
      IBM Cloud Object Storage Providers
    </a>
    
  </li>


    </ul>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/provisioning_virtual_machines_and_hosts/index.html">
      Provisioning Virtual Machines and Hosts
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/creating_a_service_for_vm_provisioning/index.html">
      Creating a Service for Virtual Machine Provisioning
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/service_provisioning_using_an_orchestration_template/index.html">
      Service Provisioning Using an Orchestration Template
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Managing controls
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/monitoring_alerts_and_reporting/index.html">
      Monitoring, Alerts, and Reporting
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/policies_and_profiles_guide/index.html">
      Policies and Profiles Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/monitoring_alerts_and_reporting/index.html#chargeback">
      Chargeback
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/assigning_custom_analysis_profile_to_vm/index.html">
      Assigning a Custom Analysis Profile to a Virtual Machine
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/scripting_actions/index.html">
      Scripting Actions in ManageIQ
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Administering
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item menu-parent">
    <a href="#">
      Managing Authentication
    </a>
    
    <ul>
      



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/active_directory.html">
      Active Directory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ipa_2fa.html">
      2-Factor-Authentication with IPA
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ipa_ad_trust.html">
      IPA/AD Trust
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ldap.html">
      LDAP
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/saml.html">
      SAML
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/openid_connect.html">
      OpenID-Connect
    </a>
    
  </li>


    </ul>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/appliances/backup_and_restore.html">
      Backup and Restore (appliances)
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/deployment_planning_guide/index.html">
      Deployment Planning Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/high_availability_guide/index.html">
      High Availability Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/appliance_hardening_guide/index.html">
      Appliance Hardening Guide
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Managing Integrations
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/integration_with_aws_cloudformation_and_openstack_heat/index.html">
      AWS CloudFormation and OpenStack Heat
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/integration_with_servicenow/index.html">
      ServiceNow
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      APIs
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/api">
      ManageIQ REST API
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Reference
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/capabilities_matrix/index.html">
      Capabilities Matrix
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/methods_available_for_automation/index.html">
      Methods Available for Automation
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Troubleshooting
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/troubleshooting/index.html">
      Troubleshooting
    </a>
    
  </li>


      </ul>
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc user_doc">
      

      <div class="doc-content">
        
        <div class="doc-versions">
          <span class="label">Versions: </span>
          
            <span class="active" >
              <a href="/docs/reference/latest/installing_on_aws/index.html">
                Latest
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/radjabov/installing_on_aws/index.html">
                Radjabov
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/quinteros/installing_on_aws/index.html">
                Quinteros
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/petrosian/installing_on_aws/index.html">
                Petrosian
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/oparin/installing_on_aws/index.html">
                Oparin
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/najdorf/installing_on_aws/index.html">
                Najdorf
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/morphy/installing_on_aws/index.html">
                Morphy
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/lasker/installing_on_aws/index.html">
                Lasker
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/kasparov/installing_on_aws/index.html">
                Kasparov
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/jansa/installing_on_aws/index.html">
                Jansa
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="">
                Ivanchuk
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="">
                Hammer
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="">
                Gaprindashvili
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="">
                Fine
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="">
                Euwe
              </a>
            </span>
            
          
        </div>
        
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#installing-on-amazon-elastic-compute-cloud-amazon-ec2">Installing on Amazon Elastic Compute Cloud (Amazon EC2)</a>
<ul>
<li class="toc-entry toc-h2"><a href="#installing-manageiq">Installing ManageIQ</a>
<ul>
<li class="toc-entry toc-h3"><a href="#obtaining-the-appliance">Obtaining the appliance</a></li>
<li class="toc-entry toc-h3"><a href="#requirements">Requirements</a></li>
<li class="toc-entry toc-h3"><a href="#manageiq-requirements">ManageIQ Requirements</a>
<ul>
<li class="toc-entry toc-h4"><a href="#amazon-ec2-requirements">Amazon EC2 Requirements</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#uploading-the-appliance-to-an-amazon-s3-bucket">Uploading the Appliance to an Amazon S3 Bucket</a></li>
<li class="toc-entry toc-h3"><a href="#configuring-amazon-ec2-to-import-the-appliance">Configuring Amazon EC2 to Import the Appliance</a></li>
<li class="toc-entry toc-h3"><a href="#importing-the-appliance-to-amazon-elastic-compute-cloud-amazon-ec2">Importing the Appliance to Amazon Elastic Compute Cloud (Amazon EC2)</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#configuring-manageiq">Configuring ManageIQ</a>
<ul>
<li class="toc-entry toc-h3"><a href="#accessing-the-appliance-console">Accessing the Appliance Console</a></li>
<li class="toc-entry toc-h3"><a href="#configuring-a-database">Configuring a Database</a>
<ul>
<li class="toc-entry toc-h4"><a href="#configuring-an-internal-database">Configuring an Internal Database</a></li>
<li class="toc-entry toc-h4"><a href="#configuring-an-external-database">Configuring an External Database</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#configure-messaging">Configure Messaging</a></li>
<li class="toc-entry toc-h3"><a href="#configuring-a-worker-appliance">Configuring a Worker Appliance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#appendix">Appendix</a></li>
<li class="toc-entry toc-h1"><a href="#appliance-console-command-line-interface-cli">Appliance Console Command-Line Interface (CLI)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#database-configuration-options">Database Configuration Options</a></li>
<li class="toc-entry toc-h4"><a href="#messaging-configuration-options">Messaging Configuration Options</a></li>
<li class="toc-entry toc-h4"><a href="#v2_key-options">v2_key Options</a></li>
<li class="toc-entry toc-h4"><a href="#ipa-server-options">IPA Server Options</a></li>
<li class="toc-entry toc-h4"><a href="#certificate-options">Certificate Options</a></li>
<li class="toc-entry toc-h4"><a href="#other-options">Other Options</a></li>
</ul>
</li>
</ul><h1 id="installing-on-amazon-elastic-compute-cloud-amazon-ec2">
<a class="anchor" href="#installing-on-amazon-elastic-compute-cloud-amazon-ec2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing on Amazon Elastic Compute Cloud (Amazon EC2)</h1>

<h2 id="installing-manageiq">
<a class="anchor" href="#installing-manageiq" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing ManageIQ</h2>

<p>Installing ManageIQ consists of the following steps:</p>

<ol>
  <li>
    <p>Downloading the appliance for your environment as a virtual machine snapshot template.</p>
  </li>
  <li>
    <p>Setting up a virtual machine based on the appliance.</p>
  </li>
  <li>
    <p>Configuring the ManageIQ appliance.</p>
  </li>
</ol>

<p>After you have completed all the procedures in this guide, you will have a working environment on which additional customizations and configurations can be performed.</p>

<h3 id="obtaining-the-appliance">
<a class="anchor" href="#obtaining-the-appliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Obtaining the appliance</h3>

<h3 id="requirements">
<a class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h3>

<p>Below are the two sets of requirements for installing ManageIQ on Amazon EC2.</p>

<h3 id="manageiq-requirements">
<a class="anchor" href="#manageiq-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>ManageIQ Requirements</h3>

<ul>
  <li>
    <p>44 GB of space on the chosen datastore.</p>
  </li>
  <li>
    <p>12 GB RAM.</p>
  </li>
  <li>
    <p>4 vCPUs.</p>
  </li>
  <li>Check that there are inbound rules to access ports 443, 22, and 80.
    <h4 id="amazon-ec2-requirements">
<a class="anchor" href="#amazon-ec2-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Amazon EC2 Requirements</h4>
  </li>
  <li>
    <p>An Amazon S3 bucket to store the disk image that will be imported to AWS as a snapshot.</p>
  </li>
  <li>A VM import service role (IAM role) named <code class="language-plaintext highlighter-rouge">vmimport</code>.</li>
</ul>

<p>For information on creating an Amazon S3 bucket and a VM Import Service Role, see the <a href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-image-import.html">Amazon EC2
documentation</a>.</p>

<h3 id="uploading-the-appliance-to-an-amazon-s3-bucket">
<a class="anchor" href="#uploading-the-appliance-to-an-amazon-s3-bucket" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uploading the Appliance to an Amazon S3 Bucket</h3>

<p>From your local file system, you can now upload the ManageIQ appliance VHD image obtained in <a href="#obtaining-the-appliance">Obtaining the appliance</a> to the Amazon S3 bucket, using your choice of tool, such as AWS client or directly upload the Appliance image from your S3 bucket on AWS Management Console.</p>

<h3 id="configuring-amazon-ec2-to-import-the-appliance">
<a class="anchor" href="#configuring-amazon-ec2-to-import-the-appliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring Amazon EC2 to Import the Appliance</h3>

<p><strong>Important:</strong></p>

<p>These are the procedural steps as of the time of writing. For the latest information on importing a virtual machine as an image, see the <a href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-image-import.html">Amazon EC2 documentation</a>.</p>

<ol>
  <li>
    <p>Install the AWS client on the computer you want to interact with the AWS API from.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ pip install awscli
</code></pre></div>    </div>
  </li>
  <li>
    <p>Configure and download your AWS secret/access key by following the steps in the <a href="https://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html">Managing Access Keys for Your AWS Account</a> documentation.</p>
  </li>
  <li>
    <p>Configure the AWS client with your access/secret key. For example:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws configure
 AWS Access Key ID [******]: ACCESS_KEY
 AWS Secret Access Key [******]: SECRET_KEY
 Default region name [None]:
 Default output format [None]:
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create the <code class="language-plaintext highlighter-rouge">trust-policy.json</code> file for the <strong>vmimport</strong> role. For example:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> {
    "Version": "2012-10-17",
    "Statement": [
       {
          "Effect": "Allow",
          "Principal": { "Service": "vmie.amazonaws.com" },
          "Action": "sts:AssumeRole",
          "Condition": {
             "StringEquals":{
                "sts:Externalid": "vmimport"
             }
          }
       }
    ]
 }
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create the <strong>vmimport</strong> role using the <code class="language-plaintext highlighter-rouge">trust-policy.json</code> file that you just created.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws iam create-role --role-name vmimport --assume-role-policy-document file://trust-policy.json
</code></pre></div>    </div>

    <p><strong>Note:</strong></p>

    <p>This user must have permissions to create and modify IAM roles.</p>
  </li>
  <li>
    <p>Create the <code class="language-plaintext highlighter-rouge">role-policy.json</code> file. Be sure to use the exact S3 bucket name. For example:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> {
   "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:ListAllMyBuckets"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "s3:CreateBucket",
        "s3:DeleteBucket",
        "s3:DeleteObject",
        "s3:GetBucketLocation",
        "s3:GetObject",
        "s3:ListBucket",
        "s3:PutObject",
        "s3:GetBucketAcl"
      ],
      "Resource": ["arn:aws:s3:::BUCKET_TO_UPLOAD_IMAGE","arn:aws:s3:::BUCKET_TO_UPLOAD_IMAGE/*"]
    },
    {
      "Effect": "Allow",
      "Action": [
        "iam:CreateRole",
        "iam:PutRolePolicy"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "ec2:ModifySnapshotAttribute",
        "ec2:CopySnapshot",
        "ec2:RegisterImage",
        "ec2:Describe*"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "ec2:CancelConversionTask",
        "ec2:CancelExportTask",
        "ec2:CreateImage",
        "ec2:CreateInstanceExportTask",
        "ec2:CreateTags",
        "ec2:DeleteTags",
        "ec2:DescribeConversionTasks",
        "ec2:DescribeExportTasks",
        "ec2:DescribeExportImageTasks",
        "ec2:DescribeInstanceAttribute",
        "ec2:DescribeInstanceStatus",
        "ec2:DescribeInstances",
        "ec2:DescribeTags",
        "ec2:ExportImage",
        "ec2:ImportInstance",
        "ec2:ImportVolume",
        "ec2:StartInstances",
        "ec2:StopInstances",
        "ec2:TerminateInstances",
        "ec2:ImportImage",
        "ec2:ImportSnapshot",
        "ec2:DescribeImportImageTasks",
        "ec2:DescribeImportSnapshotTasks",
        "ec2:CancelImportTask",
        "ec2:DescribeImages",
        "ec2:DescribeSnapshots"
    ],
    "Resource": "*"
    }
  ]
 }
</code></pre></div>    </div>
  </li>
  <li>
    <p>Apply the <strong>vmimport</strong> role to the ManageIQ appliance image you uploaded to the S3 bucket.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws iam put-role-policy --role-name vmimport --policy-name vmimport --policy-document file://role-policy.json
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="importing-the-appliance-to-amazon-elastic-compute-cloud-amazon-ec2">
<a class="anchor" href="#importing-the-appliance-to-amazon-elastic-compute-cloud-amazon-ec2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Importing the Appliance to Amazon Elastic Compute Cloud (Amazon EC2)</h3>

<p>To import the appliance:</p>

<ol>
  <li>
    <p>Create a containers.json file:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> {
     "Description": "NAME OF IMPORTED SNAPSHOT IN AWS",
     "Format": "vhd",
     "UserBucket": {
         "S3Bucket": "BUCKET WITH UPLOADED .VHD IMAGE",
         "S3Key": "PATH OF .VHD IMAGE"
     }
 }
</code></pre></div>    </div>

    <p>See the <a href="https://docs.aws.amazon.com/">AWS documentation</a> on VM import and
 export requirements, such as image formats, instances, volume and
 file system types, and using regions.</p>
  </li>
  <li>
    <p>Use the AWS-CLI tools to import a disk as a snapshot. See the <a href="https://docs.aws.amazon.com/">AWS documentation</a> on using VM Import/Export to import a disk as a snapshot.</p>

    <p><strong>Note:</strong></p>

    <p>You can either specify a region, or if not, ensure that the S3 bucket is in the same region where you want to import the snapshot.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws ec2 import-snapshot --disk-container file://containers.json
</code></pre></div>    </div>
  </li>
  <li>
    <p>Check the progress of your snapshot import by running the following command:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws ec2 describe-import-snapshot-tasks --import-task-ids SNAPSHOT_ID_GOT_FROM_RESPONSE
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create an AMI from the snapshot. See the <a href="https://docs.aws.amazon.com/">AWS documentation</a> on using options with the following command to create and register a Linux AMI from a snapshot.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws ec2 register-image
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="configuring-manageiq">
<a class="anchor" href="#configuring-manageiq" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring ManageIQ</h2>

<p>After installing ManageIQ and running it for the first
time, you must perform some basic configuration. You must complete these steps:</p>

<ol>
  <li>
    <p>Add a disk to the infrastructure that is hosting your appliance.</p>
  </li>
  <li>
    <p>Configure the database.</p>
  </li>
  <li>
    <p>Configure messaging</p>
  </li>
</ol>

<p>Configure the appliance by using the internal appliance console.</p>

<h3 id="accessing-the-appliance-console">
<a class="anchor" href="#accessing-the-appliance-console" aria-hidden="true"><span class="octicon octicon-link"></span></a>Accessing the Appliance Console</h3>

<ol>
  <li>
    <p>Start the appliance and open a terminal console.</p>
  </li>
  <li>
    <p>Enter the <code class="language-plaintext highlighter-rouge">appliance_console</code> command. The ManageIQ appliance
summary screen displays.</p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">Enter</code> to manually configure settings.</p>
  </li>
  <li>
    <p>Press the number for the item that you want to change, and press <code class="language-plaintext highlighter-rouge">Enter</code>.
The options for your selection are displayed.</p>
  </li>
  <li>
    <p>Follow the prompts to make the changes.</p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">Enter</code> to accept a setting where applicable.</p>
  </li>
</ol>

<p><strong>Note</strong>: The ManageIQ appliance console automatically logs out after five minutes of inactivity.</p>

<h3 id="configuring-a-database">
<a class="anchor" href="#configuring-a-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring a Database</h3>

<p>ManageIQ uses a database to store information about the
environment. Before using ManageIQ, configure the database
options for it; ManageIQ provides the following two
options for database configuration:</p>

<h4 id="configuring-an-internal-database">
<a class="anchor" href="#configuring-an-internal-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring an Internal Database</h4>

<p>Before installing an internal database, add a disk to the infrastructure
hosting your appliance. See the documentation specific to your
infrastructure for instructions for adding a disk. As a storage disk
usually cannot be added while a virtual machine is running, Red Hat
recommends adding the disk before starting the appliance.
ManageIQ only supports installing of an internal VMDB on blank
disks; installation will fail if the disks are not blank.</p>

<ol>
  <li>
    <p>Start the appliance and open a terminal console.</p>
  </li>
  <li>
    <p>Enter the <code class="language-plaintext highlighter-rouge">appliance_console</code> command. The ManageIQ appliance
summary screen displays.</p>
  </li>
  <li>
    <p>Press <strong>Enter</strong> to manually configure settings.</p>
  </li>
  <li>
    <p>Select <strong>Configure Application</strong> from the menu.</p>
  </li>
  <li>
    <p>You are prompted to create or fetch an encryption key.</p>

    <ul>
      <li>
        <p>If this is the first ManageIQ appliance, choose <strong>Create
key</strong>.</p>
      </li>
      <li>
        <p>If this is not the first ManageIQ appliance, choose
<strong>Fetch key from remote machine</strong> to fetch the key from the
first appliance. For worker and multi-region setups, use this
option to copy key from another appliance.</p>

        <p><strong>Note</strong>: All ManageIQ appliances in a multi-region deployment must use the same key.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Choose <strong>Create Internal Database</strong> for the database location.</p>

    <p>In the <strong>Configure Messaging</strong> menu, select <strong>Make No messaging changes</strong>. If you see <code class="language-plaintext highlighter-rouge">Configuration failed: Internal database require a volume mounted at /var/lib/pgsql. Please add an unpartitioned disk and try again.</code> message, then ensure to add a second disk for the database per instructions as defined above.</p>
  </li>
  <li>
    <p>Choose a disk for the database. This can be either a disk you
attached previously, or a partition on the current disk.</p>

    <div class="important">

Red Hat recommends using a separate disk for the database.

</div>

    <p>If there is an unpartitioned disk attached to the virtual machine,
the dialog will show options similar to the following:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>1) /dev/vdb: 20480
2) Don't partition the disk
</code></pre></div>    </div>

    <ul>
      <li>
        <p>Enter <strong>1</strong> to choose <code class="language-plaintext highlighter-rouge">/dev/vdb</code> for the database location. This
option creates a logical volume using this device and mounts the
volume to the appliance in a location appropriate for storing
the database. The default location is <code class="language-plaintext highlighter-rouge">/var/lib/pgsql</code>, which
can be found in the environment variable
<code class="language-plaintext highlighter-rouge">$APPLIANCE_PG_MOUNT_POINT</code>.</p>
      </li>
      <li>
        <p>Enter <strong>2</strong> to continue without partitioning the disk. A second
prompt will confirm this choice. Selecting this option results
in using the root filesystem for the data directory (not advised
in most cases).</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Enter <strong>Y</strong> or <strong>N</strong> for <strong>Should this appliance run as a standalone
database server?</strong></p>

    <ul>
      <li>
        <p>Select <strong>Y</strong> to configure the appliance as a database-only
appliance. As a result, the appliance is configured as a basic
PostgreSQL server, without a user interface.</p>
      </li>
      <li>
        <p>Select <strong>N</strong> to configure the appliance with the full
administrative user interface.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>When prompted, enter a unique number to create a new region.</p>

    <div class="important">

Creating a new region destroys any existing data on the chosen
database.

</div>
  </li>
  <li>
    <p>Create and confirm a password for the database.</p>
  </li>
</ol>

<p>ManageIQ then configures the internal database. This takes a few
minutes. After the database is created and initialized, you can log in
to ManageIQ.</p>

<h4 id="configuring-an-external-database">
<a class="anchor" href="#configuring-an-external-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring an External Database</h4>

<p>Based on your setup, you need to configure the appliance to use
an external PostgreSQL database. For example, you can only have one
database in a single region. However, a region can be segmented into
multiple zones, such as database zone, user interface zone, and
reporting zone, where each zone provides a specific function. The
appliances in these zones must be configured to use an external
database.</p>

<p>The <code class="language-plaintext highlighter-rouge">postgresql.conf</code> file requires
specific settings for correct operation. For example, it must correctly
reclaim table space, control session timeouts, and format the PostgreSQL
server log for improved system support. It is recommended that external databases use a
<code class="language-plaintext highlighter-rouge">postgresql.conf</code> file based on the standard file used by the
ManageIQ appliance.</p>

<p>Ensure you configure the settings in the <code class="language-plaintext highlighter-rouge">postgresql.conf</code> to suit your
system. For example, customize the <code class="language-plaintext highlighter-rouge">shared_buffers</code> setting according to
the amount of real storage available in the external system hosting the
PostgreSQL instance. In addition, depending on the aggregate number of
appliances that are expected to connect to the PostgreSQL instance, it might be
necessary to alter the <code class="language-plaintext highlighter-rouge">max_connections</code> setting.</p>

<p><strong>Note:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- ManageIQ requires PostgreSQL version 13.

- `postgresql.conf` controls the operation of all databases managed by the PostgreSQL instance, therefore it is not recommended to run other databases on this PostgreSQL instance.
</code></pre></div></div>

<p>Use the following steps to configure an external PostgreSQL database:</p>

<ol>
  <li>
    <p>Start the appliance and open a terminal console.</p>
  </li>
  <li>
    <p>Enter the <code class="language-plaintext highlighter-rouge">appliance_console</code> command. The appliance console summary screen is displayed.</p>
  </li>
  <li>
    <p>Press <strong>Enter</strong> to manually configure settings.</p>
  </li>
  <li>
    <p>Select <strong>Configure Application</strong> from the menu.</p>
  </li>
  <li>
    <p>Choose <strong>Create Region in External Database</strong> for the database location.</p>
  </li>
  <li>
    <p>Enter the database hostname or IP address when prompted.</p>
  </li>
  <li>
    <p>Enter the database name or leave blank for the default
(<code class="language-plaintext highlighter-rouge">vmdb_production</code>).</p>
  </li>
  <li>
    <p>Enter the database username or leave blank for the default (<code class="language-plaintext highlighter-rouge">root</code>).</p>
  </li>
  <li>
    <p>Enter the chosen database user’s password.</p>
  </li>
  <li>
    <p>Confirm the configuration if prompted.</p>
  </li>
</ol>

<p>ManageIQ configures an external database.</p>

<h3 id="configure-messaging">
<a class="anchor" href="#configure-messaging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure Messaging</h3>

<p>Configuring messaging is required for the appliance setup. It is recommended to configure the broker on the same appliance where your database is configured</p>

<p><strong>Note:</strong> You can only have one Kafka broker per region.</p>

<ol>
  <li>
    <p>You can either configure the current appliance as a Kafka broker, or point the
appliance to an existing external Kafka broker.</p>

    <p>Select the appropriate option either
<strong>Configure this appliance as a messaging server</strong> or
<strong>Connect to an external messaging system</strong>
to connect to an external Kafka broker. Fill in the
required <strong>Message Client Parameters</strong>, such as IP address, username and password.</p>
  </li>
  <li>
    <p>Select <strong>Proceed</strong>. <code class="language-plaintext highlighter-rouge">appliance_console</code> applies the configuration that you requested.</p>
  </li>
  <li>
    <p>Restart <code class="language-plaintext highlighter-rouge">evmserverd</code> to pick up the changes.</p>
  </li>
</ol>

<p><strong>Note:</strong> Use your Fully Qualified Domain Name (FQDN) as the messaging hostname rather than <code class="language-plaintext highlighter-rouge">localhost</code>, ensure that a resolvable and reachable non-localhost name entry is present in <code class="language-plaintext highlighter-rouge">/etc/hosts</code>.</p>

<h3 id="configuring-a-worker-appliance">
<a class="anchor" href="#configuring-a-worker-appliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring a Worker Appliance</h3>

<p>You can use multiple appliances to facilitate horizontal scaling, as
well as for dividing up work by roles. Accordingly, configure an
appliance to handle work for one or many roles, with workers within the
appliance carrying out the duties for which they are configured. You can
configure a worker appliance through the terminal. The following steps
demonstrate how to join a worker appliance to an appliance that already
has a region configured with a database and messaging.</p>

<ol>
  <li>
    <p>Start the appliance and open a terminal console.</p>
  </li>
  <li>
    <p>Enter the <code class="language-plaintext highlighter-rouge">appliance_console</code> command. The ManageIQ appliance
summary screen displays.</p>
  </li>
  <li>
    <p>Press <strong>Enter</strong> to manually configure settings.</p>
  </li>
  <li>
    <p>Select <strong>Configure Application</strong> from the menu.</p>
  </li>
  <li>
    <p>You are prompted to create or fetch a security key. Since this is
not the first ManageIQ appliance, choose <strong>2) Fetch key from
remote machine</strong>. For worker and multi-region setups, use this
option to copy the security key from another appliance.</p>

    <p><strong>Note</strong>: All ManageIQ appliances in a multi-region deployment must use the same key.</p>
  </li>
  <li>
    <p>Choose <strong>Join Region in External Database</strong> for the database location.</p>
  </li>
  <li>
    <p>Enter the database hostname or IP address when prompted.</p>
  </li>
  <li>
    <p>Enter the port number or leave blank for the default (<code class="language-plaintext highlighter-rouge">5432</code>).</p>
  </li>
  <li>
    <p>Enter the database name or leave blank for the default
(<code class="language-plaintext highlighter-rouge">vmdb_production</code>).</p>
  </li>
  <li>
    <p>Enter the database username or leave blank for the default (<code class="language-plaintext highlighter-rouge">root</code>).</p>
  </li>
  <li>
    <p>Enter the chosen database user’s password.</p>
  </li>
  <li>
    <p>Confirm the configuration if prompted.</p>
  </li>
  <li>
    <p>Choose <strong>Connect to an external messaging system</strong> to connect to the external kafka broker located on the appliance with the external database</p>

    <p><strong>Note:</strong> You can only have one kafka broker per region</p>
  </li>
  <li>
    <p>Enter the necessary <strong>Message Client Parameters</strong> such as the hostname/IP and username/password</p>
  </li>
  <li>
    <p>Confirm the configuration if prompted.</p>
  </li>
</ol>

<p><strong>Note:</strong> When configuring messaging, please refer to <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-naming.html">Amazon EC2 instance hostname types</a> on hostname guidelines. For example, inclusion of <code class="language-plaintext highlighter-rouge">.ec2.internal</code> or <code class="language-plaintext highlighter-rouge">.compute.internal</code> in the hostname, which can be determined using <code class="language-plaintext highlighter-rouge">hostname -f</code>.</p>

<p>Once ManageIQ is installed, you can log in and perform
administration tasks.</p>

<ol>
  <li>
    <p>Browse to the URL for the login screen. For example, URL should be <code class="language-plaintext highlighter-rouge">https://xx.xx.xx.xx</code></p>
  </li>
  <li>Enter the default credentials as listed for the initial login.
    <ul>
      <li>
<strong>Username</strong>: <strong>admin</strong>
</li>
      <li>
<strong>Password</strong>: <strong>smartvm</strong>
</li>
    </ul>
  </li>
  <li>Click <strong>Login</strong>.</li>
</ol>

<h1 id="appendix">
<a class="anchor" href="#appendix" aria-hidden="true"><span class="octicon octicon-link"></span></a>Appendix</h1>

<h1 id="appliance-console-command-line-interface-cli">
<a class="anchor" href="#appliance-console-command-line-interface-cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>Appliance Console Command-Line Interface (CLI)</h1>

<p>Currently, the <code class="language-plaintext highlighter-rouge">appliance_console_cli</code> feature is a subset of the full functionality of the <code class="language-plaintext highlighter-rouge">appliance_console</code> itself, and covers functions most likely to be scripted by using the command-line interface (CLI).</p>

<ol>
  <li>
    <p>After starting the ManageIQ appliance, log in with a user name of <code class="language-plaintext highlighter-rouge">root</code> and the default password of <code class="language-plaintext highlighter-rouge">smartvm</code>. This displays the Bash prompt for the root user.</p>
  </li>
  <li>
    <p>Enter the <code class="language-plaintext highlighter-rouge">appliance_console_cli</code> or <code class="language-plaintext highlighter-rouge">appliance_console_cli --help</code> command to see a list of options available with the command, or simply enter <code class="language-plaintext highlighter-rouge">appliance_console_cli --option &lt;argument&gt;</code> directly to use a specific option.</p>
  </li>
</ol>

<h4 id="database-configuration-options">
<a class="anchor" href="#database-configuration-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database Configuration Options</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>–region (-r)</td>
      <td>region number (create a new region in the database - requires database credentials passed)</td>
    </tr>
    <tr>
      <td>–internal (-i)</td>
      <td>internal database (create a database on the current appliance)</td>
    </tr>
    <tr>
      <td>–dbdisk</td>
      <td>database disk device path (for configuring an internal database)</td>
    </tr>
    <tr>
      <td>–hostname (-h)</td>
      <td>database hostname</td>
    </tr>
    <tr>
      <td>–port</td>
      <td>database port (defaults to <code class="language-plaintext highlighter-rouge">5432</code>)</td>
    </tr>
    <tr>
      <td>–username (-U)</td>
      <td>database username (defaults to <code class="language-plaintext highlighter-rouge">root</code>)</td>
    </tr>
    <tr>
      <td>–password (-p)</td>
      <td>database password</td>
    </tr>
    <tr>
      <td>–dbname (-d)</td>
      <td>database name (defaults to <code class="language-plaintext highlighter-rouge">vmdb_production</code>)</td>
    </tr>
  </tbody>
</table>

<h4 caption="Table 1. Database Configuration Options" caption-side="top" id="messaging-configuration-options">
<a class="anchor" href="#messaging-configuration-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Messaging Configuration Options</h4>
<p>|                               |                                                       |
| —————————– | —————————————————– |
| Option                        | Description                                           |
| –message-server-config       | configure appliance as a messaging server (boolean)   |
| –message-server-unconfig     | unconfigure appliance as a messaging server (boolean) |
| –message-client-config       | configure appliance as a messaging server (boolean)   |
| –message-client-unconfig     | unconfigure appliance as a messaging server (boolean) |
| –message-keystore-username   | messaging keystore username (defaults to admin)       |
| –message-keystore-password   | messaging keystore password                           |
| –message-server-username     | messaging server username (defaults to admin)         |
| –message-server-password     | messaging server password                             |
| –message-server-port         | messaging server port (defaults to 9093)              |
| –message-server-use-ipaddr   | use ipaddress not hostname for messaging server       |
| –message-server-host         | messaging server hostname or ipaddress                |
| –message-truststore-path-src | path for messaging server truststore                  |
| –message-ca-cert-path-src    | path to a certificate authority for messaging SSL     |
| –message-persistent-disk     | configure a new volume for storing messaging data     |</p>

<h4 id="v2_key-options">
<a class="anchor" href="#v2_key-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>v2_key Options</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>–key (-k)</td>
      <td>create a new v2_key</td>
    </tr>
    <tr>
      <td>–fetch-key (-K)</td>
      <td>fetch the v2_key from the given host</td>
    </tr>
    <tr>
      <td>–force-key (-f)</td>
      <td>create or fetch the key even if one exists</td>
    </tr>
    <tr>
      <td>–sshlogin</td>
      <td>ssh username for fetching the v2_key (defaults to <code class="language-plaintext highlighter-rouge">root</code>)</td>
    </tr>
    <tr>
      <td>–sshpassword</td>
      <td>ssh password for fetching the v2_key</td>
    </tr>
  </tbody>
</table>

<h4 caption="Table 2. v2_key Options" caption-side="top" id="ipa-server-options">
<a class="anchor" href="#ipa-server-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>IPA Server Options</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>–host (-H)</td>
      <td>set the appliance hostname to the given name</td>
    </tr>
    <tr>
      <td>–ipaserver (-e)</td>
      <td>IPA server FQDN</td>
    </tr>
    <tr>
      <td>–ipaprincipal (-n)</td>
      <td>IPA server principal (default: <code class="language-plaintext highlighter-rouge">admin</code>)</td>
    </tr>
    <tr>
      <td>–ipapassword (-w)</td>
      <td>IPA server password</td>
    </tr>
    <tr>
      <td>–ipadomain (-o)</td>
      <td>IPA server domain (optional). Will be based on the appliance domain name if not specified.</td>
    </tr>
    <tr>
      <td>–iparealm (-l)</td>
      <td>IPA server realm (optional). Will be based on the domain name of the ipaserver if not specified.</td>
    </tr>
    <tr>
      <td>–uninstall-ipa (-u)</td>
      <td>uninstall IPA client</td>
    </tr>
  </tbody>
</table>

<p caption="Table 3. IPA Server Options" caption-side="top"><strong>Note</strong>:</p>

<ul>
  <li>
    <p>In order to configure authentication through an IPA server, in addition to using <strong>Configure External Authentication (httpd)</strong> in the <code class="language-plaintext highlighter-rouge">appliance_console</code>, external authentication can be optionally configured via the <code class="language-plaintext highlighter-rouge">appliance_console_cli</code> (command-line interface).</p>
  </li>
  <li>
    <p>Specifying <strong>–host</strong> will update the hostname of the appliance. If this step was already performed via the <code class="language-plaintext highlighter-rouge">appliance_console</code> and the necessary updates that are made to <code class="language-plaintext highlighter-rouge">/etc/hosts</code> if DNS is not properly configured, the <strong>–host</strong> option can be omitted.</p>
  </li>
</ul>

<h4 id="certificate-options">
<a class="anchor" href="#certificate-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Certificate Options</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>–ca (-c)</td>
      <td>CA name used for certmonger (default: <code class="language-plaintext highlighter-rouge">ipa</code>)</td>
    </tr>
    <tr>
      <td>–postgres-client-cert (-g)</td>
      <td>install certs for postgres client</td>
    </tr>
    <tr>
      <td>–postgres-server-cert</td>
      <td>install certs for postgres server</td>
    </tr>
    <tr>
      <td>–http-cert</td>
      <td>install certs for http server (to create certs/httpd* values for a unique key)</td>
    </tr>
    <tr>
      <td>–extauth-opts (-x)</td>
      <td>external authentication options</td>
    </tr>
  </tbody>
</table>

<p caption="Table 4. Certificate Options" caption-side="top"><strong>Note</strong>: The certificate options augment the functionality of the <code class="language-plaintext highlighter-rouge">certmonger</code> tool and enable creating a certificate signing request (CSR), and specifying <code class="language-plaintext highlighter-rouge">certmonger</code> the directories to store the keys.</p>

<h4 id="other-options">
<a class="anchor" href="#other-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other Options</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>–logdisk (-l)</td>
      <td>log disk path</td>
    </tr>
    <tr>
      <td>–tmpdisk</td>
      <td>initialize the given device for temp storage (volume mounted at <code class="language-plaintext highlighter-rouge">/var/www/miq_tmp</code>)</td>
    </tr>
    <tr>
      <td>–verbose (-v)</td>
      <td>print more debugging info</td>
    </tr>
  </tbody>
</table>

<p caption="Table 5. Other Options" caption-side="top"><strong>Example Usage.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ssh root@appliance.test.company.com
</code></pre></div></div>

<p>Set up an all-in-one appliance as a local database and messaging appliance and start the MIQ Server:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --internal --dbdisk /dev/sdb --region 0 --password smartvm --message-server-config --message-keystore-password smartvm --server=start
</code></pre></div></div>

<p>Join a worker appliance to an existing region:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --fetch-key db.example.com --sshlogin root --sshpassword smartvm --hostname db.example.com --password mydatabasepassword --message-client-config --message-server-host db.example.com --message-server-password smartvm --message-keystore-password smartvm --server start
</code></pre></div></div>

<p>To create a new database locally on the server by using <code class="language-plaintext highlighter-rouge">/dev/sdb</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --internal --dbdisk /dev/sdb --region 0 --password smartvm
</code></pre></div></div>

<p>To copy the v2_key from a host <em>some.example.com</em> to local machine:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --fetch-key some.example.com --sshlogin root --sshpassword smartvm
</code></pre></div></div>

<p>You could combine the two to join a region where <em>db.example.com</em> is the appliance hosting the database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --fetch-key db.example.com --sshlogin root --sshpassword smartvm --hostname db.example.com --password mydatabasepassword
</code></pre></div></div>

<p>To configure an appliance as a messaging server:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --message-server-config --message-keystore-password="smartvm"
</code></pre></div></div>

<p>To configure an appliance as a messaging client:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --message-client-config --message-server-host db.example.com --message-server-password smartvm --message-keystore-password smartvm
</code></pre></div></div>

<p>To configure external authentication:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli --host appliance.test.company.com
                        --ipaserver ipaserver.test.company.com
                        --ipadomain test.company.com
                        --iparealm TEST.COMPANY.COM
                        --ipaprincipal admin
                        --ipapassword smartvm1
</code></pre></div></div>

<p>To uninstall external authentication:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># appliance_console_cli  --uninstall-ipa
</code></pre></div></div>



      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa-solid theme-toggle" data-toggle-theme></button>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa-brands fa-github"></i>
          GitHub
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa-brands fa-gitter"></i>
          Gitter
        </a>
      </li>
      <li>
        <a href="https://github.com/orgs/ManageIQ/discussions">
          <i class="fa-solid fa-comments"></i>
          Forum
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2026 ManageIQ.
      </span>
      <span>
        <a href="https://www.ibm.com/opensource/" class="footer-link" target="_blank">
          Sponsored by IBM, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://x.com/ManageIQ" title="X / Twitter" class="social_link">
            <i class="fa-brands fa-x-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://bsky.app/profile/manageiq.bsky.social" title="Bluesky" class="social_link">
            <i class="fa-brands fa-bluesky"></i>
          </a>
        </li>

        <li>
          <a href="https://fosstodon.org/@manageiq" title="Mastodon" class="social_link">
            <i class="fa-brands fa-mastodon"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" title="Facebook" class="social_link">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </li>

        <li>
          <a href="https://www.linkedin.com/company/manageiq" title="LinkedIn" class="social_link">
            <i class="fa-brands fa-linkedin"></i>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" title="YouTube" class="social_link">
            <i class="fa-brands fa-youtube"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa-solid fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
