<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <script>
    stored_theme = localStorage.getItem('miq-theme');
    theme        = stored_theme && JSON.parse(localStorage.getItem('miq-theme'));

    if (theme === "light-theme") {
      document.querySelector('html').classList.add("light-theme");
    }

    if (theme === "dark-theme") {
      document.querySelector('html').classList.add("dark-theme");
    }
  </script>

  <link type="text/css" rel="stylesheet" href="/assets/main-0e35068491e264b14654b1015221d2836e4d10611e4a5e7c7d39e00699263865.css">
  <link rel="canonical" href="http://manageiq.org/docs/reference/latest/methods_available_for_automation/">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa theme-toggle" data-toggle-theme></i>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/reference/lasker/methods_available_for_automation/index">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li class="active">
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li>
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

    <div class="col-lg-4 col-md-4 col-sm-12 pull-right" style="margin-top: 10px">
        <script async src="https://cse.google.com/cse.js?cx=006042792541147862616:dfkijfebdts"></script>
         <div class="gcse-search"></div>
    </div>
</nav>

<script>
  window.onload = demo;
	function demo() {
	    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search Documentation")
	}
</script>

<div class="doc_container">
  <div class="doc_menu">
    
    

<div class="doc_menu-heading">
  Lasker
</div>

<ul class="menu menu-toplevel" id=ref_menu_lasker>


  <li class="menu-parent">
    
    <a href="#">
      Installation
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_aws/index.html">
      Amazon Web Services (AWS)
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_kubernetes/index.html">
      Kubernetes
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_ibm_cloud/index.html">
      IBM Cloud
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_microsoft_azure/index.html">
      Microsoft Azure
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_google_compute_engine/index.html">
      Google Compute Engine
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_vmware_vsphere/index.html">
      VMware vSphere
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_red_hat_enterprise_linux_openstack_platform/index.html">
      Red Hat Enterprise OpenStack Platform
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_red_hat_virtualization/index.html">
      Red Hat Enterprise Virtualization
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/installing_on_scvmm/index.html">
      Microsoft System Center Virtual Machine Manager (SCVMM)
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Configuration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/deployment_planning_guide/index.html">
      Deployment Planning Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/general_configuration/index.html">
      General Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/high_availability_guide/index.html">
      High Availability Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/appliance_hardening_guide/index.html">
      Appliance Hardening Guide
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Administration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/monitoring_alerts_and_reporting/index.html">
      Monitoring, Alerts, and Reporting
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/policies_and_profiles_guide/index.html">
      Policies and Profiles Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/managing_infrastructure_and_inventory/index.html">
      Managing Infrastructure and Inventory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/managing_providers/index.html">
      Managing Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/provisioning_virtual_machines_and_hosts/index.html">
      Provisioning Virtual Machines and Hosts
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/scripting_actions/index.html">
      Scripting Actions in ManageIQ
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Authentication
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/active_directory.html">
      Active Directory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/ipa_2fa.html">
      2-Factor-Authentication with IPA
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/ipa_ad_trust.html">
      IPA/AD Trust
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/ldap.html">
      LDAP
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/saml.html">
      SAML
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/auth/openid_connect.html">
      OpenID-Connect
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Integration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/integration_with_aws_cloudformation_and_openstack_heat/index.html">
      AWS CloudFormation and OpenStack Heat
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/integration_with_servicenow/index.html">
      ServiceNow
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Reference
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/capabilities_matrix/index.html">
      Capabilities Matrix
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/lasker/rest_api/index.html">
      ManageIQ REST API
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item active">
    <a href="/docs/reference/lasker/methods_available_for_automation/index.html">
      Methods Available for Automation
    </a>
    
  </li>


      </ul>
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc user_doc">
      

      <div class="doc-content">
        
        <div class="doc-versions">
          <span class="label">Versions: </span>
          
            <span>
              <a href="/docs/reference/latest/methods_available_for_automation/index.html">
                Latest
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/petrosian/methods_available_for_automation/index.html">
                Petrosian
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/oparin/methods_available_for_automation/index.html">
                Oparin
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/najdorf/methods_available_for_automation/index.html">
                Najdorf
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/morphy/methods_available_for_automation/index.html">
                Morphy
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span class="active" >
              <a href="/docs/reference/lasker/methods_available_for_automation/index.html">
                Lasker
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/kasparov/methods_available_for_automation/index.html">
                Kasparov
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/jansa/methods_available_for_automation/index.html">
                Jansa
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/ivanchuk/doc-Methods_Available_for_Automation/miq/index.html">
                Ivanchuk
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/hammer/doc-Methods_Available_for_Automation/miq/index.html">
                Hammer
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/gaprindashvili/doc-Methods_Available_for_Automation/miq/index.html">
                Gaprindashvili
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/fine/doc-Methods_Available_for_Automation/miq/index.html">
                Fine
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/euwe/doc-Methods_Available_for_Automation/miq/index.html">
                Euwe
              </a>
            </span>
            
          
        </div>
        
        <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#methods-available-for-automation">Methods Available for Automation</a>
<ul>
<li class="toc-entry toc-h2"><a href="#methods-available-for-use-with-manageiq">Methods Available for Use with ManageIQ</a></li>
<li class="toc-entry toc-h2"><a href="#evmroot">$evm.root</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-hierarchy">Method Hierarchy</a></li>
<li class="toc-entry toc-h3"><a href="#base-methods">Base Methods</a></li>
<li class="toc-entry toc-h3"><a href="#availability-zones-availability_zone">Availability Zones (availability_zone)</a></li>
<li class="toc-entry toc-h3"><a href="#classifications-classification">Classifications (classification)</a></li>
<li class="toc-entry toc-h3"><a href="#cloud-networks-cloud_network">Cloud Networks (cloud_network)</a></li>
<li class="toc-entry toc-h3"><a href="#cloud-resource-quotas-cloud_resource_quota">Cloud Resource Quotas (cloud_resource_quota)</a></li>
<li class="toc-entry toc-h3"><a href="#cloud-subnets-cloud_subnet">Cloud Subnets (cloud_subnet)</a></li>
<li class="toc-entry toc-h3"><a href="#cloud-tenants-cloud_tenant">Cloud Tenants (cloud_tenant)</a></li>
<li class="toc-entry toc-h3"><a href="#customization-template-customization_template">Customization Template (customization_template)</a></li>
<li class="toc-entry toc-h3"><a href="#clusters-ems_cluster">Clusters (ems_cluster)</a></li>
<li class="toc-entry toc-h3"><a href="#management-system-events-ems_event">Management System Events (ems_event)</a></li>
<li class="toc-entry toc-h3"><a href="#management-system-folders-ems_folder">Management System Folders (ems_folder)</a></li>
<li class="toc-entry toc-h3"><a href="#providers-ext_management_system">Providers (ext_management_system)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#cloud-providers-ems_cloud">Cloud Providers (ems_cloud)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#firewall-rules-firewall_rule">Firewall Rules (firewall_rule)</a></li>
<li class="toc-entry toc-h3"><a href="#flavors-flavor">Flavors (flavor)</a></li>
<li class="toc-entry toc-h3"><a href="#floating-ips-floating_ip">Floating IPs (floating_ip)</a></li>
<li class="toc-entry toc-h3"><a href="#guest-applications-guest_application">Guest Applications (guest_application)</a></li>
<li class="toc-entry toc-h3"><a href="#guest-device-guest_device">Guest Device (guest_device)</a></li>
<li class="toc-entry toc-h3"><a href="#hardware-hardware">Hardware (hardware)</a></li>
<li class="toc-entry toc-h3"><a href="#hosts-host">Hosts (host)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#hosts-vmware-esx-host_vmware_esx">Hosts: Vmware ESX (host_vmware_esx)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#lan-lan">LAN (lan)</a></li>
<li class="toc-entry toc-h3"><a href="#groups-miq_group">Groups (miq_group)</a></li>
<li class="toc-entry toc-h3"><a href="#request-miq_request">Request (miq_request)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#automation-request-automation_request">Automation Request (automation_request)</a></li>
<li class="toc-entry toc-h4"><a href="#host-provision-request-miq_host_provision_request">Host Provision Request (miq_host_provision_request)</a></li>
<li class="toc-entry toc-h4"><a href="#vm-provision-request-miq_provision_request">VM Provision Request (miq_provision_request)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#request-task-miq_request_task">Request Task (miq_request_task)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#automation-task-automation_task">Automation Task (automation_task)</a></li>
<li class="toc-entry toc-h4"><a href="#host-provision-task-miq_host_provision">Host Provision Task (miq_host_provision)</a></li>
<li class="toc-entry toc-h4"><a href="#vm-provision-task-miq_provision">VM Provision Task (miq_provision)</a>
<ul>
<li class="toc-entry toc-h5"><a href="#adding-disks-to-openstack-instance-provisioning">Adding Disks to OpenStack Instance Provisioning</a></li>
<li class="toc-entry toc-h5"><a href="#booting-openstack-instances-from-volume">Booting OpenStack Instances from Volume</a></li>
<li class="toc-entry toc-h5"><a href="#vm-provisioning-for-clouds-task-miq_provision_cloud">VM Provisioning for Clouds Task (miq_provision_cloud)</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#service-template-provision-task-service_template_provision_task">Service Template Provision Task (service_template_provision_task)</a></li>
<li class="toc-entry toc-h4"><a href="#service-reconfiguration-task-service_reconfigure_task">Service Reconfiguration Task (service_reconfigure_task)</a></li>
<li class="toc-entry toc-h4"><a href="#vm-migrate-task-vm_migrate_task">VM Migrate Task (vm_migrate_task)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#proxies-miq_proxy">Proxies (miq_proxy)</a></li>
<li class="toc-entry toc-h3"><a href="#servers-miq_server">Servers (miq_server)</a></li>
<li class="toc-entry toc-h3"><a href="#network-network">Network (network)</a></li>
<li class="toc-entry toc-h3"><a href="#pxe-image-pxe_image">PXE Image (pxe_image)</a></li>
<li class="toc-entry toc-h3"><a href="#pxe-server-pxe_server">PXE Server (pxe_server)</a></li>
<li class="toc-entry toc-h3"><a href="#security-groups-security_group">Security Groups (security_group)</a></li>
<li class="toc-entry toc-h3"><a href="#service-service">Service (service)</a></li>
<li class="toc-entry toc-h3"><a href="#service-resource-service_resource">Service Resource (service_resource)</a></li>
<li class="toc-entry toc-h3"><a href="#service-template-service_template">Service Template (service_template)</a></li>
<li class="toc-entry toc-h3"><a href="#snapshot-snapshot">Snapshot (snapshot)</a></li>
<li class="toc-entry toc-h3"><a href="#datastores-storage">Datastores (storage)</a></li>
<li class="toc-entry toc-h3"><a href="#switch-switch">Switch (switch)</a></li>
<li class="toc-entry toc-h3"><a href="#user-user">User (user)</a></li>
<li class="toc-entry toc-h3"><a href="#virtual-machines-and-templates-vm_or_template">Virtual Machines and Templates (vm_or_template)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#vms-vm">VMs (vm)</a>
<ul>
<li class="toc-entry toc-h5"><a href="#vms-for-clouds-vm_cloud">VMs for Clouds (vm_cloud)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#windows-image-windows_image">Windows Image (windows_image)</a></li>
<li class="toc-entry toc-h3"><a href="#creating-categories-and-tags">Creating Categories and Tags</a>
<ul>
<li class="toc-entry toc-h4"><a href="#category-and-tags-methods-example">Category and Tags Methods Example</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#quota">Quota</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#terminology">Terminology</a></li>
</ul><h1 id="methods-available-for-automation">
<a class="anchor" href="#methods-available-for-automation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods Available for Automation</h1>

<h2 id="methods-available-for-use-with-manageiq">
<a class="anchor" href="#methods-available-for-use-with-manageiq" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods Available for Use with ManageIQ</h2>

<p>Methods can be used from within ManageIQ to create custom actions
and workflows for the objects managed for your ManageIQ
Infrastructure. This document describes the methods available for use in
ManageIQ. This document is organized by the object hierarchy in
the Automate Model.</p>

<p><strong>Note:</strong></p>

<p>Users of ManageIQ can construct custom automation methods in Ruby
to extend the product. ManageIQ ships with a core set of Ruby
gems used by the ManageIQ Rails Application. The Ruby gems in
this set are subject to change, and have changed since the previous
version. If you are calling gems using Automate that are no longer in
the ManageIQ appliance, you can install them by using the <code class="language-plaintext highlighter-rouge">gem
install</code> command.</p>

<p>While gems can be imported into automation methods using <code class="language-plaintext highlighter-rouge">require</code>, it
is recommended that the authors of the automation methods clearly
document the use of gems either in the core set or a custom set. It is
the responsibility of the author of such custom automation to own the
life cycle of any gem being referenced in those methods.</p>

<h2 id="evmroot">
<a class="anchor" href="#evmroot" aria-hidden="true"><span class="octicon octicon-link"></span></a>$evm.root</h2>

<p>When an Automate method is launched, it has one global variable: <code class="language-plaintext highlighter-rouge">$evm</code>.
The <code class="language-plaintext highlighter-rouge">$evm</code> variable allows the method to communicate back to
ManageIQ. The <code class="language-plaintext highlighter-rouge">$evm.root</code> is the root object in the workspace, it
provides access to the data currently loaded in the ManageIQ
model. It uses the object’s data to solve more complex problems by
integrating with ManageIQ methods.</p>

<p>The following is an excerpt from the <strong>InspectMe</strong> method that can be
found in the <strong>ManageIQ\System\Request</strong> namespace. The dumpRoot
method accesses the <code class="language-plaintext highlighter-rouge">$evm.root</code> object, and sends all of its attributes
to the ManageIQ Automate log for review. In the dumpServer
Method, the inspect method is run based on the value of the miq_server
obtained from the <code class="language-plaintext highlighter-rouge">$evm.root</code> object.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpRoot</span>
  <span class="c1"># Description: Dump Root information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpRoot</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Root:&lt;$evm.root&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Root:&lt;$evm.root&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Root:&lt;$evm.root&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpServer</span>
  <span class="c1"># Inputs: $evm.root['miq_server']</span>
  <span class="c1"># Description: Dump MIQ Server information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpServer</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<p>The result of dumpRoot is below. The value of miq_server is what gets
passed into the dumpServer method.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.517279</span> <span class="c1">#5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - EVM Automate Method Started</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.523637</span> <span class="c1">#5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Begin Attributes</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.527552</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - miq_server: #&lt;MiqAeMethodService::MiqAeServiceMiqServer:0x0000001e76d900&gt;</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.528801</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - miq_server_id: 1</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.529961</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - object_name: Request</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.531067</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - request: inspectme</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.534054</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vm: DEV-JaneM</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.535156</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vm_id: 85</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.536238</span> <span class="c1">#5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vmdb_object_type: vm</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.537159</span> <span class="c1">#5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; End Attributes</span>
<span class="p">[</span><span class="o">----</span><span class="p">]</span> <span class="no">I</span><span class="p">,</span> <span class="p">[</span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="no">T13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">54.537772</span> <span class="c1">#5320:f329024]  INFO -- : &lt;User-Defined Method&gt;</span>
</code></pre></div></div>

<h3 id="method-hierarchy">
<a class="anchor" href="#method-hierarchy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method Hierarchy</h3>

<p>The Automate Model inline methods have a hierarchy. The sublevels in the
hierarchy have access to the methods for itself and the levels above it.
For example, Red Hat Hosts have access to the Red Hat Host methods, Host
Methods, and Base Methods.</p>

<p>The following nested list displays the hierarchy.</p>

<ul>
  <li>
    <p>Top Level: Base</p>

    <ul>
      <li>
        <p>Authentication (authentication)</p>

        <ul>
          <li>
            <p>Private Keys (auth_private_key)</p>

            <ul>
              <li>
                <p>Key Pair for Clouds (auth_key_pair_cloud)</p>

                <ul>
                  <li>
                    <p>Amazon (auth_key_pair_amazon)</p>
                  </li>
                  <li>
                    <p>OpenStack (auth_key_pair_openstack)</p>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>Availability Zones (availability_zone)</p>

        <ul>
          <li>
            <p>Amazon (availability_zone_amazon)</p>
          </li>
          <li>
            <p>OpenStack (availability_zone_openstack)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Classification (classification)</p>
      </li>
      <li>
        <p>Cloud Networks (cloud_network)</p>
      </li>
      <li>
        <p>Cloud Resource Quotas (cloud_resource_quota)</p>

        <ul>
          <li>OpenStack (openstack_resource_quota)</li>
        </ul>
      </li>
      <li>
        <p>Cloud Subnets (cloud_subnet)</p>
      </li>
      <li>
        <p>Cloud Tenants (cloud_tenant)</p>
      </li>
      <li>
        <p>Customization Templates (customization_template)</p>

        <ul>
          <li>
            <p>Cloud Init (customization_template_cloud_init)</p>
          </li>
          <li>
            <p>Kickstart (customization_template_kickstart)</p>
          </li>
          <li>
            <p>Sysprep (customization_template_sysprep)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Cluster (ems_cluster)</p>
      </li>
      <li>
        <p>Event (ems_event)</p>
      </li>
      <li>
        <p>Folder (ems_folder)</p>
      </li>
      <li>
        <p>Providers (ext_management_system)</p>

        <ul>
          <li>
            <p>Cloud (ems_cloud)</p>

            <ul>
              <li>
                <p>Amazon (ems_amazon)</p>
              </li>
              <li>
                <p>Openstack (ems_openstack)</p>
              </li>
            </ul>
          </li>
          <li>
            <p>Infrastructure (ems_infra)</p>

            <ul>
              <li>
                <p>Microsoft System Center VMM (ems_microsoft)</p>
              </li>
              <li>
                <p>Red Hat Enterprise Virtualization (ems_redhat)</p>
              </li>
              <li>
                <p>VMware vCenter (ems_vmware)</p>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>Filesystems (filesystem)</p>
      </li>
      <li>
        <p>Firewall Rules (filewall_rule)</p>
      </li>
      <li>
        <p>Flavors</p>

        <ul>
          <li>
            <p>Amazon (flavor_amazon)</p>
          </li>
          <li>
            <p>OpenStack (flavor_openstack)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Floating IPs (floating_ip)</p>

        <ul>
          <li>
            <p>Amazon (floating_ip_amazon)</p>
          </li>
          <li>
            <p>OpenStack (floating_ip_openstack)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Guest Applications (guest_application)</p>
      </li>
      <li>
        <p>Guest Devices (guest_device)</p>
      </li>
      <li>
        <p>Hardware (hardware)</p>
      </li>
      <li>
        <p>Hosts (host)</p>

        <ul>
          <li>
            <p>Red Hat Enterprise Virtualization (host_redhat)</p>
          </li>
          <li>
            <p>VMware (host_vmware)</p>

            <ul>
              <li>VMware ESX (host_vmware_esx)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>ISO Images (iso_image)</p>
      </li>
      <li>
        <p>Jobs (job)</p>
      </li>
      <li>
        <p>LANs (lan)</p>
      </li>
      <li>
        <p>Groups (miq_group)</p>
      </li>
      <li>
        <p>Policies (miq_policy)</p>
      </li>
      <li>
        <p>Proxies (miq_proxy)</p>
      </li>
      <li>
        <p>Requests (miq_request)</p>

        <ul>
          <li>
            <p>Automation (automation_request)</p>
          </li>
          <li>
            <p>Host Provisioning (miq_host_provision_request)</p>
          </li>
          <li>
            <p>VM Provisioning (miq_provision_request)</p>

            <ul>
              <li>VM Templates (miq_provision_request_template)</li>
            </ul>
          </li>
          <li>
            <p>Service Reconfiguration (service_reconfigure_request)</p>
          </li>
          <li>
            <p>Service Template Provisioning
(service_template_provision_request)</p>
          </li>
          <li>
            <p>VM Migration (vm_migrate_request)</p>
          </li>
          <li>
            <p>VM Reconfiguration (vm_reconfigure_request)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Request Task (miq_request_task)</p>

        <ul>
          <li>
            <p>Automation (automation_task)</p>
          </li>
          <li>
            <p>Host Provisioning (miq_host_provision)</p>
          </li>
          <li>
            <p>VM Provisioning (miq_provision)</p>

            <ul>
              <li>
                <p>Cloud (miq_provision_cloud)</p>

                <ul>
                  <li>
                    <p>Amazon (miq_provision_amazon)</p>
                  </li>
                  <li>
                    <p>OpenStack (miq_provision_openstack)</p>
                  </li>
                </ul>
              </li>
              <li>
                <p>Red Hat Enterprise Virtualization
(miq_provision_redhat)</p>

                <ul>
                  <li>
                    <p>Via ISO (miq_provision_redhat_via_iso)</p>
                  </li>
                  <li>
                    <p>Via PXE (miq_provision_redhat_via_pxe)</p>
                  </li>
                </ul>
              </li>
              <li>
                <p>VMware (miq_provision_vmware)</p>

                <ul>
                  <li>
                    <p>Via NetApp RCU
(miq_provision_vmware_via_net_app_rcu)</p>
                  </li>
                  <li>
                    <p>Via PXE (miq_provision_vmware_via_pxe)</p>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <p>Service Reconfiguration (service_reconfigure_task)</p>
          </li>
          <li>
            <p>Service Template Provisioning
(service_template_provision_task)</p>
          </li>
          <li>
            <p>VM Migratation (vm_migrate_task)</p>
          </li>
          <li>
            <p>VM Reconfiguration (vm_reconfigure_task)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Servers (miq_server)</p>
      </li>
      <li>
        <p>Networks (network)</p>
      </li>
      <li>
        <p>Operating Systems (operating_system)</p>
      </li>
      <li>
        <p>PXE Images (pxe_image)</p>

        <ul>
          <li>
            <p>iPXE (pxe_image_ipxe)</p>
          </li>
          <li>
            <p>PXELINUX (pxe_image_pxelinux)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>PXE Servers (pxe_server)</p>
      </li>
      <li>
        <p>Resource Pools (resource_pool)</p>
      </li>
      <li>
        <p>Security Groups (security_group)</p>

        <ul>
          <li>
            <p>Amazon (security_group_amazon)</p>
          </li>
          <li>
            <p>OpenStack (security_group_openstack)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Services (service)</p>
      </li>
      <li>
        <p>Service Resources (service_resource)</p>
      </li>
      <li>
        <p>Service Templates (service_template)</p>
      </li>
      <li>
        <p>Snapshots (snapshot)</p>
      </li>
      <li>
        <p>Storages (storage)</p>
      </li>
      <li>
        <p>Switches (switch)</p>
      </li>
      <li>
        <p>Users (user)</p>
      </li>
      <li>
        <p>VMs or Templates (vm_or_template)</p>

        <ul>
          <li>
            <p>Templates (miq_template)</p>

            <ul>
              <li>
                <p>Cloud (template_cloud)</p>

                <ul>
                  <li>
                    <p>Amazon (template_amazon)</p>
                  </li>
                  <li>
                    <p>OpenStack (template_openstack)</p>
                  </li>
                </ul>
              </li>
              <li>
                <p>Infrastructure (template_infra)</p>

                <ul>
                  <li>
                    <p>Microsoft (template_microsoft)</p>
                  </li>
                  <li>
                    <p>Red Hat Enterprise Virtualization (template_redhat)</p>
                  </li>
                  <li>
                    <p>VMware (template_vmware)</p>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <p>VMs (vm)</p>

            <ul>
              <li>
                <p>Clouds (vm_cloud)</p>

                <ul>
                  <li>
                    <p>Amazon (vm_amazon)</p>
                  </li>
                  <li>
                    <p>OpenStack (vm_openstack)</p>
                  </li>
                </ul>
              </li>
              <li>
                <p>Infrastructure (vm_infra)</p>

                <ul>
                  <li>
                    <p>Microsoft (vm_microsoft)</p>
                  </li>
                  <li>
                    <p>Red Hat Enterprise Virtualization (vm_redhat)</p>
                  </li>
                  <li>
                    <p>Vmware (vm_vmware)</p>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>Windows Images (windows_images)</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="base-methods">
<a class="anchor" href="#base-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Base Methods</h3>

<p>These methods may be used with all objects available in the Automate
Model.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>inspect</td>
      <td>Returns a string containing a list of attributes of the object. See the InspectMe method in Samples class</td>
    </tr>
    <tr>
      <td>inspect_all</td>
      <td>Returns all information for an object</td>
    </tr>
    <tr>
      <td>virtual_column_names</td>
      <td>Returns the objects virtual columns names</td>
    </tr>
    <tr>
      <td>virtual_columns_inspect</td>
      <td>Returns the objects virtual columns and values</td>
    </tr>
    <tr>
      <td>reload</td>
      <td>Returns to original object to prevent the internal object from being returned</td>
    </tr>
    <tr>
      <td>model_suffix</td>
      <td>Returns objects suffix. For an object of type MiqAeServiceVmVmware, returns “Vmware”</td>
    </tr>
    <tr>
      <td>tagged_with?(category, name)</td>
      <td>Is the object tagged with the category and name specified?</td>
    </tr>
    <tr>
      <td>tags(category = nil)– this means that category is an optional parameter, with a default of nil</td>
      <td>Returns the tags.</td>
    </tr>
    <tr>
      <td>tag_assign(tag)</td>
      <td>Assigns tag to the object, except for the miq_provision object, which uses add_tag(category, tag_name)</td>
    </tr>
    <tr>
      <td>tag_unassign(tag)</td>
      <td>Unassigns tag to the object, except for the miq_provision object, which uses clear_tag(category, tag_name)</td>
    </tr>
  </tbody>
</table>

<p>The <strong>InspectMe</strong> <strong>Sample Method</strong> uses many of the Methods shown in
this document. The method returns attributes of the ManageIQ
Server and then returns attributes for the host, cluster, and virtual
machine from the provider of invocation. In many environments it is
linked to a button.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">###################################</span>
<span class="c1"># EVM Automate Method: InspectMe</span>
<span class="c1">#</span>
<span class="c1"># Notes: Dump the objects in storage to the automation.log</span>
<span class="c1">#</span>
<span class="c1">###################################</span>
<span class="k">begin</span>
  <span class="vi">@method</span> <span class="o">=</span> <span class="s1">'InspectMe'</span>
  <span class="vi">@log_prefix</span> <span class="o">=</span> <span class="s2">"[</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2">]"</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EVM Automate Method Started"</span><span class="p">)</span>

  <span class="c1"># Turn on verbose logging</span>
  <span class="vi">@debug</span> <span class="o">=</span> <span class="kp">true</span>



  <span class="c1"># List the types of object we will try to detect</span>
  <span class="n">obj_types</span> <span class="o">=</span> <span class="sx">%w{ vm host storage ems_cluster ext_management_system }</span>
  <span class="n">obj_type</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">detect</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">obj_types</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="n">k</span><span class="p">)}</span>

  <span class="c1"># uncomment below to dump root object attributes</span>
  <span class="n">dumpRoot</span>

  <span class="c1"># uncomment below to dump miq_server object attributes</span>
  <span class="n">dumpServer</span>


  <span class="c1"># If obj_type is NOT nil</span>
  <span class="k">unless</span> <span class="n">obj_type</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="n">rootobj</span> <span class="o">=</span> <span class="n">obj_type</span><span class="p">.</span><span class="nf">first</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">obj_type</span><span class="p">.</span><span class="nf">second</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Detected Object:&lt;</span><span class="si">#{</span><span class="n">rootobj</span><span class="si">}</span><span class="s2">&gt;"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="k">case</span> <span class="n">rootobj</span>
    <span class="k">when</span> <span class="s1">'host'</span> <span class="k">then</span> <span class="n">dumpHost</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">when</span> <span class="s1">'vm'</span> <span class="k">then</span> <span class="n">dumpVM</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">when</span> <span class="s1">'ems_cluster'</span> <span class="k">then</span> <span class="n">dumpCluster</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">when</span> <span class="s1">'ext_management_system'</span> <span class="k">then</span> <span class="n">dumpEMS</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">when</span> <span class="s1">'storage'</span> <span class="k">then</span> <span class="n">dumpStorage</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1">#</span>
  <span class="c1"># Exit method</span>
  <span class="c1">#</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EVM Automate Method Ended"</span><span class="p">)</span>
  <span class="nb">exit</span> <span class="no">MIQ_OK</span>

  <span class="c1">#</span>
  <span class="c1"># Set Ruby rescue behavior</span>
  <span class="c1">#</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">err</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - [</span><span class="si">#{</span><span class="n">err</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="si">#{</span><span class="n">err</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="nb">exit</span> <span class="no">MIQ_ABORT</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="availability-zones-availability_zone">
<a class="anchor" href="#availability-zones-availability_zone" aria-hidden="true"><span class="octicon octicon-link"></span></a>Availability Zones (availability_zone)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
    <tr>
      <td>vms_and_templates</td>
      <td>Returns object’s VMs and templates</td>
    </tr>
    <tr>
      <td>cloud_subnets</td>
      <td>Returns object’s cloud subnets</td>
    </tr>
  </tbody>
</table>

<h3 id="classifications-classification">
<a class="anchor" href="#classifications-classification" aria-hidden="true"><span class="octicon octicon-link"></span></a>Classifications (classification)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>parent</td>
      <td>Returns object’s parent object</td>
    </tr>
    <tr>
      <td>namespace</td>
      <td>Returns object’s namespace</td>
    </tr>
    <tr>
      <td>category</td>
      <td>Returns object’s category</td>
    </tr>
    <tr>
      <td>name</td>
      <td>Returns object’s name</td>
    </tr>
    <tr>
      <td>to_tag</td>
      <td>Returns object’s tag mapping</td>
    </tr>
  </tbody>
</table>

<h3 id="cloud-networks-cloud_network">
<a class="anchor" href="#cloud-networks-cloud_network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Networks (cloud_network)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>cloud_tenant</td>
      <td>Returns object’s cloud tenant</td>
    </tr>
    <tr>
      <td>cloud_subnets</td>
      <td>Returns object’s cloud subnets</td>
    </tr>
    <tr>
      <td>security_groups</td>
      <td>Returns object’s security groups</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
  </tbody>
</table>

<h3 id="cloud-resource-quotas-cloud_resource_quota">
<a class="anchor" href="#cloud-resource-quotas-cloud_resource_quota" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Resource Quotas (cloud_resource_quota)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>cloud_tenant</td>
      <td>Returns object’s cloud tenant</td>
    </tr>
  </tbody>
</table>

<h3 id="cloud-subnets-cloud_subnet">
<a class="anchor" href="#cloud-subnets-cloud_subnet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Subnets (cloud_subnet)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>cloud_network</td>
      <td>Returns object’s cloud network</td>
    </tr>
    <tr>
      <td>availability_zone</td>
      <td>Returns object’s availability zone</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
  </tbody>
</table>

<h3 id="cloud-tenants-cloud_tenant">
<a class="anchor" href="#cloud-tenants-cloud_tenant" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Tenants (cloud_tenant)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>security_groups</td>
      <td>Returns object’s security groups</td>
    </tr>
    <tr>
      <td>cloud_networks</td>
      <td>Returns object’s cloud network</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
    <tr>
      <td>vms_and_templates</td>
      <td>Returns object’s VMs and templates</td>
    </tr>
    <tr>
      <td>miq_templates</td>
      <td>Returns object’s templates</td>
    </tr>
    <tr>
      <td>floating_ips</td>
      <td>Returns object’s floating IP addresses</td>
    </tr>
    <tr>
      <td>cloud_resource_quotas</td>
      <td>Returns object’s quotas</td>
    </tr>
  </tbody>
</table>

<h3 id="customization-template-customization_template">
<a class="anchor" href="#customization-template-customization_template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customization Template (customization_template)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Pxe_images</td>
      <td>Returns customization templates pxe images</td>
    </tr>
  </tbody>
</table>

<h3 id="clusters-ems_cluster">
<a class="anchor" href="#clusters-ems_cluster" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clusters (ems_cluster)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>all_resource_pools</td>
      <td>Return all of the objects Resource Pools</td>
    </tr>
    <tr>
      <td>all_vms</td>
      <td>Return all of the objects Virtual Machines</td>
    </tr>
    <tr>
      <td>default_resource_pool</td>
      <td>Return the objects default Resource Pool</td>
    </tr>
    <tr>
      <td>ems_events</td>
      <td>Returns an array of EmsEvent records associated with the object</td>
    </tr>
    <tr>
      <td>ext_management_system</td>
      <td>Return objects Management System</td>
    </tr>
    <tr>
      <td>hosts</td>
      <td>Return objects Hosts</td>
    </tr>
    <tr>
      <td>parent_folder</td>
      <td>Return objects Parent Folder</td>
    </tr>
    <tr>
      <td>register_host(host)</td>
      <td>Register Host to this Cluster</td>
    </tr>
    <tr>
      <td>resource_pools</td>
      <td>Return objects Resource Pools</td>
    </tr>
    <tr>
      <td>storages</td>
      <td>Return objects datastores</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Return objects Virtual Machines</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpCluster</span>
  <span class="c1"># Inputs: $evm.root['ems_cluster']</span>
  <span class="c1"># Description: Dump Cluster information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpCluster</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="n">cluster</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations"</span><span class="p">)</span>
    <span class="n">cluster</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns"</span><span class="p">)</span>
    <span class="n">cluster</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Cluster:&lt;</span><span class="si">#{</span><span class="n">cluster</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<h3 id="management-system-events-ems_event">
<a class="anchor" href="#management-system-events-ems_event" aria-hidden="true"><span class="octicon octicon-link"></span></a>Management System Events (ems_event)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s provider</td>
    </tr>
    <tr>
      <td>ems</td>
      <td>Shortcut to ext_management_system</td>
    </tr>
    <tr>
      <td>src_vm</td>
      <td>Source VM for the event</td>
    </tr>
    <tr>
      <td>vm</td>
      <td>VM for the event</td>
    </tr>
    <tr>
      <td>src_host</td>
      <td>Source Host for the event</td>
    </tr>
    <tr>
      <td>host</td>
      <td>Host for the event</td>
    </tr>
    <tr>
      <td>dest_vm</td>
      <td>Destination VM for the event</td>
    </tr>
    <tr>
      <td>service</td>
      <td>Service for the event</td>
    </tr>
    <tr>
      <td>dest_host</td>
      <td>Destination Host for the event</td>
    </tr>
    <tr>
      <td>refresh(*targets)</td>
      <td>Refresh the target types specified (ems, vm, host, src_vm, src_host, dest_vm, or dest_host)</td>
    </tr>
  </tbody>
</table>

<h3 id="management-system-folders-ems_folder">
<a class="anchor" href="#management-system-folders-ems_folder" aria-hidden="true"><span class="octicon octicon-link"></span></a>Management System Folders (ems_folder)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>hosts</td>
      <td>Returns hosts that are in the folder</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns VMs that are in folder</td>
    </tr>
    <tr>
      <td>register_host(host)</td>
      <td>Registers specified host to the folder</td>
    </tr>
    <tr>
      <td>folder_path(*options)</td>
      <td>Returns folders path</td>
    </tr>
  </tbody>
</table>

<h3 id="providers-ext_management_system">
<a class="anchor" href="#providers-ext_management_system" aria-hidden="true"><span class="octicon octicon-link"></span></a>Providers (ext_management_system)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>authentication_password_encrypted</td>
      <td>Returns credentials password encrypted</td>
    </tr>
    <tr>
      <td>authentication_password</td>
      <td>Returns credentials password unencrypted</td>
    </tr>
    <tr>
      <td>authentication_userid</td>
      <td>Returns credentials user id</td>
    </tr>
    <tr>
      <td>ems_clusters</td>
      <td>Returns objects clusters</td>
    </tr>
    <tr>
      <td>ems_events</td>
      <td>Returns an array of EmsEvent records associated with the object</td>
    </tr>
    <tr>
      <td>ems_folders</td>
      <td>Returns objects folders</td>
    </tr>
    <tr>
      <td>hosts</td>
      <td>Returns objects hosts</td>
    </tr>
    <tr>
      <td>refresh</td>
      <td>Refreshes relationships and power states for objects related to the object</td>
    </tr>
    <tr>
      <td>resource_pools</td>
      <td>Returns objects resource pools</td>
    </tr>
    <tr>
      <td>storages</td>
      <td>Returns objects storages</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns objects vms</td>
    </tr>
    <tr>
      <td>to_s</td>
      <td>Converts object to string</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpEMS</span>
  <span class="c1"># Inputs: $evm.root['ext_management_system']</span>
  <span class="c1"># Description: Dump EMS information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpEMS</span><span class="p">(</span><span class="n">ems</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="n">ems</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations"</span><span class="p">)</span>
    <span class="n">ems</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin EMS Folders"</span><span class="p">)</span>
    <span class="n">ems</span><span class="p">.</span><span class="nf">ems_folders</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">ef</span><span class="o">|</span> <span class="n">ef</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; EMS Folder:&lt;</span><span class="si">#{</span><span class="n">ef</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End EMS Folders"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns"</span><span class="p">)</span>
    <span class="n">ems</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - EMS:&lt;</span><span class="si">#{</span><span class="n">ems</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<h4 id="cloud-providers-ems_cloud">
<a class="anchor" href="#cloud-providers-ems_cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Providers (ems_cloud)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>availability_zones</td>
      <td>Return the provider’s availability zones</td>
    </tr>
    <tr>
      <td>cloud_networks</td>
      <td>Return the provider’s available networks</td>
    </tr>
    <tr>
      <td>cloud_tenants</td>
      <td>Return the provider’s available tenants</td>
    </tr>
    <tr>
      <td>flavors</td>
      <td>Return the provider’s hardware flavors</td>
    </tr>
    <tr>
      <td>floating_ips</td>
      <td>Return the provider’s floating IP addresses</td>
    </tr>
    <tr>
      <td>key_pairs</td>
      <td>Return the provider’s key pairs</td>
    </tr>
    <tr>
      <td>security_groups</td>
      <td>Return the provider’s security groups</td>
    </tr>
    <tr>
      <td>cloud_resource_quotas</td>
      <td>Return the provider’s resource quotas</td>
    </tr>
  </tbody>
</table>

<h3 id="firewall-rules-firewall_rule">
<a class="anchor" href="#firewall-rules-firewall_rule" aria-hidden="true"><span class="octicon octicon-link"></span></a>Firewall Rules (firewall_rule)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resource</td>
      <td>Return object’s resource</td>
    </tr>
    <tr>
      <td>source_security_group</td>
      <td>Return object’s source security group</td>
    </tr>
  </tbody>
</table>

<h3 id="flavors-flavor">
<a class="anchor" href="#flavors-flavor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Flavors (flavor)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
  </tbody>
</table>

<h3 id="floating-ips-floating_ip">
<a class="anchor" href="#floating-ips-floating_ip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Floating IPs (floating_ip)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>vm</td>
      <td>Returns object’s VMs</td>
    </tr>
    <tr>
      <td>cloud_tenant</td>
      <td>Returns object’s cloud tenant</td>
    </tr>
  </tbody>
</table>

<h3 id="guest-applications-guest_application">
<a class="anchor" href="#guest-applications-guest_application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Guest Applications (guest_application)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>vm</td>
      <td>Returns objects VM</td>
    </tr>
    <tr>
      <td>host</td>
      <td>Returns objects Host</td>
    </tr>
  </tbody>
</table>

<h3 id="guest-device-guest_device">
<a class="anchor" href="#guest-device-guest_device" aria-hidden="true"><span class="octicon octicon-link"></span></a>Guest Device (guest_device)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>hardware</td>
      <td>Returns objects hardware</td>
    </tr>
    <tr>
      <td>switch</td>
      <td>Returns objects switch</td>
    </tr>
    <tr>
      <td>lan</td>
      <td>Returns objects LAN</td>
    </tr>
    <tr>
      <td>network</td>
      <td>Returns objects network</td>
    </tr>
  </tbody>
</table>

<h3 id="hardware-hardware">
<a class="anchor" href="#hardware-hardware" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hardware (hardware)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ipaddresses</td>
      <td>Returns objects IP addresses</td>
    </tr>
    <tr>
      <td>guest_devices</td>
      <td>Returns objects guest devices</td>
    </tr>
    <tr>
      <td>storage_adapters</td>
      <td>Returns objects storage adapters</td>
    </tr>
    <tr>
      <td>nics</td>
      <td>Returns objects nics</td>
    </tr>
    <tr>
      <td>ports</td>
      <td>Returns objects ports</td>
    </tr>
    <tr>
      <td>vm</td>
      <td>Returns objects Virtual Machine</td>
    </tr>
    <tr>
      <td>host</td>
      <td>Returns objects Host</td>
    </tr>
    <tr>
      <td>mac_addresses</td>
      <td>Returns objects MAC addresses</td>
    </tr>
  </tbody>
</table>

<h3 id="hosts-host">
<a class="anchor" href="#hosts-host" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hosts (host)</h3>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>authentication_password</p></td>
<td><p>Returns credential password</p></td>
</tr>
<tr class="even">
<td><p>authentication_userid</p></td>
<td><p>Returns credential user</p></td>
</tr>
<tr class="odd">
<td><p>datacenter</p></td>
<td><p>Returns datacenter</p></td>
</tr>
<tr class="even">
<td><p>directories</p></td>
<td><p>Returns list of directories for the object</p></td>
</tr>
<tr class="odd">
<td><p>domain</p></td>
<td><p>Returns the domain portion of the hostname</p></td>
</tr>
<tr class="even">
<td><p>ems_cluster</p></td>
<td><p>Returns cluster</p></td>
</tr>
<tr class="odd">
<td><p>ems_events</p></td>
<td><p>Returns an array of EmsEvent records associated with the object</p></td>
</tr>
<tr class="even">
<td><p>ems_folder</p></td>
<td><p>Returns hosts folder on Management System</p></td>
</tr>
<tr class="odd">
<td><p>event_log_threshold?(options)</p></td>
<td>
<p>Searches event log records to determine if an event has occurred x number of times within a defined time frame. Returns true if the number of matching records found are greater or equal to the specified freq_threshold, otherwise it returns false</p>
<p>Options values:</p>
<p>:message_filter_type - Must be one of "STARTS WITH", "ENDS WITH", "INCLUDES", "REGULAR EXPRESSION"</p>
<p>:message_filter_value - &lt;string value to search for&gt;</p>
<p>:time_threshold - Options time interval to search. Example: 2.days (Search the past 2 days of event logs) Default 10.days</p>
<p>:freq_threshold - Number of occurrences to check for. Default = 2</p>
<p>:source, :event_id, :level, :name - Options filter values</p>
</td>
</tr>
<tr class="even">
<td><p>ext_management_system</p></td>
<td><p>Returns Management System</p></td>
</tr>
<tr class="odd">
<td><p>files</p></td>
<td><p>Returns list of files for the object</p></td>
</tr>
<tr class="even">
<td><p>guest_applications</p></td>
<td><p>Returns Guest Applications</p></td>
</tr>
<tr class="odd">
<td><p>hardware</p></td>
<td><p>Returns hardware</p></td>
</tr>
<tr class="even">
<td><p>lans</p></td>
<td><p>Returns LANs</p></td>
</tr>
<tr class="odd">
<td><p>operating_system</p></td>
<td><p>Returns Operating System</p></td>
</tr>
<tr class="even">
<td><p>storages</p></td>
<td><p>Returns datastores</p></td>
</tr>
<tr class="odd">
<td><p>switches</p></td>
<td><p>Returns network switches</p></td>
</tr>
<tr class="even">
<td><p>vms</p></td>
<td><p>Returns VMs.</p></td>
</tr>
<tr class="odd">
<td><p>credentials(type = :remote)</p></td>
<td>
<p>Returns credentials for a Host for the specified type as an array for username/pwd. (Default type is :remote if no type is specified.)</p>
<p>Supports 4 different types of credentials:</p>
<p>:default = Default</p>
<p>:remote = Remote Login (think SSH for ESX)</p>
<p>:ws = Web Services</p>
<p>:ipmi = IPMI</p>
<p>Example 1:</p>
<p>cred = host.credentials</p>
<p>cred ⇒ ["user", "pwd"]</p>
<p>Example 2:</p>
<p>user_str, pwd_str = host.credentials(:ipmi)</p>
<p>user_str ⇒ "user"</p>
<p>pwd_str ⇒ "pwd"</p>
</td>
</tr>
<tr class="even">
<td><p>ems_custom_keys</p></td>
<td><p>Returns Management Systems custom keys</p></td>
</tr>
<tr class="odd">
<td><p>ems_custom_get(key)</p></td>
<td><p>Gets Value for specified Management Systems custom key</p></td>
</tr>
<tr class="even">
<td><p>ems_custom_set(attribute, value)</p></td>
<td><p>Sets value for specified custom key of the Management System</p></td>
</tr>
<tr class="odd">
<td><p>custom_keys</p></td>
<td><p>Lists ManageIQ Server custom keys</p></td>
</tr>
<tr class="even">
<td><p>custom_get(key)</p></td>
<td><p>Gets value for specified ManageIQ Server custom key</p></td>
</tr>
<tr class="odd">
<td><p>custom_set(key, value)</p></td>
<td><p>Sets value for specified ManageIQ Server custom key</p></td>
</tr>
<tr class="even">
<td><p>ssh_exec(script)</p></td>
<td><p>Runs the specified script on the host</p></td>
</tr>
<tr class="odd">
<td><p>get_realtime_metric(metric, range, function)</p></td>
<td><p>Returns specified realtime metric</p></td>
</tr>
<tr class="even">
<td><p>current_memory_usage</p></td>
<td><p>Returns current memory usage</p></td>
</tr>
<tr class="odd">
<td><p>current_cpu_usage</p></td>
<td><p>Returns current cpu usage</p></td>
</tr>
<tr class="even">
<td><p>current_memory_headroom</p></td>
<td><p>Returns current memory headroom</p></td>
</tr>
<tr class="odd">
<td><p>to_s</p></td>
<td><p>Converts object to string</p></td>
</tr>
<tr class="even">
<td><p>scan</p></td>
<td><p>Performs SmartState Analysis on the object</p></td>
</tr>
</tbody>
</table>

<p>The following table lists the metric types available for the
<code class="language-plaintext highlighter-rouge">get_realtime_metric(metric, range, function)</code> method for hosts.</p>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>v_derived_storage_used</td>
      <td>Capacity - Used space in bytes</td>
    </tr>
    <tr>
      <td>v_pct_cpu_ready_delta_summation</td>
      <td>CPU - Percentage ready</td>
    </tr>
    <tr>
      <td>v_pct_cpu_wait_delta_summation</td>
      <td>CPU - Percentage wait</td>
    </tr>
    <tr>
      <td>v_pct_cpu_used_delta_summation</td>
      <td>CPU - Percentage used</td>
    </tr>
    <tr>
      <td>v_derived_host_count</td>
      <td>State - Number of hosts (Hourly Count / Daily Average)</td>
    </tr>
    <tr>
      <td>v_derived_cpu_reserved_pct</td>
      <td>CPU - Percentage available</td>
    </tr>
    <tr>
      <td>v_derived_memory_reserved_pct</td>
      <td>Memory - Percentage available</td>
    </tr>
  </tbody>
</table>

<p>The following Ruby snippet demonstrates using the
<code class="language-plaintext highlighter-rouge">get_realtime_metric(metric, range, function)</code> method using the
<code class="language-plaintext highlighter-rouge">v_pct_cpu_ready_delta_summation</code> metric.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">host</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'host'</span><span class="p">]</span>
<span class="n">cpu_rdy</span> <span class="o">=</span> <span class="n">host</span><span class="p">.</span><span class="nf">get_realtime_metric</span><span class="p">(</span><span class="ss">:v_pct_cpu_ready_delta_summation</span><span class="p">,</span> <span class="p">[</span><span class="mi">15</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">ago</span><span class="p">.</span><span class="nf">utc</span><span class="p">,</span><span class="mi">5</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">ago</span><span class="p">.</span><span class="nf">utc</span><span class="p">],</span> <span class="ss">:avg</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpHost</span>
  <span class="c1"># Inputs: $evm.root['host']</span>
  <span class="c1"># Description: Dump Host information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpHost</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
    <span class="n">host</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">object</span><span class="p">[</span><span class="s1">'host'</span><span class="p">]</span> <span class="o">||</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'host'</span><span class="p">]</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Hardware"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">hardware</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Hardware - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Hardware"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Lans"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">lans</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">lan</span><span class="o">|</span> <span class="n">lan</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Lan:&lt;</span><span class="si">#{</span><span class="n">lan</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Lans"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Switches"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">switches</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">switch</span><span class="o">|</span> <span class="n">switch</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Swtiche:&lt;</span><span class="si">#{</span><span class="n">switch</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Switches"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Operating System"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">operating_system</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Operating System - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Operating System"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Guest Applications"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">guest_applications</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">guest_app</span><span class="o">|</span> <span class="n">guest_app</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Guest Application:&lt;</span><span class="si">#{</span><span class="n">guest_app</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Guest Applications"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns"</span><span class="p">)</span>
    <span class="n">host</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">).</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Host:&lt;</span><span class="si">#{</span><span class="n">host</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<h4 id="hosts-vmware-esx-host_vmware_esx">
<a class="anchor" href="#hosts-vmware-esx-host_vmware_esx" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hosts: Vmware ESX (host_vmware_esx)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>disable_vmotion(device = nil)</td>
      <td>Disable vMotion</td>
    </tr>
    <tr>
      <td>enable_vmotion(device = nil)</td>
      <td>Enable vMotion</td>
    </tr>
    <tr>
      <td>enter_maintenance_mode(timeout = 0, evacuate = false)</td>
      <td>Put Host in Maintenance Mode</td>
    </tr>
    <tr>
      <td>exit_maintenance_mode(timeout = 0)</td>
      <td>Leave Maintenance Mode</td>
    </tr>
    <tr>
      <td>in_maintenance_mode?</td>
      <td>Check to see if the host is in Maintenance Mode</td>
    </tr>
    <tr>
      <td>power_down_to_standby(timeout = 0, evacuate = false)</td>
      <td>Put Host in standby</td>
    </tr>
    <tr>
      <td>power_up_from_standby(timeout = 0)</td>
      <td>Take Host out of standby</td>
    </tr>
    <tr>
      <td>reboot(force = false)</td>
      <td>Reboot Host</td>
    </tr>
    <tr>
      <td>shutdown(force = false)</td>
      <td>Shutdown Host</td>
    </tr>
    <tr>
      <td>vmotion_enabled?(device = nil)</td>
      <td>Check to see if vMotion is enabled</td>
    </tr>
  </tbody>
</table>

<h3 id="lan-lan">
<a class="anchor" href="#lan-lan" aria-hidden="true"><span class="octicon octicon-link"></span></a>LAN (lan)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>switch</td>
      <td>Returns objects switch</td>
    </tr>
    <tr>
      <td>guest_devices</td>
      <td>Returns objects guest devices</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns objects Virtual Machines</td>
    </tr>
    <tr>
      <td>templates</td>
      <td>Returns objects templates</td>
    </tr>
    <tr>
      <td>hosts</td>
      <td>Returns objects Hosts</td>
    </tr>
  </tbody>
</table>

<h3 id="groups-miq_group">
<a class="anchor" href="#groups-miq_group" aria-hidden="true"><span class="octicon octicon-link"></span></a>Groups (miq_group)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>users</td>
      <td>Returns users in the current miq_group</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns Virtual Machines that this group owns</td>
    </tr>
    <tr>
      <td>custom_keys</td>
      <td>Returns all custom keys for the group</td>
    </tr>
    <tr>
      <td>custom_get(key)</td>
      <td>Returns the value of the specified custom key for the group</td>
    </tr>
    <tr>
      <td>custom_set(key, value)</td>
      <td>Sets the value for the specified key</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpGroup</span>
  <span class="c1"># Inputs: $evm.root['user'].miq_group</span>
  <span class="c1"># Description: Dump User's Group information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpGroup</span>
    <span class="n">user</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span>
    <span class="k">unless</span> <span class="n">user</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="n">miq_group</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">miq_group</span>
      <span class="k">unless</span> <span class="n">miq_group</span><span class="p">.</span><span class="nf">nil?</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Begin Attributes [miq_group.attributes]"</span><span class="p">)</span>
        <span class="n">miq_group</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span> <span class="k">unless</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'user'</span><span class="p">].</span><span class="nf">miq_group</span><span class="p">.</span><span class="nf">nil?</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; End Attributes [miq_group.attributes]"</span><span class="p">)</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>

        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Begin Associations [miq_group.associations]"</span><span class="p">)</span>
        <span class="n">miq_group</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; End Associations [miq_group.associations]"</span><span class="p">)</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns [miq_group.virtual_column_names]"</span><span class="p">)</span>
        <span class="n">miq_group</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">).</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Group:&lt;</span><span class="si">#{</span><span class="n">miq_group</span><span class="p">.</span><span class="nf">description</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns [miq_group.virtual_column_names]"</span><span class="p">)</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre></div></div>

<h3 id="request-miq_request">
<a class="anchor" href="#request-miq_request" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request (miq_request)</h3>

<p>Request objects are submitted to ManageIQ Server for processing.
After the request phase, the request becomes a task object. The table
below shows the relationship between a request object and a task object.</p>

<table>
  <thead>
    <tr>
      <th>Request Object</th>
      <th>Task Object</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>automation_request</td>
      <td>automation_task</td>
    </tr>
    <tr>
      <td>miq_host_provision_request</td>
      <td>miq_host_provision</td>
    </tr>
    <tr>
      <td>miq_provision_request</td>
      <td>miq_provision</td>
    </tr>
    <tr>
      <td>vm_reconfigure_request</td>
      <td>vm_reconfigure_task</td>
    </tr>
    <tr>
      <td>service_template_provision_request</td>
      <td>service_template_provision_task</td>
    </tr>
    <tr>
      <td>vm_migrate_request</td>
      <td>vm_migrate_task</td>
    </tr>
  </tbody>
</table>

<p>If you set something on the request object, it will be inherited by the
task instance that does the work. This may be useful if you are
provisioning multiple virtual machines at a time and need to modify the
same setting for all. Otherwise, the item can be modified on the
individual task.</p>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>add_tag(category, tag_name)</p></td>
<td>
<p>Add a tag to a provision instance by specifying the category and tag name</p>
<p>Example: miq_provision.add_tag(:location, "CHI")</p>
</td>
</tr>
<tr class="even">
<td><p>approve(approver,reason for approval)</p></td>
<td>
<p>Approves the miq_request.</p>
<p>Example: $evm.root["miq_request"].approve("admin", "Auto-Approved")</p>
</td>
</tr>
<tr class="odd">
<td><p>approvers</p></td>
<td><p>Returns request approvers.</p></td>
</tr>
<tr class="even">
<td><p>authorized?</p></td>
<td><p>Returns true if authorized, false if not.</p></td>
</tr>
<tr class="odd">
<td><p>clear_tag(category=nil, tag_name=nil)</p></td>
<td>
<p>Without any parameters, the clear_tag method will clear all tags from the provision request. Providing a category will clear all tags selected in that category. Clear a specific category/tag by providing it.</p>
<p>Example: miq_provision.clear_tag(:location, "CHI")</p>
</td>
</tr>
<tr class="even">
<td><p>deny</p></td>
<td>
<p>Denies the miq_request</p>
<p>Example:</p>
<p># Deny the request</p>
<p>$evm.log('info',"Request denied because of Quota")</p>
<p>$evm.root["miq_request"].deny("admin", "Quota Exceeded")</p>
</td>
</tr>
<tr class="odd">
<td><p>get_classification(category)</p></td>
<td>
<p>Works the same as get_tag(category) but the returned data is a hash with :name and :description</p>
<p>Example:</p>
<p>request.get_classification(:department)</p>
<p>Returns: [{:name⇒"accounting", :description⇒"Accounting"}, {:name⇒"engineering", :description⇒"Engineering"}]</p>
</td>
</tr>
<tr class="even">
<td><p>get_classifications</p></td>
<td>
<p>Works the same as get_tag but the returned tag data is a hash with :name and :description</p>
<p>Example:</p>
<p>request.get_classifications</p>
<p>Returns: {:cc⇒{:name⇒"001", :description⇒"Cost Center 001"}, :department⇒[{:name⇒"accounting", :description⇒"Accounting"}, {:name⇒"engineering", :description⇒"Engineering"}]}</p>
</td>
</tr>
<tr class="odd">
<td><p>get_option(key)</p></td>
<td>
<p>Returns a value from the options hash based on the name of the key name passed in. Internally many of the values are stored as an array of items. (For example, a target host would be stored as the index to the host object in the db and the display name.) Calling this method will return the first item if it is an array. For non-array values the item is returned unmodified.</p>
<p>Example: miq_provision_request.get_option(:number_of_cpus)</p>
</td>
</tr>
<tr class="even">
<td><p>get_tag(category)</p></td>
<td>
<p>Returns the tags selected for the specified tag category.</p>
<p>Example: request.get_tag(:department)</p>
<p>Returns: ["accounting", "engineering"]</p>
</td>
</tr>
<tr class="odd">
<td><p>get_tags</p></td>
<td>
<p>Get all selected tags stored in a hash by category. If more than one tag is selected in a category, the hash will contain an array of tag names. Otherwise it will contain the tag name as a string.</p>
<p>Example: request.get_tags</p>
<p>Returns: {:cc⇒"001", :department⇒["accounting", "engineering"]}</p>
</td>
</tr>
<tr class="even">
<td><p>miq_request</p></td>
<td><p>(Legacy support) Internal Note: The miq_request instance use to be a separate instance from the specific request instance (like miq_provision_request). When the classes were refactored into 1 this method was added to allow existing code and automate methods to continue to run unchanged.)</p></td>
</tr>
<tr class="odd">
<td><p>miq_request_tasks</p></td>
<td><p>Returns the requests tasks</p></td>
</tr>
<tr class="even">
<td><p>options</p></td>
<td><p>Returns a hash containing all the options set for the current provision object</p></td>
</tr>
<tr class="odd">
<td><p>pending</p></td>
<td>
<p>Puts the object in a pending state for approval</p>
<p>Example:</p>
<p># Raise automation event: request_pending</p>
<p>$evm.root["miq_request"].pending</p>
</td>
</tr>
<tr class="even">
<td><p>reason</p></td>
<td><p>Returns reason for approval or denial of request</p></td>
</tr>
<tr class="odd">
<td><p>requester</p></td>
<td><p>Returns the requester</p></td>
</tr>
<tr class="even">
<td><p>resource</p></td>
<td><p>Returns the resource for the request</p></td>
</tr>
<tr class="odd">
<td><p>set_message(value)</p></td>
<td><p>Sets the message for the request</p></td>
</tr>
<tr class="even">
<td><p>set_option(key, value)</p></td>
<td><p>Sets the specified key/value pair for the object</p></td>
</tr>
</tbody>
</table>

<h4 id="automation-request-automation_request">
<a class="anchor" href="#automation-request-automation_request" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automation Request (automation_request)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>automation_tasks</td>
      <td>Returns objects automate tasks</td>
    </tr>
  </tbody>
</table>

<h4 id="host-provision-request-miq_host_provision_request">
<a class="anchor" href="#host-provision-request-miq_host_provision_request" aria-hidden="true"><span class="octicon octicon-link"></span></a>Host Provision Request (miq_host_provision_request)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>miq_host_provisions</td>
      <td>Returns the miq_host_provisions objects</td>
    </tr>
    <tr>
      <td>ci_type</td>
      <td>Returns the cloud infrastructure type: host</td>
    </tr>
  </tbody>
</table>

<h4 id="vm-provision-request-miq_provision_request">
<a class="anchor" href="#vm-provision-request-miq_provision_request" aria-hidden="true"><span class="octicon octicon-link"></span></a>VM Provision Request (miq_provision_request)</h4>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>check_quota(quota_type, options={})</p></td>
<td><p>Returns the quota information for the specified type</p></td>
</tr>
<tr class="even">
<td><p>ci_type</p></td>
<td><p>Returns the cloud infrastructure type: vm</p></td>
</tr>
<tr class="odd">
<td><p>eligible_clusters</p></td>
<td><p>Returns an array of available Cluster objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_customization_templates</p></td>
<td><p>Returns an array of available Customization Templates filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_folders</p></td>
<td><p>Returns an array of available Folder objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_hosts</p></td>
<td><p>Returns an array of available Host objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_iso_images</p></td>
<td><p>Returns an array of available ISO image objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_pxe_images</p></td>
<td><p>Returns an array of available PXE Image objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_pxe_servers</p></td>
<td><p>Returns an array of available PXE Server objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_resource_pools</p></td>
<td><p>Returns an array of available Resource Pool objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_resources(rsc_type)</p></td>
<td><p>Returns eligible resources given the type specified</p></td>
</tr>
<tr class="even">
<td><p>eligible_storages</p></td>
<td><p>Returns an array of available Storage (Datastore) objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_windows_images</p></td>
<td><p>Returns an array of available Windows Image objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>get_folder_paths</p></td>
<td><p>Returns a hash where the key is an index and the value is the fully-qualified path name of the folder. (Sample: {7 ⇒ Dev/Dept1/QA, 8 ⇒ Test/Dept2/QA}) This format is useful when a fully-qualified path is required to match the folder name. For example, if you had multiple QA folders under different departments in the sample above. To find the proper QA folder you need to evaluate the entire folder path.</p></td>
</tr>
<tr class="odd">
<td><p>get_retirement_days</p></td>
<td><p>Returns the number of dates until retirement</p></td>
</tr>
<tr class="even">
<td><p>miq_provision</p></td>
<td><p>Returns the task.</p></td>
</tr>
<tr class="odd">
<td><p>miq_request</p></td>
<td><p>Returns the miq_provision_requests miq_request object</p></td>
</tr>
<tr class="even">
<td><p>set_cluster(rsc)</p></td>
<td><p>Set the cluster to use based on object returned from eligible_clusters</p></td>
</tr>
<tr class="odd">
<td><p>set_customization_template(rsc)</p></td>
<td><p>Set the customization_template to use based on object returned from eligible_customization_templates</p></td>
</tr>
<tr class="even">
<td><p>set_folder(folder_path)</p></td>
<td>
<p>Set the folder to use based on object returned from eligible_folders. In addition, set_folder accepts the following folder types:</p>
<p>Folder Paths - separated by forward slashes. (Must include Data-center name.) Example: Prod/Discovered virtual machine where Prod is the Data-center name and Discovered virtual machine is the folder name.</p>
<p>Object returned from the get_folder_paths method</p>
</td>
</tr>
<tr class="odd">
<td><p>set_host(rsc)</p></td>
<td><p>Set the host to use based on object returned from eligible_hosts</p></td>
</tr>
<tr class="even">
<td><p>set_network_adapter(idx, nic_hash, value=nil)</p></td>
<td>
<p>Modifies the network card attached to the VM container</p>
<p>Available settings:</p>
<p>:is_dvs true / false (Default: false)</p>
<p>:network (Network Name)</p>
<p>:mac_address</p>
<p>:devicetype (Default: VirtualPCNet32) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html</a></p>
<p>:connectable ⇒ {:allowguestcontrol ⇒ true / false} (Default: true)</p>
<p>:connectable ⇒ {:startconnected ⇒ true / false} (Default: true)</p>
<p>:connectable ⇒ {:connected ⇒ true / false} (Default: true)</p>
<p>Example: prov.set_network_adapter(1, {:network ⇒ dvs_net1, :is_dvs ⇒ true} )</p>
</td>
</tr>
<tr class="odd">
<td><p>set_network_address_mode(mode)</p></td>
<td><p>Sets IP address type. Available modes are dhcp and static</p></td>
</tr>
<tr class="even">
<td><p>set_nic_settings(idx, nic_hash, value=nil)</p></td>
<td>
<p>Modifies the network interface settings at the operating system level</p>
<p>Available settings:</p>
<p>:addr_mode "dhcp" / "static" (Default: static)</p>
<p>:ip_addr</p>
<p>:subnet_mask</p>
<p>:gateway</p>
<p>:dns_domain</p>
<p>:dns_servers (Windows Only) Comma separated values</p>
<p>:sysprep_netbios_mode (Windows Only) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html</a></p>
<p>:wins_servers Passed as a string specifying the Primary and Secondary WINS servers separated by a comma. "&lt;PrimaryWINS&gt;, &lt;SecondaryWINS&gt;"</p>
<p>Example: prov.set_nic_settings(1, {:ip_addr⇒10.226.133.55, :subnet_mask⇒'255.255.255.192', :gateway⇒'10.226.133.5', :addr_mode⇒["static", "Static"] } )</p>
</td>
</tr>
<tr class="odd">
<td><p>set_iso_image(rsc)</p></td>
<td><p>Set the iso_image to use based on object returned from eligible_iso_images</p></td>
</tr>
<tr class="even">
<td><p>set_pxe_image(rsc)</p></td>
<td><p>Set the pxe_image to use based on object returned from eligible_pxe_images</p></td>
</tr>
<tr class="odd">
<td><p>set_pxe_server(rsc)</p></td>
<td><p>Set the pxe_server to use based on object returned from eligible_pxe_servers</p></td>
</tr>
<tr class="even">
<td><p>set_resource_pool(rsc)</p></td>
<td><p>Set the resource_pool to use based on object returned from eligible_resource_pools</p></td>
</tr>
<tr class="odd">
<td><p>set_resource(rsc)</p></td>
<td><p>Sets the resource for the request. (Helper method, should not be called directly)</p></td>
</tr>
<tr class="even">
<td><p>set_retirement_days</p></td>
<td><p>Set the number of days until retirement.</p></td>
</tr>
<tr class="odd">
<td><p>set_storage(rsc)</p></td>
<td><p>Set the Datastore (storage object) to use based on object returned from eligible_storages</p></td>
</tr>
<tr class="even">
<td><p>set_vm_notes(note)</p></td>
<td><p>Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr class="odd">
<td><p>set_windows_image(rsc)</p></td>
<td><p>Set the windows_image to use based on object returned from eligible_windows_images</p></td>
</tr>
<tr class="even">
<td><p>source_type</p></td>
<td><p>Returns the provision source type. (values are 'vm' or 'template')</p></td>
</tr>
<tr class="odd">
<td><p>src_vm_id</p></td>
<td><p>Returns ID of the template being cloned</p></td>
</tr>
<tr class="even">
<td><p>target_type</p></td>
<td><p>Returns the provision target type. (values are 'vm' or 'template')</p></td>
</tr>
<tr class="odd">
<td><p>vm_template</p></td>
<td><p>Returns the requests template</p></td>
</tr>
</tbody>
</table>

<h3 id="request-task-miq_request_task">
<a class="anchor" href="#request-task-miq_request_task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Task (miq_request_task)</h3>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>add_tag(category, tag_name)</p></td>
<td>
<p>Add a tag to a provision instance by specifying the category and tag name.</p>
<p>Example: miq_provision.add_tag(:location, "CHI")</p>
</td>
</tr>
<tr class="even">
<td><p>clear_tag(category=nil, tag_name=nil)</p></td>
<td>
<p>Without any parameters, the clear_tag method will clear all tags from the provision request. Providing a category will clear all tags selected in that category. Clear a specific category/tag by providing it.</p>
<p>Example: miq_provision.clear_tag(:location, "CHI")</p>
</td>
</tr>
<tr class="odd">
<td><p>destination</p></td>
<td><p>Returns the destination object. (The resultant object from running the task. In the case of provisioning, this would be the newly created VM.)</p></td>
</tr>
<tr class="even">
<td><p>execute</p></td>
<td><p>Executes or processes the request.</p></td>
</tr>
<tr class="odd">
<td><p>finished(msg)</p></td>
<td><p>Sets the task to finished with the supplied message.</p></td>
</tr>
<tr class="even">
<td><p>get_classification(category)</p></td>
<td>
<p>Works the same as get_tag(category) but the returned data is a hash with :name and :description.</p>
<p>Example:</p>
<p>request.get_classification(:department)</p>
<p>Returns: [{:name⇒"accounting", :description⇒"Accounting"}, {:name⇒"engineering", :description⇒"Engineering"}]</p>
</td>
</tr>
<tr class="odd">
<td><p>get_classifications</p></td>
<td>
<p>Works the same as get_tag but the returned tag data is a hash with :name and :description.</p>
<p>Example:</p>
<p>request.get_classifications</p>
<p>Returns: {:cc⇒{:name⇒"001", :description⇒"Cost Center 001"}, :department⇒[{:name⇒"accounting", :description⇒"Accounting"}, {:name⇒"engineering", :description⇒"Engineering"}]}</p>
</td>
</tr>
<tr class="even">
<td><p>get_option_last(key)</p></td>
<td><p>This method is the same as get_option, except that it returns the last array value.</p></td>
</tr>
<tr class="odd">
<td><p>get_option(key)</p></td>
<td>
<p>Returns a value from the options hash based on the name of the key name passed in. Internally many of the values are stored as an array of items. (For example, a target host would be stored as the index to the host object in the db and the display name.) Calling this method will return the first item if it is an array. For non-array values the item is returned unmodified.</p>
<p>Example: miq_provision_request.get_option(:number_of_cpus)</p>
</td>
</tr>
<tr class="even">
<td><p>get_tag(category)</p></td>
<td>
<p>Returns the tags selected for the specified tag category.</p>
<p>Example: request.get_tag(:department)</p>
<p>Returns: ["accounting", "engineering"]</p>
</td>
</tr>
<tr class="odd">
<td><p>get_tags</p></td>
<td>
<p>Get all selected tags stored in a hash by category. If more than one tag is selected in a category, the hash will contain an array of tag names. Otherwise it will contain the tag name as a string.</p>
<p>Example: request.get_tag</p>
<p>Returns: {:cc⇒"001", :department⇒["accounting", "engineering"]}</p>
</td>
</tr>
<tr class="even">
<td><p>message=(msg)</p></td>
<td><p>Sets the message for the request task.</p></td>
</tr>
<tr class="odd">
<td><p>miq_request</p></td>
<td><p>Returns the miq_request for the task.</p></td>
</tr>
<tr class="even">
<td><p>miq_request_task</p></td>
<td><p>Returns the parent miq_request task.</p></td>
</tr>
<tr class="odd">
<td><p>miq_request.user_message=(msg)</p></td>
<td><p>Allows automate method to override the default request status message. As a result, you can set custom messages for the progression of the state machine and its success or failure. This message will appear as the last message for the service request.</p></td>
</tr>
<tr class="even">
<td><p>miq_request_tasks</p></td>
<td><p>Returns the children miq_request tasks.</p></td>
</tr>
<tr class="odd">
<td><p>options</p></td>
<td><p>Returns a hash containing all the options set for the current object.</p></td>
</tr>
<tr class="even">
<td><p>set_option(key, value)</p></td>
<td><p>Updates a key/value pair in the options hash for the provision object. Often the value is required to be an array.</p></td>
</tr>
<tr class="odd">
<td><p>source</p></td>
<td><p>Returns the source object. (The source, or input, object that the task runs against. In the case of provisioning, this would be the VM or template selected to be provisioned.)</p></td>
</tr>
</tbody>
</table>

<h4 id="automation-task-automation_task">
<a class="anchor" href="#automation-task-automation_task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automation Task (automation_task)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>automation_request</td>
      <td>Returns associated automation_request object</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Returns status of the task</td>
    </tr>
  </tbody>
</table>

<h4 id="host-provision-task-miq_host_provision">
<a class="anchor" href="#host-provision-task-miq_host_provision" aria-hidden="true"><span class="octicon octicon-link"></span></a>Host Provision Task (miq_host_provision)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>host</td>
      <td>Returns objects host</td>
    </tr>
    <tr>
      <td>miq_host_provision_request</td>
      <td>Returns the request that created the task</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Returns status of host provision</td>
    </tr>
  </tbody>
</table>

<h4 id="vm-provision-task-miq_provision">
<a class="anchor" href="#vm-provision-task-miq_provision" aria-hidden="true"><span class="octicon octicon-link"></span></a>VM Provision Task (miq_provision)</h4>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>check_quota(quota_type, options={})</p></td>
<td><p>Returns the quota information for the specified type</p></td>
</tr>
<tr class="even">
<td><p>eligible_clusters</p></td>
<td><p>Returns an array of available Cluster objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_customization_templates</p></td>
<td><p>Returns an array of available Customization Templates</p></td>
</tr>
<tr class="even">
<td><p>eligible_folders</p></td>
<td><p>Returns an array of available Folder objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_hosts</p></td>
<td><p>Returns an array of available Host objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_iso_images</p></td>
<td><p>Returns an array of available ISO Image objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_pxe_images</p></td>
<td><p>Returns an array of available PXE Image objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_pxe_servers</p></td>
<td><p>Returns an array of available PXE Servers filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>eligible_resource_pools</p></td>
<td><p>Returns an array of available Resource Pool objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_resources(rsc_type)</p></td>
<td><p>Returns the eligible resources for the resource type specified</p></td>
</tr>
<tr class="odd">
<td><p>eligible_storages</p></td>
<td><p>Returns an array of available Storage (Datastore) objects filtered by previously selected resources</p></td>
</tr>
<tr class="even">
<td><p>eligible_windows_images</p></td>
<td><p>Returns an array of available Windows Image objects filtered by previously selected resources</p></td>
</tr>
<tr class="odd">
<td><p>get_domain_details</p></td>
<td><p>Returns domain information</p></td>
</tr>
<tr class="even">
<td><p>get_domain_name</p></td>
<td><p>Returns domain name</p></td>
</tr>
<tr class="odd">
<td><p>get_folder_paths</p></td>
<td><p>Returns a hash where the key is an index and the value is the fully-qualified path name of the folder. (Sample: {7 ⇒ Dev/Dept1/QA, 8 ⇒ Test/Dept2/QA}) This format is useful when a fully-qualified path is required to match the folder name. For example, if you had multiple QA folders under different departments in the sample above. To find the proper QA folder you need to evaluate the entire folder path.</p></td>
</tr>
<tr class="even">
<td><p>get_network_details</p></td>
<td><p>Returns network information</p></td>
</tr>
<tr class="odd">
<td><p>get_network_scope</p></td>
<td><p>Returns network scope</p></td>
</tr>
<tr class="even">
<td><p>miq_provision_request</p></td>
<td><p>Returns the provision request object</p></td>
</tr>
<tr class="odd">
<td><p>set_cluster(rsc)</p></td>
<td><p>Set the cluster to use based on object returned from eligible_clusters</p></td>
</tr>
<tr class="even">
<td><p>set_customization_spec(name=nil, override=false)</p></td>
<td><p>Sets the name of the custom spec to use as defined by its name in Virtual Center (Note: This is not supported when being passed by VMware.)</p></td>
</tr>
<tr class="odd">
<td><p>set_customization_template(rsc)</p></td>
<td><p>Set the customization_template to use based on object returned from eligible_customization_templates</p></td>
</tr>
<tr class="even">
<td><p>set_dvs(portgroup, switch = portgroup)</p></td>
<td>
<p>Set the name of the Distributed Virtual Switch (portgroup). An options &lt;switch&gt; name can also be passed</p>
<p>Example: miq_provision.set_dvs('default')</p>
</td>
</tr>
<tr class="odd">
<td><p>set_folder(folder_path)</p></td>
<td>
<p>Set the folder to use based on object returned from eligible_folders. In addition, set_folder accepts the following folder types:</p>
<p>Folder Paths - separated by forward slashes. (Must include Data-center name.) Example: Prod/Discovered virtual machine where Prod is the Data-center name and Discovered virtual machine is the folder name.</p>
<p>Object returned from the get_folder_paths method</p>
</td>
</tr>
<tr class="even">
<td><p>set_host(rsc)</p></td>
<td><p>Set the host to use based on object returned from eligible_hosts</p></td>
</tr>
<tr class="odd">
<td><p>set_network_adapter(idx, nic_hash, value=nil)</p></td>
<td>
<p>Modifies the network card attached to the VM container</p>
<p>Available settings:</p>
<p>:is_dvs true / false (Default: false)</p>
<p>:network (Network Name)</p>
<p>:mac_address</p>
<p>:devicetype (Default: VirtualPCNet32) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html</a></p>
<p>:connectable ⇒ {:allowguestcontrol ⇒ true / false} (Default: true)</p>
<p>:connectable ⇒ {:startconnected ⇒ true / false} (Default: true)</p>
<p>:connectable ⇒ {:connected ⇒ true / false} (Default: true)</p>
<p>Example: prov.set_network_adapter(1, {:network ⇒ dvs_net1, :is_dvs ⇒ true} )</p>
</td>
</tr>
<tr class="even">
<td><p>set_network_address_mode(mode)</p></td>
<td><p>Available modes are dhcp and static</p></td>
</tr>
<tr class="odd">
<td><p>set_nic_settings(idx, nic_hash, value=nil)</p></td>
<td>
<p>Modifies the network interface settings at the operating system level</p>
<p>Available settings:</p>
<p>:addr_mode "dhcp" / "static" (Default: Statis)</p>
<p>:ip_addr</p>
<p>:subnet_mask</p>
<p>:gateway</p>
<p>:dns_domain</p>
<p>:dns_servers (Windows Only) Comma separated values</p>
<p>:sysprep_netbios_mode (Windows Only) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html</a></p>
<p>:wins_servers Passed as a string specifying the Primary and Secondary WINS servers separated by a comma. "&lt;PrimaryWINS&gt;, &lt;SecondaryWINS&gt;"</p>
<p>Example: prov.set_nic_settings(1, {:ip_addr⇒10.226.133.55, :subnet_mask⇒'255.255.255.192', :gateway⇒'10.226.133.5', :addr_mode⇒["static", "Static"] } )</p>
</td>
</tr>
<tr class="even">
<td><p>set_iso_image(rsc)</p></td>
<td><p>Set the iso_image to use based on object returned from eligible_iso_images</p></td>
</tr>
<tr class="odd">
<td><p>set_pxe_image(rsc)</p></td>
<td><p>Set the pxe_image to use based on object returned from eligible_pxe_images</p></td>
</tr>
<tr class="even">
<td><p>set_pxe_server(rsc)</p></td>
<td><p>Set the pxe_server to use based on object returned from eligible_pxe_servers</p></td>
</tr>
<tr class="odd">
<td><p>set_resource_pool(rsc)</p></td>
<td><p>Set the resource_pool to use based on object returned from eligible_resource_pools</p></td>
</tr>
<tr class="even">
<td><p>set_storage(rsc)</p></td>
<td><p>Set the Datastore (storage object) to use based on object returned from eligible_storages</p></td>
</tr>
<tr class="odd">
<td><p>set_vlan(vlan)</p></td>
<td>
<p>Sets the name of the VLan to use</p>
<p>Example: miq_provision.set_vlan('default')</p>
</td>
</tr>
<tr class="even">
<td><p>set_vm_notes(note)</p></td>
<td><p>Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr class="odd">
<td><p>set_vm_notes(notes)</p></td>
<td><p>Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr class="even">
<td><p>set_windows_image(rsc)</p></td>
<td><p>Set the windows_image to use based on object returned from eligible_windows_images</p></td>
</tr>
<tr class="odd">
<td><p>source_type</p></td>
<td><p>Returns the provision source type. (values are 'vm' or 'template')</p></td>
</tr>
<tr class="even">
<td><p>status</p></td>
<td><p>Returns provision status</p></td>
</tr>
<tr class="odd">
<td><p>target_type</p></td>
<td><p>Returns the provision target type. (values are 'vm' or 'template')</p></td>
</tr>
<tr class="even">
<td><p>vdi_farm</p></td>
<td><p>Returns VDI Farm information</p></td>
</tr>
<tr class="odd">
<td><p>vm</p></td>
<td><p>The newly created vm</p></td>
</tr>
<tr class="even">
<td><p>vm_template</p></td>
<td><p>Returns the template selected to be provisioned</p></td>
</tr>
</tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">begin</span>
  <span class="n">miq_provision</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s2">"miq_provision"</span><span class="p">]</span> <span class="o">||</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_provision'</span><span class="p">]</span>
  <span class="n">prov</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s2">"miq_provision"</span><span class="p">]</span>
  <span class="n">user</span> <span class="o">=</span> <span class="n">prov</span><span class="p">.</span><span class="nf">miq_request</span><span class="p">.</span><span class="nf">requester</span>
  <span class="k">raise</span> <span class="s2">"User not specified"</span> <span class="k">if</span> <span class="n">user</span><span class="p">.</span><span class="nf">nil?</span>



  <span class="c1">###################################</span>
  <span class="c1"># Process Change Request Number and set VM Annotation</span>
  <span class="c1">###################################</span>
  <span class="n">intake</span> <span class="o">=</span> <span class="n">prov</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:vm_description</span><span class="p">)</span>
  <span class="n">intake</span> <span class="o">=</span> <span class="s2">"Change Request#: </span><span class="si">#{</span><span class="n">intake</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">prov</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="ss">:vm_description</span><span class="p">,</span><span class="n">intake</span><span class="p">)</span>


  <span class="c1">###################################</span>
  <span class="c1"># Set the customization spec based on the environment tag chosen in the dialog</span>
  <span class="c1">###################################</span>
  <span class="n">tags</span> <span class="o">=</span> <span class="n">prov</span><span class="p">.</span><span class="nf">get_tags</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"Tags: </span><span class="si">#{</span><span class="n">tags</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="n">env</span> <span class="o">=</span> <span class="n">tags</span><span class="p">[</span><span class="ss">:environment</span><span class="p">]</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Mapping custom spec based on Category Environment &lt;</span><span class="si">#{</span><span class="n">env</span><span class="si">}</span><span class="s2">&gt; chosen in the dialog"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">env</span><span class="p">.</span><span class="nf">eql?</span> <span class="s2">"dev"</span>
    <span class="n">customization_spec</span> <span class="o">=</span> <span class="s2">"Dev-Specification"</span>
    <span class="n">miq_provision</span><span class="p">.</span><span class="nf">set_customization_spec</span><span class="p">(</span><span class="n">customization_spec</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="k">if</span> <span class="n">env</span><span class="p">.</span><span class="nf">eql?</span> <span class="s2">"stg"</span>
    <span class="n">customization_spec</span> <span class="o">=</span> <span class="s2">"Stg-Specification"</span>
    <span class="n">miq_provision</span><span class="p">.</span><span class="nf">set_customization_spec</span><span class="p">(</span><span class="n">customization_spec</span><span class="p">)</span>
  <span class="k">end</span>


  <span class="c1">###################################</span>
  <span class="c1"># Set the VM Notes as follows:</span>
  <span class="c1">###################################</span>
  <span class="n">vm_notes</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">intake</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">vm_notes</span> <span class="o">+=</span>  <span class="s2">"</span><span class="se">\n</span><span class="s2">Owner: </span><span class="si">#{</span><span class="n">miq_provision</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:owner_first_name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">miq_provision</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:owner_last_name</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">vm_notes</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">Email: </span><span class="si">#{</span><span class="n">miq_provision</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:owner_email</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">vm_notes</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">Source Template: </span><span class="si">#{</span><span class="n">miq_provision</span><span class="p">.</span><span class="nf">vm_template</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">miq_provision</span><span class="p">.</span><span class="nf">set_vm_notes</span><span class="p">(</span><span class="n">vm_notes</span><span class="p">)</span>


  <span class="c1">###################################</span>
  <span class="c1"># Drop the VM in the targeted folder</span>
  <span class="c1"># In VC a folder must exist that matches the LDAP Group</span>
  <span class="c1"># VM will be placed in the Folder</span>
  <span class="c1">###################################</span>
  <span class="k">if</span> <span class="n">prov</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:placement_folder_name</span><span class="p">).</span><span class="nf">nil?</span>
    <span class="c1">###################################</span>
    <span class="c1"># If you want to use a Default folder, set folder = below to the default</span>
    <span class="c1">###################################</span>
    <span class="c1">#    folder = "22F DC/LAB FARM/GSE/Intel/Infrastructure/ManageIQ/SelfServiceVMs"</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="s2">"DC1/Infrastructure/ManageIQ/SelfService"</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Placing VM in VC folder: &lt;</span><span class="si">#{</span><span class="n">folder</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Set_folder called with [</span><span class="si">#{</span><span class="n">folder</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>

    <span class="n">miq_provision</span><span class="p">.</span><span class="nf">set_folder</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
  <span class="k">end</span>


  <span class="c1">####################################################</span>
  <span class="c1"># Set the IP Address based on the :mac_address entered in the dialog</span>
  <span class="c1">#</span>
  <span class="c1">####################################################</span>
  <span class="n">ipaddr</span> <span class="o">=</span> <span class="n">prov</span><span class="p">.</span><span class="nf">get_option</span><span class="p">(</span><span class="ss">:mac_address</span><span class="p">)</span>

  <span class="k">if</span> <span class="o">!</span> <span class="n">ipaddr</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="c1"># Set provisioning options to override options</span>
    <span class="n">prov</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="ss">:sysprep_spec_override</span><span class="p">,</span> <span class="p">[</span><span class="kp">true</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">prov</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="ss">:addr_mode</span><span class="p">,</span> <span class="p">[</span><span class="s2">"static"</span><span class="p">,</span> <span class="s2">"Static"</span><span class="p">])</span>
    <span class="n">prov</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="ss">:ip_addr</span><span class="p">,</span> <span class="n">ipaddr</span><span class="p">)</span>
    <span class="c1"># Reset :mac_address to nil</span>
    <span class="n">prov</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="ss">:mac_address</span><span class="p">,</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Provision Options: </span><span class="si">#{</span><span class="n">prov</span><span class="p">.</span><span class="nf">options</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

  <span class="nb">exit</span> <span class="no">MIQ_OK</span>

<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">err</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Set_folder err [</span><span class="si">#{</span><span class="n">err</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="si">#{</span><span class="n">err</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<h5 id="adding-disks-to-openstack-instance-provisioning">
<a class="anchor" href="#adding-disks-to-openstack-instance-provisioning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Disks to OpenStack Instance Provisioning</h5>

<p>Using the clone_options, construct the keys and values required to
define new disks as well as override or set other keys if needed.</p>

<p>Include the following settings with prov.set_options to set one or
multiple volumes to attach. Note that each hash requires the :volume_id
and :device_name keys.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>clone_options = {
  :block_device_mapping =&gt; [
    {:volume_id =&gt; "d4xxxx92-5xx0-4xx9-bxx4-f1xxxxxxxx19", :device_name =&gt; "/dev/sdb"},
    {:volume_id =&gt; "e7xxxxf5-dxxd-4xx0-8xx3-a2xxxxxxxx12", :device_name =&gt; "/dev/sdc"},
  ]
}

prov = $evm.root["miq_provision"]
prov.set_option(:clone_options, clone_options)
</code></pre></div></div>

<h5 id="booting-openstack-instances-from-volume">
<a class="anchor" href="#booting-openstack-instances-from-volume" aria-hidden="true"><span class="octicon octicon-link"></span></a>Booting OpenStack Instances from Volume</h5>

<p>You can boot instances created in Red Hat Enterprise Linux OpenStack
Platform from a specified volume from an existing selection of block
volumes. You can enable automate to pass the required parameters to
OpenStack to use volumes as booting devices on an instance.</p>

<p>Include the following settings in the prov.set_option for provisioning
instances created in OpenStack.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prov.set_option(
  :clone_options, {
    :image_ref =&gt; nil,
    :block_device_mapping_v2 =&gt; [{
      :boot_index =&gt; 0,
      :uuid =&gt; "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx",
      :device_name =&gt; "vda",
      :source_type =&gt; "volume",
      :destination_type =&gt; "volume",
      :delete_on_termination =&gt; false
    }]
  }
)
</code></pre></div></div>

<p>You can allow passing “block_device_mapping_v2” in the clone options
and remove keys from clone_options by setting value to nil.</p>

<h5 id="vm-provisioning-for-clouds-task-miq_provision_cloud">
<a class="anchor" href="#vm-provisioning-for-clouds-task-miq_provision_cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>VM Provisioning for Clouds Task (miq_provision_cloud)</h5>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>availability_zones</td>
      <td>Returns object’s availability zones</td>
    </tr>
    <tr>
      <td>instance_types</td>
      <td>Returns object’s instance types</td>
    </tr>
    <tr>
      <td>security_groups</td>
      <td>Returns object’s security groups</td>
    </tr>
    <tr>
      <td>floating_ip_addresses</td>
      <td>Returns object’s floating IP addresses</td>
    </tr>
    <tr>
      <td>cloud_networks</td>
      <td>Returns object’s cloud network</td>
    </tr>
    <tr>
      <td>cloud_subnets</td>
      <td>Returns object’s cloud subnet</td>
    </tr>
    <tr>
      <td>guest_access_key_pairs</td>
      <td>Returns object’s guest key pair</td>
    </tr>
    <tr>
      <td>cloud_tenants</td>
      <td>Returns object’s cloud tenant</td>
    </tr>
  </tbody>
</table>

<h4 id="service-template-provision-task-service_template_provision_task">
<a class="anchor" href="#service-template-provision-task-service_template_provision_task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service Template Provision Task (service_template_provision_task)</h4>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>dialog_options</p></td>
<td><p>Returns objects dialog options hash</p></td>
</tr>
<tr class="even">
<td><p>dialog_parser</p></td>
<td><p>Provides consolidated and configurable dialog parsing</p></td>
</tr>
<tr class="odd">
<td><p>get_dialog_option(key)</p></td>
<td><p>Returns objects dialog value for the specified key</p></td>
</tr>
<tr class="even">
<td><p>service_resource</p></td>
<td><p>Returns the service resource for the task</p></td>
</tr>
<tr class="odd">
<td><p>set_dialog_option(key, value)</p></td>
<td>
<p>Sets a dialog option</p>
<p>Example:</p>
<p>set_dialog_option('memory',memory_size)</p>
</td>
</tr>
<tr class="even">
<td><p>status</p></td>
<td><p>Returns the tasks status</p></td>
</tr>
</tbody>
</table>

<h4 id="service-reconfiguration-task-service_reconfigure_task">
<a class="anchor" href="#service-reconfiguration-task-service_reconfigure_task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service Reconfiguration Task (service_reconfigure_task)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dialog_options</td>
      <td>Show all dialog options for object</td>
    </tr>
    <tr>
      <td>get_dialog_option(key)</td>
      <td>Show a dialog option based stored in key</td>
    </tr>
    <tr>
      <td>set_dialog_option(key, value)</td>
      <td>Set value as a dialog option in key</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Returns status of the task</td>
    </tr>
    <tr>
      <td>finished(msg)</td>
      <td>Sets the task to finished with the supplied message</td>
    </tr>
  </tbody>
</table>

<h4 id="vm-migrate-task-vm_migrate_task">
<a class="anchor" href="#vm-migrate-task-vm_migrate_task" aria-hidden="true"><span class="octicon octicon-link"></span></a>VM Migrate Task (vm_migrate_task)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>status</td>
      <td>Returns status of the migration task</td>
    </tr>
  </tbody>
</table>

<h3 id="proxies-miq_proxy">
<a class="anchor" href="#proxies-miq_proxy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Proxies (miq_proxy)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>host</td>
      <td>Returns object’s hosts</td>
    </tr>
    <tr>
      <td>powershell(script, returns = ‘string’)</td>
      <td>Submits a powershell script</td>
    </tr>
  </tbody>
</table>

<h3 id="servers-miq_server">
<a class="anchor" href="#servers-miq_server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Servers (miq_server)</h3>

<p>These methods are available to the ManageIQ Server.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>zone</td>
      <td>Returns ManageIQ Servers Zone</td>
    </tr>
    <tr>
      <td>region_number</td>
      <td>Returns ManageIQ Servers Region Number</td>
    </tr>
    <tr>
      <td>region_name</td>
      <td>Returns ManageIQ Servers Region Name</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpServer</span>
  <span class="c1"># Inputs: $evm.root['miq_server']</span>
  <span class="c1"># Description: Dump MIQ Server information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpServer</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - Server:&lt;</span><span class="si">#{</span><span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'miq_server'</span><span class="p">].</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<h3 id="network-network">
<a class="anchor" href="#network-network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Network (network)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>hardware</td>
      <td>Returns objects hardware</td>
    </tr>
    <tr>
      <td>guest_device</td>
      <td>Returns objects guest devices</td>
    </tr>
  </tbody>
</table>

<h3 id="pxe-image-pxe_image">
<a class="anchor" href="#pxe-image-pxe_image" aria-hidden="true"><span class="octicon octicon-link"></span></a>PXE Image (pxe_image)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>customization_templates</td>
      <td>Returns objects customization templates</td>
    </tr>
    <tr>
      <td>pxe_server</td>
      <td>Returns objects pxe server</td>
    </tr>
  </tbody>
</table>

<h3 id="pxe-server-pxe_server">
<a class="anchor" href="#pxe-server-pxe_server" aria-hidden="true"><span class="octicon octicon-link"></span></a>PXE Server (pxe_server)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>advertised_images</td>
      <td>Returns objects advertised images</td>
    </tr>
    <tr>
      <td>advertised_pxe_images</td>
      <td>Returns objects advertised pxe images</td>
    </tr>
    <tr>
      <td>default_pxe_image_for_windows</td>
      <td>Returns objects default pxe image for windows</td>
    </tr>
    <tr>
      <td>discovered_images</td>
      <td>Returns objects discovered images</td>
    </tr>
    <tr>
      <td>discovered_pxe_images</td>
      <td>Returns objects discovered pxe images</td>
    </tr>
    <tr>
      <td>images</td>
      <td>Returns objects images</td>
    </tr>
    <tr>
      <td>pxe_images</td>
      <td>Returns objects pxe_images</td>
    </tr>
    <tr>
      <td>windows_images</td>
      <td>Returns objects windows images</td>
    </tr>
  </tbody>
</table>

<h3 id="security-groups-security_group">
<a class="anchor" href="#security-groups-security_group" aria-hidden="true"><span class="octicon octicon-link"></span></a>Security Groups (security_group)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_system</td>
      <td>Returns object’s Management System</td>
    </tr>
    <tr>
      <td>cloud_network</td>
      <td>Returns object’s cloud network</td>
    </tr>
    <tr>
      <td>cloud_tenant</td>
      <td>Returns object’s cloud tenant</td>
    </tr>
    <tr>
      <td>firewall_rules</td>
      <td>Returns object’s firewall rules</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns object’s VMs</td>
    </tr>
  </tbody>
</table>

<h3 id="service-service">
<a class="anchor" href="#service-service" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service (service)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>custom_keys</td>
      <td>Returns custom keys</td>
    </tr>
    <tr>
      <td>custom_get(key)</td>
      <td>Gets value for specified custom key</td>
    </tr>
    <tr>
      <td>custom_set(attribute, value)</td>
      <td>Sets value for specified custom key</td>
    </tr>
    <tr>
      <td>display=(display)</td>
      <td>Set display option</td>
    </tr>
    <tr>
      <td>group=(group)</td>
      <td>Sets group that owns the service</td>
    </tr>
    <tr>
      <td>name=(new_name)</td>
      <td>Sets name of service</td>
    </tr>
    <tr>
      <td>owner=(owner)</td>
      <td>Sets owner of the service</td>
    </tr>
    <tr>
      <td>request_retire</td>
      <td>Retire Service immediately</td>
    </tr>
    <tr>
      <td>retirement_warn=(seconds)</td>
      <td>Sets when to send retirement warning</td>
    </tr>
    <tr>
      <td>retires_on=(date)</td>
      <td>Sets retirement date</td>
    </tr>
    <tr>
      <td>shutdown_guest</td>
      <td>Shuts downs guest operating system of the Service</td>
    </tr>
    <tr>
      <td>start</td>
      <td>Start the Service</td>
    </tr>
    <tr>
      <td>stop</td>
      <td>Stop the Service</td>
    </tr>
    <tr>
      <td>suspend</td>
      <td>Suspend the Service</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Show all virtual machines associated with this service</td>
    </tr>
    <tr>
      <td>direct_vms</td>
      <td>Show virtual machines directly associated with this service</td>
    </tr>
    <tr>
      <td>indirect_vms</td>
      <td>Show virtual machines associated with lower level services in the hierarchy</td>
    </tr>
    <tr>
      <td>root_service</td>
      <td>Show the top level service in the hierarchy for the target service</td>
    </tr>
    <tr>
      <td>all_service_children</td>
      <td>Show all lower level services to the target service in the hierarchy</td>
    </tr>
    <tr>
      <td>direct_service_children</td>
      <td>Show direct services associated with the target service</td>
    </tr>
    <tr>
      <td>indirect_service_children</td>
      <td>Show services associated with lower level services of the target service</td>
    </tr>
    <tr>
      <td>parent_service</td>
      <td>Show the parent service for the target service</td>
    </tr>
    <tr>
      <td>description=(new_description)</td>
      <td>Sets the service description</td>
    </tr>
    <tr>
      <td>remove_from_vmdb</td>
      <td>Delete the service from the database</td>
    </tr>
    <tr>
      <td>dialog_options</td>
      <td>Returns all dialog options</td>
    </tr>
    <tr>
      <td>get_dialog_option(key)</td>
      <td>Returns a specific dialog option specified by key</td>
    </tr>
    <tr>
      <td>set_dialog_option(key, value)</td>
      <td>Sets value of a dialog option specified by key</td>
    </tr>
  </tbody>
</table>

<h3 id="service-resource-service_resource">
<a class="anchor" href="#service-resource-service_resource" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service Resource (service_resource)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>service</td>
      <td>Returns the associated service</td>
    </tr>
    <tr>
      <td>service_template</td>
      <td>Returns the associated service template</td>
    </tr>
    <tr>
      <td>resource</td>
      <td>Returns the resource for the request</td>
    </tr>
    <tr>
      <td>source</td>
      <td>Returns the source object</td>
    </tr>
  </tbody>
</table>

<h3 id="service-template-service_template">
<a class="anchor" href="#service-template-service_template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service Template (service_template)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>group=(group)</td>
      <td>Sets group for the service template</td>
    </tr>
    <tr>
      <td>owner=(owner)</td>
      <td>Sets owner for the service template</td>
    </tr>
  </tbody>
</table>

<h3 id="snapshot-snapshot">
<a class="anchor" href="#snapshot-snapshot" aria-hidden="true"><span class="octicon octicon-link"></span></a>Snapshot (snapshot)</h3>

<p>These methods can be used on Snapshots</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>vm</td>
      <td>Returns Snapshots VM</td>
    </tr>
    <tr>
      <td>current?</td>
      <td>Checks to see if this is the current snapshot</td>
    </tr>
    <tr>
      <td>get_current_snapshot</td>
      <td>Returns the current snapshot id</td>
    </tr>
    <tr>
      <td>revert_to</td>
      <td>Reverts to specified snapshot</td>
    </tr>
    <tr>
      <td>remove</td>
      <td>Removes specified snapshot</td>
    </tr>
  </tbody>
</table>

<h3 id="datastores-storage">
<a class="anchor" href="#datastores-storage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Datastores (storage)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext_management_systems,</td>
      <td>Returns objects Management System</td>
    </tr>
    <tr>
      <td>hosts</td>
      <td>Returns objects Hosts</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns objects Virtual Machines</td>
    </tr>
    <tr>
      <td>unregistered_vms</td>
      <td>Returns objects unregistered Virtual Machines</td>
    </tr>
    <tr>
      <td>to_s</td>
      <td>Converts object to string</td>
    </tr>
    <tr>
      <td>scan</td>
      <td>Performs SmartState Analysis on the object</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpStorage</span>
  <span class="c1"># Inputs: $evm.root['storage']</span>
  <span class="c1"># Description: Dump Storage information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpStorage</span><span class="p">(</span><span class="n">storage</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes"</span><span class="p">)</span>
    <span class="n">storage</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations"</span><span class="p">)</span>
    <span class="n">storage</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns"</span><span class="p">)</span>
    <span class="n">storage</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - Storage:&lt;</span><span class="si">#{</span><span class="n">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<h3 id="switch-switch">
<a class="anchor" href="#switch-switch" aria-hidden="true"><span class="octicon octicon-link"></span></a>Switch (switch)</h3>

<p>These methods can be used on Switches.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>host</td>
      <td>Returns switch’s Host</td>
    </tr>
    <tr>
      <td>guest_devices</td>
      <td>Returns switch’s guest devices</td>
    </tr>
    <tr>
      <td>lans</td>
      <td>Returns switch’s lans</td>
    </tr>
  </tbody>
</table>

<h3 id="user-user">
<a class="anchor" href="#user-user" aria-hidden="true"><span class="octicon octicon-link"></span></a>User (user)</h3>

<p>These methods can be used on the currently logged on user.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>current_group</td>
      <td>Returns user’s assigned internal group</td>
    </tr>
    <tr>
      <td>custom_get(key)</td>
      <td>Returns the custom key value specified by “key”</td>
    </tr>
    <tr>
      <td>custom_keys</td>
      <td>Returns an array of custom keys</td>
    </tr>
    <tr>
      <td>custom_set(key,value)</td>
      <td>Sets custom value for “key” to “value”</td>
    </tr>
    <tr>
      <td>email</td>
      <td>Returns user’s email address</td>
    </tr>
    <tr>
      <td>get_ladap_attribute(name)</td>
      <td>Returns the value of the specified LDAP attribute</td>
    </tr>
    <tr>
      <td>get_ldap_atttribute_names</td>
      <td>Returns user’s LDAP attribute names</td>
    </tr>
    <tr>
      <td>ldap_group</td>
      <td>Returns user’s assigned LDAP group</td>
    </tr>
    <tr>
      <td>miq_requests</td>
      <td>Returns user’s requests</td>
    </tr>
    <tr>
      <td>name</td>
      <td>Returns user’s name</td>
    </tr>
    <tr>
      <td>userid</td>
      <td>Returns user’s userid</td>
    </tr>
    <tr>
      <td>vms</td>
      <td>Returns Virtual Machines that this user owns</td>
    </tr>
  </tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpUser</span>
  <span class="c1"># Inputs: $evm.root['user']</span>
  <span class="c1"># Description: Dump User information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpUser</span>
    <span class="n">user</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span>
    <span class="k">unless</span> <span class="n">user</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes [user.attributes]"</span><span class="p">)</span>
      <span class="n">user</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes [user.attributes]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>

      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations [user.associations]"</span><span class="p">)</span>
      <span class="n">user</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations [user.associations]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns [user.virtual_column_names]"</span><span class="p">)</span>
      <span class="n">user</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">).</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - User:&lt;</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns [user.virtual_column_names]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre></div></div>

<h3 id="virtual-machines-and-templates-vm_or_template">
<a class="anchor" href="#virtual-machines-and-templates-vm_or_template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Virtual Machines and Templates (vm_or_template)</h3>

<p>The following methods can be used on a virtual machine or template
object.</p>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>add_disk [1]</p></td>
<td>
<p>Add storage to an existing VM.</p>
<p>This method accepts as parameters: disk_name, disk_size_mb, and options to pass values for :thinProvisioned, :dependent, and :persistent.</p>
<p>Example: <code>vm.add_disk("[#{vm.storage_name}]", size_in_mb, thin_provisioned: true)</code></p>
</td>
</tr>
<tr class="even">
<td><p>changed_vm_value?</p></td>
<td><p>Checks the 2 most recent drift state captures , and answers whether the specified value changed between them</p></td>
</tr>
<tr class="odd">
<td><p>collect_running_processes</p></td>
<td><p>Collects the running processes of the object</p></td>
</tr>
<tr class="even">
<td><p>create_snapshot(name, desc = nil)</p></td>
<td><p>Create a snapshot of the object. The <strong>name</strong> parameter is not used for Red Hat Virtualization virtual machines when creating a snapshot.</p></td>
</tr>
<tr class="odd">
<td><p>custom_get(key)</p></td>
<td><p>Get the value of specified ManageIQ Server key from the object</p></td>
</tr>
<tr class="even">
<td><p>custom_keys</p></td>
<td><p>List all ManageIQ Server custom keys for the object</p></td>
</tr>
<tr class="odd">
<td><p>custom_set(key, value)</p></td>
<td><p>Set a custom ManageIQ Server key value</p></td>
</tr>
<tr class="even">
<td><p>datacenter</p></td>
<td><p>Returns objects Datacenter</p></td>
</tr>
<tr class="odd">
<td><p>direct_service</p></td>
<td><p>Show the direct service relationship of the virtual machine</p></td>
</tr>
<tr class="even">
<td><p>directories</p></td>
<td><p>Returns number of directories on the object</p></td>
</tr>
<tr class="odd">
<td><p>ems_blue_folder (this will be reworked to be more VMware-specific)</p></td>
<td><p>Returns objects blue folder from VMware. These are the folders showing in VM and Templates view in VMware</p></td>
</tr>
<tr class="even">
<td><p>ems_cluster</p></td>
<td><p>Returns objects cluster</p></td>
</tr>
<tr class="odd">
<td><p>ems_custom_get(key)</p></td>
<td><p>Gets specified key of custom Management System Attribute</p></td>
</tr>
<tr class="even">
<td><p>ems_custom_keys</p></td>
<td><p>List the custom keys defined by the Management System for the object</p></td>
</tr>
<tr class="odd">
<td><p>ems_custom_set(attribute, value)</p></td>
<td><p>Sets specified key and value of custom Management System Attribute</p></td>
</tr>
<tr class="even">
<td><p>ems_folder</p></td>
<td><p>Returns objects folder on Management System</p></td>
</tr>
<tr class="odd">
<td><p>ems_ref_string</p></td>
<td><p>Returns unique identifier the Management System uses to identify this resource. For example, in VMware a VM would return a value like: "vm-26622"</p></td>
</tr>
<tr class="even">
<td><p>event_log_threshold? (options)</p></td>
<td>
<p>Searches event log records to determine if an event has occurred x number of times within a defined time frame. Returns true if the number of matching records found are greater or equal to the specified freq_threshold, otherwise it returns false</p>
<p>Options values:</p>
<p>:message_filter_type - Must be one of "STARTS WITH", "ENDS WITH", "INCLUDES", "REGULAR EXPRESSION"</p>
<p>:message_filter_value - &lt;string value to search for&gt;</p>
<p>:time_threshold - Options time interval to search. Example: 2.days (Search the past 2 days of event logs) Default 10.days</p>
<p>:freq_threshold - Number of occurrences to check for. Default = 2</p>
<p>:source, :event_id, :level, :name - Options filter values</p>
</td>
</tr>
<tr class="odd">
<td><p>event_threshold?(options)</p></td>
<td>
<p>Checks if an event (or multiple events) have occurred X number of times in N seconds. The values below are used if no data is passed</p>
<p>event_threshold?(options = {:time_threshold ⇒ 30.minutes, :event_types ⇒ ["MigrateVM_Task_Complete"], :freq_threshold ⇒ 2})</p>
</td>
</tr>
<tr class="even">
<td><p>ext_management_system</p></td>
<td><p>Returns objects Management System</p></td>
</tr>
<tr class="odd">
<td><p>files</p></td>
<td><p>Returns number of files on the object</p></td>
</tr>
<tr class="even">
<td><p>get_realtime_metric(metric, range, function)</p></td>
<td><p>Returns specified realtime metric</p></td>
</tr>
<tr class="odd">
<td><p>group=(group)</p></td>
<td><p>Sets objects group</p></td>
</tr>
<tr class="even">
<td><p>guest_applications</p></td>
<td><p>Returns objects Guest Application list</p></td>
</tr>
<tr class="odd">
<td><p>hardware</p></td>
<td><p>Returns objects Hardware</p></td>
</tr>
<tr class="even">
<td><p>host</p></td>
<td><p>Returns objects Host</p></td>
</tr>
<tr class="odd">
<td><p>migrate(host, pool = nil, priority = "defaultPriority", state = nil)</p></td>
<td><p>Migrates the object to another host. The only required parameter is host</p></td>
</tr>
<tr class="even">
<td><p>miq_provision</p></td>
<td><p>If VM was created using ManageIQ Server provisioning, this is the miq_provision task instance that created the VM</p></td>
</tr>
<tr class="odd">
<td><p>move_into_folder(folder) [2]</p></td>
<td>
<p>Use this method to move VMware virtual machines into folders.</p>
<p>Example:</p>
<p>vm = Vm.find_by_name('&lt;vm_name&gt;')</p>
<p>folder = EmsFolder.find_by(:name ⇒ '&lt;folder_name&gt;')</p>
<p>vm.move_into_folder(folder) unless folder.nil?</p>
</td>
</tr>
<tr class="even">
<td><p>operating_system</p></td>
<td><p>Returns objects Operating System</p></td>
</tr>
<tr class="odd">
<td><p>owner</p></td>
<td><p>Return objects owner</p></td>
</tr>
<tr class="even">
<td><p>owner=(owner)</p></td>
<td><p>Sets objects owner</p></td>
</tr>
<tr class="odd">
<td><p>performances_maintains_value_for_duration?</p></td>
<td>
<p>Based on options given, checks to see if a performance threshold is maintained for a time period</p>
<p>Example: vm.performances_maintains_value_for_duration?(:column ⇒ "cpu_usage_rate_average", :operator ⇒ "=", :value ⇒ 3.51, :duration ⇒ 20.minutes)</p>
</td>
</tr>
<tr class="even">
<td><p>reboot_guest</p></td>
<td><p>Reboots the guest operating system</p></td>
</tr>
<tr class="odd">
<td><p>reconfigured_hardware_value?</p></td>
<td><p>Checks if hardware value has been reconfigured</p></td>
</tr>
<tr class="even">
<td><p>refresh</p></td>
<td><p>Refresh power states and relationships of the object</p></td>
</tr>
<tr class="odd">
<td><p>registered?</p></td>
<td><p>Is the object registered?</p></td>
</tr>
<tr class="even">
<td><p>remove_all_snapshots</p></td>
<td><p>Remove all of the objects snapshots</p></td>
</tr>
<tr class="odd">
<td><p>remove_from_disk</p></td>
<td><p>Removes the object from disk</p></td>
</tr>
<tr class="even">
<td><p>remove_from_vmdb</p></td>
<td><p>Removes the object from the VMDB</p></td>
</tr>
<tr class="odd">
<td><p>remove_snapshot(snapshot_id)</p></td>
<td><p>Remove a specific snapshot based on the snapshot_id</p></td>
</tr>
<tr class="even">
<td><p>resource_pool</p></td>
<td><p>Returns objects Resource Pool</p></td>
</tr>
<tr class="odd">
<td><p>retire_now</p></td>
<td><p>Retire the object immediately</p></td>
</tr>
<tr class="even">
<td><p>retirement_warn=(seconds)</p></td>
<td><p>Send a retirement warning</p></td>
</tr>
<tr class="odd">
<td><p>retires_on=(date)</p></td>
<td><p>Retire the object on date specified</p></td>
</tr>
<tr class="even">
<td><p>revert_to_snapshot(snapshot_id)</p></td>
<td><p>Revert to a snapshot based on the snapshot_id</p></td>
</tr>
<tr class="odd">
<td><p>scan(scan_categories = nil)</p></td>
<td><p>Perform SmartState Analysis on the object. Scan_categories is optional</p></td>
</tr>
<tr class="even">
<td><p>service</p></td>
<td><p>Show the top-level service for a virtual machine in a service hierarchy. For the immediate parent service relationship of a virtual machine, use direct_service</p></td>
</tr>
<tr class="odd">
<td><p>shutdown_guest</p></td>
<td><p>Shuts down the guest operating system of the object</p></td>
</tr>
<tr class="even">
<td><p>snapshots</p></td>
<td><p>Returns list of snapshots for the object</p></td>
</tr>
<tr class="odd">
<td><p>standby_guest</p></td>
<td><p>Puts the operating system on standby</p></td>
</tr>
<tr class="even">
<td><p>start</p></td>
<td>
<p>Starts the object</p>
<p>See Samples/PowerOn_DHOB</p>
</td>
</tr>
<tr class="odd">
<td><p>stop</p></td>
<td><p>Stops the object</p></td>
</tr>
<tr class="even">
<td><p>storage</p></td>
<td><p>Returns objects Datastore</p></td>
</tr>
<tr class="odd">
<td><p>suspend</p></td>
<td><p>Suspends the object</p></td>
</tr>
<tr class="even">
<td><p>to_s</p></td>
<td><p>Converts object to string</p></td>
</tr>
<tr class="odd">
<td><p>unlink_storage</p></td>
<td><p>Removes the reference to the VM’s Datastore</p></td>
</tr>
<tr class="even">
<td><p>unregister</p></td>
<td><p>Unregisters the object from the Management System</p></td>
</tr>
</tbody>
</table>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#########################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: dumpVM</span>
  <span class="c1"># Inputs: $evm.root['vm']</span>
  <span class="c1"># Description: Dump VM information</span>
  <span class="c1">#</span>
  <span class="c1">##########################</span>
  <span class="k">def</span> <span class="nf">dumpVM</span><span class="p">(</span><span class="n">vm</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Attributes [vm.attributes]"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Attributes - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Attributes [vm.attributes]"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Associations [vm.associations]"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Associations [vm.associations]"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Hardware Attributes [vm.hardware]"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">hardware</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Hardware - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Hardware Attributes [vm.hardware]"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Hardware Associations [vm.hardware.associations]"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">hardware</span><span class="p">.</span><span class="nf">associations</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">assc</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; hardware Associations - </span><span class="si">#{</span><span class="n">assc</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End hardware Associations [vm.hardware.associations]"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Neworks [vm.hardware.nics]"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">hardware</span><span class="p">.</span><span class="nf">nics</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">nic</span><span class="o">|</span> <span class="n">nic</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; VLAN:&lt;</span><span class="si">#{</span><span class="n">nic</span><span class="p">.</span><span class="nf">device_name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Networks [vm.hardware.nics]"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">ext_management_system</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin EMS [vm.ext_management_system]"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">ext_management_system</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">ems_k</span><span class="p">,</span> <span class="n">ems_v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; EMS:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">ext_management_system</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; </span><span class="si">#{</span><span class="n">ems_k</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">ems_v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End EMS [vm.ext_management_system]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">owner</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Owner [vm.owner]"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">owner</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Owner - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Owner [vm.owner]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">operating_system</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Operating System [vm.operating_system]"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">operating_system</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Operating System - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Operating System [vm.operating_system]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">guest_applications</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Guest Applications"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">guest_applications</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">guest_app</span><span class="o">|</span> <span class="n">guest_app</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Guest Application:&lt;</span><span class="si">#{</span><span class="n">guest_app</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span> <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">guest_applications</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Guest Applications"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">snapshots</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Snapshots"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">snapshots</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">ss</span><span class="o">|</span> <span class="n">ss</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Snapshot:&lt;</span><span class="si">#{</span><span class="n">ss</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; - </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}}</span> <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">snapshots</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Snapshots"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">unless</span> <span class="n">vm</span><span class="p">.</span><span class="nf">storage</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin VM Storage [vm.storage]"</span><span class="p">)</span>
      <span class="n">vm</span><span class="p">.</span><span class="nf">storage</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">stor_k</span><span class="p">,</span> <span class="n">stor_v</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Storage:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">storage</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; </span><span class="si">#{</span><span class="n">stor_k</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stor_v</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End VM Storage [vm.storage]"</span><span class="p">)</span>
      <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Begin Virtual Columns -----"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">virtual_column_names</span><span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">vcn</span><span class="o">|</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Virtual Columns - </span><span class="si">#{</span><span class="n">vcn</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">vcn</span><span class="p">).</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span><span class="p">)}</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@log_prefix</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; End Virtual Columns -----"</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">####################</span>
  <span class="c1">#</span>
  <span class="c1"># Method: createSnapshot</span>
  <span class="c1">#</span>
  <span class="c1">####################</span>

  <span class="k">def</span> <span class="nf">createSnapshot</span><span class="p">(</span><span class="n">vm</span><span class="p">,</span> <span class="n">snap_name</span><span class="p">,</span> <span class="n">snap_desc</span><span class="o">=</span><span class="n">snap_name</span><span class="p">)</span>
    <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Creating Snapshot:&lt;</span><span class="si">#{</span><span class="n">snap_name</span><span class="si">}</span><span class="s2">&gt; Description:&lt;</span><span class="si">#{</span><span class="n">snap_desc</span><span class="si">}</span><span class="s2">&gt;"</span><span class="p">)</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">create_snapshot</span><span class="p">(</span><span class="n">snap_name</span><span class="p">,</span> <span class="n">snap_desc</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">####################</span>
  <span class="c1"># Red Hat Virtualization Virtual Machines</span>
  <span class="c1"># Method: createSnapshot</span>
  <span class="c1">#</span>
  <span class="c1">####################</span>

    <span class="k">def</span> <span class="nf">createSnapshot</span><span class="p">(</span><span class="n">vm</span><span class="p">,</span> <span class="n">snap_desc</span><span class="o">=</span><span class="n">snap_name</span><span class="p">)</span>
        <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@method</span><span class="si">}</span><span class="s2"> - VM:&lt;</span><span class="si">#{</span><span class="n">vm</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">&gt; Creating Snapshot:&lt;</span><span class="si">#{</span><span class="n">snap_name</span><span class="si">}</span><span class="s2">&gt; Description:&lt;</span><span class="si">#{</span><span class="n">snap_desc</span><span class="si">}</span><span class="s2">&gt;"</span><span class="p">)</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">create_snapshot</span><span class="p">(</span><span class="n">snap_desc</span><span class="p">)</span>
    <span class="k">end</span>
</code></pre></div></div>

<h4 id="vms-vm">
<a class="anchor" href="#vms-vm" aria-hidden="true"><span class="octicon octicon-link"></span></a>VMs (vm)</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>add_to_service(service)</td>
      <td>Adds the VM to a service object</td>
    </tr>
    <tr>
      <td>remove_from_service</td>
      <td>Removes the VM from its parent service</td>
    </tr>
  </tbody>
</table>

<p>The following table lists the metric types available for the
<code class="language-plaintext highlighter-rouge">get_realtime_metric(metric, range, function)</code> method for virtual
machines.</p>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>v_derived_storage_used</td>
      <td>Capacity - Used space in bytes</td>
    </tr>
    <tr>
      <td>v_pct_cpu_ready_delta_summation</td>
      <td>CPU - Percentage ready</td>
    </tr>
    <tr>
      <td>v_pct_cpu_wait_delta_summation</td>
      <td>CPU - Percentage wait</td>
    </tr>
    <tr>
      <td>v_pct_cpu_used_delta_summation</td>
      <td>CPU - Percentage used</td>
    </tr>
    <tr>
      <td>v_derived_vm_count</td>
      <td>State - Peak average virtual machines (Hourly Count / Daily Average)</td>
    </tr>
    <tr>
      <td>v_derived_cpu_reserved_pct</td>
      <td>CPU - Percentage available</td>
    </tr>
    <tr>
      <td>v_derived_memory_reserved_pct</td>
      <td>Memory - Percentage available</td>
    </tr>
  </tbody>
</table>

<p>The following Ruby snippet demonstrates using the
<code class="language-plaintext highlighter-rouge">get_realtime_metric(metric, range, function)</code> method using the
<code class="language-plaintext highlighter-rouge">v_pct_cpu_ready_delta_summation</code> metric.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">host</span> <span class="o">=</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">root</span><span class="p">[</span><span class="s1">'vm'</span><span class="p">]</span>
<span class="n">cpu_rdy</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">get_realtime_metric</span><span class="p">(</span><span class="ss">:v_pct_cpu_ready_delta_summation</span><span class="p">,</span> <span class="p">[</span><span class="mi">15</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">ago</span><span class="p">.</span><span class="nf">utc</span><span class="p">,</span><span class="mi">5</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">ago</span><span class="p">.</span><span class="nf">utc</span><span class="p">],</span> <span class="ss">:avg</span><span class="p">)</span>
</code></pre></div></div>

<h5 id="vms-for-clouds-vm_cloud">
<a class="anchor" href="#vms-for-clouds-vm_cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>VMs for Clouds (vm_cloud)</h5>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>availability_zone</td>
      <td>Returns object’s availability zone</td>
    </tr>
    <tr>
      <td>flavor</td>
      <td>Returns object’s favor</td>
    </tr>
    <tr>
      <td>cloud_network</td>
      <td>Returns object’s cloud network</td>
    </tr>
    <tr>
      <td>cloud_subnet</td>
      <td>Returns object’s cloud subnet</td>
    </tr>
    <tr>
      <td>floating_ip</td>
      <td>Returns object’s floating IPs</td>
    </tr>
    <tr>
      <td>security_groups</td>
      <td>Returns object’s security groups</td>
    </tr>
    <tr>
      <td>key_pairs</td>
      <td>Returns object’s key pairs</td>
    </tr>
  </tbody>
</table>

<h3 id="windows-image-windows_image">
<a class="anchor" href="#windows-image-windows_image" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows Image (windows_image)</h3>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>customization_templates</td>
      <td>Returns the images customization templates.</td>
    </tr>
    <tr>
      <td>pxe_server</td>
      <td>Returns the images pxe server.</td>
    </tr>
  </tbody>
</table>

<h3 id="creating-categories-and-tags">
<a class="anchor" href="#creating-categories-and-tags" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating Categories and Tags</h3>

<p>These methods are invoked using $evm.execute. See after the table for
usage examples.</p>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method(parameter)</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>category_exists?</p></td>
<td>
<p>Checks to see if a tag category exists. Usually used with unless or if to then create a category that does not exist.</p>
<p>Example: $evm.execute('category_exists?', "department")</p>
</td>
</tr>
<tr class="even">
<td><p>category_create</p></td>
<td>
<p>Creates a new category, and if only one tag value from this category can be assigned to a configuration item, sets that tag value using the <code>single_value</code> option.</p>
<p>Example: $evm.execute('category_create', :name ⇒ "department", :single_value ⇒ false, :description ⇒ "Department")</p>
<p><strong>NOTE:</strong></p>
<p>The <code>category_create</code> method currently does not work as expected. The user interface shows the value provided for <code>:description</code> in the <strong>Display Name</strong> field and the value provided for <code>:example_text</code> is displayed in the <strong>Description</strong> field.</p>
</td>
</tr>
<tr class="odd">
<td><p>tag_exists?</p></td>
<td>
<p>Checks to see if a tag exists in a category.</p>
<p>Example: $evm.execute('tag_exists?', "department", "finance")</p>
</td>
</tr>
<tr class="even">
<td><p>tag_create</p></td>
<td>
<p>Creates a new tag in the specified category.</p>
<p>Example: $evm.execute('tag_create', "department", :name ⇒ "finance", :description ⇒ "Finance")</p>
</td>
</tr>
</tbody>
</table>

<h4 id="category-and-tags-methods-example">
<a class="anchor" href="#category-and-tags-methods-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Category and Tags Methods Example</h4>

<p>In this example, the VMDB is checked to see if the <strong>Department</strong>
category exists. If it does, then a message is logged. If not, the
category is created and a message is logged. Values are then added to
the category.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="vg">$evm</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s1">'category_exists?'</span><span class="p">,</span> <span class="s2">"department"</span><span class="p">)</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Classification department exists"</span><span class="p">)</span>
<span class="k">else</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Classification department doesn't exist, creating category"</span><span class="p">)</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s1">'category_create'</span><span class="p">,</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"department"</span><span class="p">,</span> <span class="ss">:single_value</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:description</span> <span class="o">=&gt;</span> <span class="s2">"Department"</span><span class="p">)</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"info"</span><span class="p">,</span> <span class="s2">"Adding new tag in Department Category"</span><span class="p">)</span>
  <span class="vg">$evm</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s1">'tag_create'</span><span class="p">,</span> <span class="s2">"department"</span><span class="p">,</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"finance"</span><span class="p">,</span> <span class="ss">:description</span> <span class="o">=&gt;</span> <span class="s2">"Finance"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="quota">
<a class="anchor" href="#quota" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quota</h3>

<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method(parameter)</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>vms_by_owner, vms_by_group, vms_by_owner_and_group</p></td>
<td>
<p>Collect stats about existing VMs by owner or in the same LDAP group as the owner in the current request.</p>
<p>Sample return object:</p>
<p>{:class_name⇒"Vm", :count⇒5, :ids⇒[22, 120, 121, 122, 117], :cpu⇒6, :memory⇒5120, :allocated_storage⇒29032972288, :used_storage⇒29032972288}</p>
</td>
</tr>
<tr class="even">
<td><p>retired_vms_by_owner, retired_vms_by_group, retired_vms_by_owner_and_group</p></td>
<td>
<p>Collect stats about retired VMs, that have not been deleted from the host, by owner or in the same LDAP group as the owner in the current request.</p>
<p>Sample return object:</p>
<p>{:class_name⇒"Vm", :count⇒5, :ids⇒[22, 120, 121, 122, 117], :cpu⇒6, :memory⇒5120, :allocated_storage⇒29032972288, :used_storage⇒29032972288}</p>
</td>
</tr>
<tr class="odd">
<td><p>provisions_by_owner, provisions_by_group</p></td>
<td>
<p>Collect stats based on provisions running on the same day as the current request (based on scheduled date or immediate) by owner or in the same LDAP group as the owner. (Results do not include Provision Requests that have not been approved.)</p>
<p>Sample return object:</p>
<p>{:class_name⇒"MiqProvisionRequest", :count⇒6, :ids⇒[115, 116, 104, 102, 105, 112], :cpu⇒6, :memory⇒1536, , :storage⇒62914560}</p>
</td>
</tr>
<tr class="even">
<td><p>requests_by_owner, requests_by_group</p></td>
<td>
<p>Collect stats based on provision requests made the same day as the request by the same owner or LDAP group as the owner in the current request, regardless of when the provision request is scheduled to run. (Results do not include Provision Requests that have been denied.)</p>
<p>Sample return object:</p>
<p>{:class_name⇒"MiqProvisionRequest", :count⇒6, :ids⇒[115, 116, 104, 102, 105, 112], :cpu⇒6, :memory⇒1536, , :storage⇒62914560}</p>
</td>
</tr>
<tr class="odd">
<td><p>active_provisions_by_owner, active_provisions_by_group, active_provisions</p></td>
<td>
<p>Collect stats based on currently active provision requests by the same owner or LDAP group as the owner in the current request.</p>
<p>Sample return object:</p>
<p>{:class_name⇒"MiqProvisionRequest", :count⇒6, :ids⇒[115, 116, 104, 102, 105, 112], :cpu⇒6, :memory⇒1536, , :storage⇒62914560}</p>
</td>
</tr>
</tbody>
</table>

<ol>
  <li>
    <p>Supported for Red Hat Virtualization and VMware virtual machines</p>
  </li>
  <li>
    <p>Supported for VMware virtual machines only</p>
  </li>
</ol>

<h1 id="terminology">
<a class="anchor" href="#terminology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Terminology</h1>

<ul>
  <li>
    <p>Account Role
A designation assigned to a user allowing or restricting a user to
parts and functions of the ManageIQ console.</p>
  </li>
  <li>
    <p>Action
An execution that is performed after a condition is evaluated.</p>
  </li>
  <li>
    <p>Alert
ManageIQ alerts notify administrators and monitoring systems
of critical configuration changes and threshold limits in the
virtual environment. The notification can take the form of either an
email or an SNMP trap.</p>
  </li>
  <li>
    <p>Analysis Profile
A customized scan of hosts, virtual machines, or instances. You can
collect information from categories, files, event logs, and registry
entries.</p>
  </li>
  <li>
    <p>Cloud
A pool of on-demand and highly available computing resources. The
usage of these resources are scaled depending on the user
requirements and metered for cost.</p>
  </li>
  <li>
    <p>ManageIQ appliance
A virtual machine on which the virtual management database (VMDB)
and ManageIQ server reside.</p>
  </li>
  <li>
    <p>ManageIQ Console
A web-based interface into the ManageIQ appliance.</p>
  </li>
  <li>
    <p>ManageIQ Role
A designation assigned to a ManageIQ server that defines what
a ManageIQ server can do.</p>
  </li>
  <li>
    <p>ManageIQ Server
The application that runs on the ManageIQ appliance and
communicates with the SmartProxy and the VMDB.</p>
  </li>
  <li>
    <p>Cluster
Hosts that are grouped together to provide high availability and
load balancing.</p>
  </li>
  <li>
    <p>Condition
A test of criteria triggered by an event.</p>
  </li>
  <li>
    <p>Discovery
Process run by the ManageIQ server which finds virtual
machine and cloud providers.</p>
  </li>
  <li>
    <p>Drift
The comparison of a virtual machine, instance, host, cluster to
itself at different points in time.</p>
  </li>
  <li>
    <p>Event
A trigger to check a condition.</p>
  </li>
  <li>
    <p>Event Monitor
Software on the ManageIQ appliance which monitors external
providers for events and sends them to the ManageIQ server.</p>
  </li>
  <li>
    <p>Host
A computer on which virtual machine monitor software is loaded.</p>
  </li>
  <li>
    <p>Instance/Cloud Instance
A on-demand virtual machine based upon a predefined image and uses a
scalable set of hardware resources such as CPU, memory, networking
interfaces.</p>
  </li>
  <li>
    <p>Managed/Registered VM
A virtual machine that is connected to a host and exists in the
VMDB. Also, a template that is connected to a provider and exists in
the VMDB. Note that templates cannot be connected to a host.</p>
  </li>
  <li>
    <p>Managed/Unregistered VM
A virtual machine or template that resides on a repository or is no
longer connected to a provider or host and exists in the VMDB. A
virtual machine that was previously considered registered may become
unregistered if the virtual machine was removed from provider
inventory.</p>
  </li>
  <li>
    <p>Provider
A computer on which software is loaded which manages multiple
virtual machines that reside on multiple hosts.</p>
  </li>
  <li>
    <p>Policy
A combination of an event, a condition, and an action used to manage
a virtual machine.</p>
  </li>
  <li>
    <p>Policy Profile
A set of policies.</p>
  </li>
  <li>
    <p>Refresh
A process run by the ManageIQ server which checks for
relationships of the provider or host to other resources, such as
storage locations, repositories, virtual machines, or instances. It
also checks the power states of those resources.</p>
  </li>
  <li>
    <p>Regions
Regions are used to create a central database for reporting and
charting. Regions are used primarily to consolidate multiple VMDBs
into one master VMDB for reporting.</p>
  </li>
  <li>
    <p>Resource
A host, provider, instance, virtual machine, repository, or
datastore.</p>
  </li>
  <li>
    <p>Resource Pool
A group of virtual machines across which CPU and memory resources
are allocated.</p>
  </li>
  <li>
    <p>Repository
A place on a datastore resource which contains virtual machines.</p>
  </li>
  <li>
    <p>SmartProxy</p>

    <ul>
      <li>
        <p>The SmartProxy is a software agent that acts on behalf of the
ManageIQ appliance to perform actions on hosts,
providers, storage and virtual machines.</p>
      </li>
      <li>
        <p>The SmartProxy can be configured to reside on the
ManageIQ appliance or on an ESX server version.</p>
      </li>
      <li>
        <p>The SmartProxy can be deployed from the ManageIQ
appliance, and provides visibility to the VMFS storage. Each
storage location must have a SmartProxy with visibility to it.
The SmartProxy acts on behalf of the ManageIQ appliance.</p>
      </li>
      <li>
        <p>If the SmartProxy is not embedded in the ManageIQ server,
it communicates with the ManageIQ appliance over HTTPS on
standard port 443.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>SmartState Analysis
Process run by the SmartProxy which collects the details of a
virtual machine or instance. Such details include accounts, drivers,
network information, hardware, and security patches. This process is
also run by the ManageIQ server on hosts and clusters. The
data is stored in the VMDB.</p>
  </li>
  <li>
    <p>SmartTags
Descriptors that allow you to create a customized, searchable index
for the resources in your clouds and infrastructure.</p>
  </li>
  <li>
    <p>Storage Location
A device, such as a VMware datastore, where digital information
resides that is connected to a resource.</p>
  </li>
  <li>
    <p>Tags
Descriptive terms defined by a ManageIQ user or the system
used to categorize a resource.</p>
  </li>
  <li>
    <p>Template
A template is a copy of a preconfigured virtual machine, designed to
capture installed software and software configurations, as well as
the hardware configuration, of the original virtual machine.</p>
  </li>
  <li>
    <p>Unmanaged Virtual Machine
Files discovered on a datastore that do not have a virtual machine
associated with them in the VMDB. These files may be registered to a
provider that the ManageIQ server does not have configuration
information on. Possible causes may be that the provider has not
been discovered or that the provider has been discovered, but no
security credentials have been provided.</p>
  </li>
  <li>
    <p>Virtual Machine
A software implementation of a system that functions similar to a
physical machine. Virtual machines utilize the hardware
infrastructure of a physical host, or a set of physical hosts, to
provide a scalable and on-demand method of system provisioning.</p>
  </li>
  <li>
    <p>Virtual Management Database (VMDB)
Database used by the ManageIQ appliance to store information
about your resources, users, and anything else required to manage
your virtual enterprise.</p>
  </li>
  <li>
    <p>Virtual Thumbnail
An icon divided into smaller areas that summarize the properties of
a resource.</p>
  </li>
  <li>
    <p>Zones
ManageIQ Infrastructure can be organized into zones to
configure failover and to isolate traffic. Zones can be created
based on your environment. Zones can be based on geographic
location, network location, or function. When first started, new
servers are put into the default zone.</p>
  </li>
</ul>



      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa theme-toggle" data-toggle-theme></i>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa fa-github"></i>
          Github
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa fa-gitter">
            <svg viewBox="45 47 78 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 40.1 (33804) - http://www.bohemiancoding.com/sketch -->
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(45.000000, 47.000000)">
        <g id="icon-gitter" transform="translate(10.000000, 0.000000)">
            <rect id="Rectangle-path" x="0" y="0.5" width="8.25" height="61"></rect>
            <rect id="Rectangle-path" x="49.75" y="14.5" width="8.25" height="47"></rect>
            <rect id="Rectangle-path" x="16.5" y="14.5" width="8.25" height="80.25"></rect>
            <rect id="Rectangle-path" x="33.25" y="14.5" width="8.25" height="80.25"></rect>
        </g>
    </g>
</svg>

          </i>
          Gitter
        </a>
      </li>
      <li>
        <a href="https://github.com/orgs/ManageIQ/discussions">
          <i class="fa fa-comments"></i>
          Forum
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2023 ManageIQ.
      </span>
      <span>
        <a href="https://www.ibm.com/opensource/" target="_blank">
          Sponsored by IBM, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://twitter.com/ManageIQ" class="social_link social_link-twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" class="social_link social_link-facebook">
            <span class="social_link-icon">
              <i class="fa fa-facebook"></i>
            </span>
          </a>
        </li>

        <!--  -->
        <li>
          <a href="https://www.linkedin.com/company/manageiq" class="social_link social_link-linkedin">
            <span class="social_link-icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" class="social_link social_link-youtube">
            <span class="social_link-icon">
              <i class="fa fa-youtube"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
