<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />
  
  <link type="text/css" rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://manageiq.org/docs/guides/i18n">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/guides/i18n">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li>
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li class="active">
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

</nav>

<div class="doc_container">
  <div class="doc_menu">
    
    

<ul class="menu menu-toplevel" id="guides_menu">

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Architecture
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/capacity_and_utilization_collection_explanation">
      Capacity And Utilization Collection Explanation
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/enterprise">
      Enterprise
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/source_code_layout">
      Source Code Layout
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Developer Setup
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/plugins">
      Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/minimal_mode">
      Minimal Mode
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/running_test_suites">
      Running Test Suites
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/debugging">
      Interactive debugging
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      External Auth
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/configuration">
      Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/installation">
      Installation
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      User Interface
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/patterns">
      UI Patterns
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/plugins">
      UI Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/register_react_component">
      Shared React Component API
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/report_data_api">
      Report Data API
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Providers
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_overview">
      Providers Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_database_architecture.html">
      Providers Database Architecture
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/amazon_aws_config">
      Amazon AWS Config
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/containers">
      Containers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openshift">
      Openshift
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openstack_infra_provider">
      Openstack Infra Provider
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/provisioning/windows_imaging">
      Windows Imaging
    </a>
    
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/coding_style_and_standards">
      Coding Style And Standards
    </a>
    
    
  </li>

  
  
  
  <li class=" active menu-open">
    
    <a href="/docs/guides/i18n">
      I18n
    </a>
    
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc dev_doc">
      

      <div class="doc-content">
        
        <h1 id="guidelines-for-internationalization">Guidelines for Internationalization</h1>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#i18n-implementation">i18n implementation</a></li>
  <li><a href="#gettext-usage">Gettext usage</a>
    <ul>
      <li><a href="#ruby--haml">Ruby / HAML</a></li>
      <li><a href="#javascript">JavaScript</a></li>
      <li><a href="#angular-applications">Angular applications</a></li>
      <li><a href="#delayed--dynamic-translations">Delayed / dynamic translations</a></li>
      <li><a href="#string-interpolation">String interpolation</a></li>
      <li><a href="#marking-gettext-strings-in-ui">Marking gettext strings in UI</a></li>
    </ul>
  </li>
  <li><a href="#translating-manageiq">Translating ManageIQ</a>
    <ul>
      <li><a href="#translator-notes">Translator notes</a></li>
    </ul>
  </li>
  <li><a href="#updating-translations-developers">Updating translations</a>
    <ul>
      <li><a href="#zanata">Zanata</a></li>
      <li><a href="#manageiq-the-main-project">ManageIQ</a></li>
      <li><a href="#manageiq-self-service-ui">ManageIQ Self Service UI</a></li>
      <li><a href="#manageiq-amazon-provider">ManageIQ Amazon Provider</a></li>
    </ul>
  </li>
  <li><a href="#internationalization-in-rails-engines-plugins">i18n in rails engines</a></li>
</ul>

<h2 id="i18n-implementation">i18n implementation</h2>

<p>ManageIQ uses <a href="https://en.wikipedia.org/wiki/Gettext">gettext</a> for internationalization.
In particular, the project uses the following gems to make internationalization work:</p>

<ul>
  <li><a href="http://ruby-gettext.github.io">gettext</a></li>
  <li><a href="https://github.com/grosser/fast_gettext">fast_gettext</a></li>
  <li><a href="https://github.com/grosser/gettext_i18n_rails">gettext_i18n_rails</a></li>
  <li><a href="https://github.com/webhippie/gettext_i18n_rails_js">gettext_i18n_rails_js</a></li>
  <li><a href="https://github.com/svenfuchs/rails-i18n">rails-i18n</a></li>
</ul>

<h2 id="gettext-usage">Gettext usage</h2>

<p>ManageIQ supports internationalization of strings in ruby and haml sources as well as JavaScript.</p>

<h3 id="ruby--haml">Ruby / HAML</h3>

<p>The following gettext routines are supported in Ruby and HAML sources:</p>

<ul>
  <li><code class="highlighter-rouge">_(msgid)</code> – translates <code class="highlighter-rouge">msgid</code> and returns the translated string
    <ul>
      <li><a href="http://www.rubydoc.info/gems/gettext/GetText#gettext-instance_method">rubydoc</a></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">N_(msgid)</code> – dynamic translation: this will put <code class="highlighter-rouge">msgid</code> in the gettext catalog but the string will not be translated by gettext at this time (see delayed translation below)
    <ul>
      <li><a href="http://www.rubydoc.info/gems/gettext/GetText#N_-instance_method">rubydoc</a></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">n(msgid, msgid_plural, n)</code> – returns either translated <code class="highlighter-rouge">msgid</code> or its translated plural form (<code class="highlighter-rouge">msgid_plural</code>) depending on <code class="highlighter-rouge">n</code>, a number determining the count (i.e. number above 1 means plural form)
    <ul>
      <li><a href="http://www.rubydoc.info/gems/gettext/GetText#ngettext-instance_method">rubydoc</a></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">s_(msgid, seperator = "|")</code> – translates <code class="highlighter-rouge">msgid</code>, but if there are no localized text, it returns a last part of <code class="highlighter-rouge">msgid</code> separated by <code class="highlighter-rouge">separator</code> (<code class="highlighter-rouge">|</code> by default)
    <ul>
      <li><a href="http://www.rubydoc.info/gems/gettext/GetText#sgettext-instance_method">rubydoc</a></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">ns_(msgid, msgid_plural, n, seperator = "|")</code> – similar to the <code class="highlighter-rouge">n_()</code>, but if there is no localized text, it returns a last part of <code class="highlighter-rouge">msgid</code> separated by <code class="highlighter-rouge">separator</code>.
    <ul>
      <li><a href="http://www.rubydoc.info/gems/gettext/GetText#ngettext-instance_method">rubydoc</a></li>
    </ul>
  </li>
</ul>

<h3 id="javascript">JavaScript</h3>

<p>Internationalization in JavaScript is done with <code class="highlighter-rouge">gettext_i18n_rails_js</code> gem. The gem extends <code class="highlighter-rouge">gettext_i18n_rails</code> making the <code class="highlighter-rouge">.po</code> files available to client side javascript as JSON files.</p>

<p>Unlike Ruby / HAML sources, JavaScript uses <code class="highlighter-rouge">__()</code> <em>(i.e. two underscores rather than one)</em> to invoke gettext. This is done to avoid conflicts with other JavaScript modules.</p>

<p>The gettext routines supported in JavaScript sources:</p>

<ul>
  <li><code class="highlighter-rouge">__(msgid)</code></li>
  <li><code class="highlighter-rouge">n_(msgid, msgid_plural, n)</code></li>
  <li><code class="highlighter-rouge">s_(msgid)</code></li>
</ul>

<p>The semantic is similar to the Ruby equivalents.</p>

<h3 id="angular-applications">Angular applications</h3>

<p>Purely Angular applications, such as Self-Service UI, use <a href="https://angular-gettext.rocketeer.be/">angular-gettext</a> for internationalization.
The <code class="highlighter-rouge">angular-gettext</code> module allows for annotating parts of the Angular application (HTML of JavaScript), which need to be translated.</p>

<p>Guides for annotating content:</p>

<ul>
  <li><a href="https://angular-gettext.rocketeer.be/dev-guide/annotate/">HTML files</a></li>
  <li><a href="https://angular-gettext.rocketeer.be/dev-guide/annotate-js/">JavaScript files</a></li>
</ul>

<p>Note, that in Self-Service UI, thanks to:</p>

<ul>
  <li><a href="https://github.com/ManageIQ/manageiq/blob/master/spa_ui/self_service/client/app/config/gettext.config.js#L20">N_ alias</a></li>
  <li><a href="https://github.com/ManageIQ/manageiq/blob/master/spa_ui/self_service/client/app/config/gettext.config.js#L21">__ alias</a></li>
</ul>

<p>we can use <code class="highlighter-rouge">N_()</code> and <code class="highlighter-rouge">__()</code> in javascript sources instead of regular <code class="highlighter-rouge">angular-gettext</code> routines (<code class="highlighter-rouge">gettext</code> and <code class="highlighter-rouge">gettextCatalog.getString</code>).</p>

<h4 id="substitute-filter">Substitute filter</h4>

<p>In certain situations, it’s not possible to correctly annotate strings for translation when these
strings are a value of an HTML element and contain a variable interpolation. For example:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">tooltip=</span><span class="s">"{{item.v_total_vms}} VMs"</span><span class="nt">&gt;</span>
</code></pre>
</div>

<p>This is where the <code class="highlighter-rouge">substitute</code> filter comes in handy. The above situation would then be resolved as:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">tooltip=</span><span class="s">"{{ '[[number]] VMs'|translate|substitute:{number: item.v_total_vms} }}"</span><span class="nt">&gt;</span>
</code></pre>
</div>

<p>i.e. <code class="highlighter-rouge">[[</code> and <code class="highlighter-rouge">]]</code> mark start and end of a variable to be substituted, the actual values would be
then substituted with the context of the <code class="highlighter-rouge">substitute</code> filter.</p>

<h4 id="caveats">Caveats</h4>

<p>There are certain aspects of using <code class="highlighter-rouge">angular-gettext</code> you should be aware of.</p>

<ul>
  <li><strong>Be careful where you put the <code class="highlighter-rouge">translate</code> directive</strong>. For example, a markup like:</li>
</ul>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"outside"</span> <span class="na">translate</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inside"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span&gt;</span>Text<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>
</div>

<p>will result in the whole</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inside"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Text<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>
</div>

<p>block being collected during string extraction by <code class="highlighter-rouge">gulp gettext-extract</code>. Correctly, the <code class="highlighter-rouge">translate</code> directive should be placed inside the <code class="highlighter-rouge">span</code> element.</p>

<ul>
  <li><strong>Don’t use dynamic content inside <code class="highlighter-rouge">__()</code></strong>. For example, the following javascript code won’t be collected correctly by <code class="highlighter-rouge">gulp gettext-extract</code>.</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">s</span> <span class="o">=</span> <span class="nx">__</span><span class="p">(</span><span class="nx">sprintf</span><span class="p">(</span><span class="s2">"My name is %s."</span><span class="p">,</span> <span class="nx">me</span><span class="p">.</span><span class="nx">name</span><span class="p">));</span>
</code></pre>
</div>

<p>The above should correctly be:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">s</span> <span class="o">=</span> <span class="nx">sprintf</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s2">"My name is %s."</span><span class="p">),</span> <span class="nx">me</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</code></pre>
</div>

<ul>
  <li><strong>Don’t apply the <code class="highlighter-rouge">translate</code> filter on a dynamic content</strong>. The string inside would not be correctly extracted during string collection. For example the following won’t be collected correctly by <code class="highlighter-rouge">gulp gettext-extract</code>.</li>
</ul>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;span&gt;</span>
{{ ((magicVariable != null) ? "It's there" : "It's not there") | translate }}
<span class="nt">&lt;/span&gt;</span>
</code></pre>
</div>

<p>The above should correctly be:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">ng=</span><span class="s">if="magicVaiable"</span> <span class="na">translate</span><span class="nt">&gt;</span>It's there<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">ng=</span><span class="s">if="!magicVariable"</span> <span class="na">translate</span><span class="nt">&gt;</span>It's not there<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/span&gt;</span>
</code></pre>
</div>

<ul>
  <li><strong>Avoid concatenating English strings.</strong> For example, a javascript code like:</li>
</ul>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="s2">"create"</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">verb</span> <span class="o">=</span> <span class="s2">"created"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">verb</span> <span class="o">=</span> <span class="s2">"updated"</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">message</span> <span class="o">=</span> <span class="nx">sprintf</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s2">"Item was %s"</span><span class="p">),</span> <span class="nx">verb</span><span class="p">);</span>
</code></pre>
</div>

<p>would contain mixed languages when shown in non-English locale.</p>

<p>Correctly, the code should read:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="s2">"create"</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">message</span> <span class="o">=</span> <span class="nx">__</span><span class="p">(</span><span class="s2">"Item was created"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">message</span> <span class="o">=</span> <span class="nx">__</span><span class="p">(</span><span class="s2">"Item was updated"</span><span class="p">);</span>
<span class="p">}</span>

</code></pre>
</div>

<h3 id="delayed--dynamic-translations">Delayed / dynamic translations</h3>

<p>Sometimes we need to delay translation of a string to a later time. For example menu items and sections or certain tree nodes are defined once but then need to be rendered many times possibly in different locales.</p>

<p>In the simplest case you can use <code class="highlighter-rouge">N_('bar')</code> saying “do not translate this string” such as:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">menu_item</span> <span class="o">=</span> <span class="no">Menu</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">N_</span><span class="p">(</span><span class="s1">'Cloud Tennants'</span><span class="p">))</span>
</code></pre>
</div>

<p>and such strings will be caught by the <code class="highlighter-rouge">rake gettext:find</code> task so these strings end up in the catalog.
Then you do the translation when needed <em>(e.g. when generating the HTML or JSON format of the data)</em> by calling <code class="highlighter-rouge">_()</code> such as:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">menu_item_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="n">menu_item</span><span class="p">.</span><span class="nf">text</span><span class="p">)</span>
</code></pre>
</div>

<p>To properly internationalize a string with interpolation that needs to be translated at render time rather than right away, use <code class="highlighter-rouge">PostponedTranslation</code> class.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">tip</span> <span class="o">=</span> <span class="no">PostponedTranslation</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span> <span class="n">_N</span><span class="p">(</span><span class="s2">"%s Alert Profiles"</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span> <span class="s2">"already translated string"</span> <span class="p">}</span>
</code></pre>
</div>

<p>and then in the place where the value is used you will have:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">translated_tip</span> <span class="o">=</span> <span class="n">tip</span><span class="p">.</span><span class="nf">kind_of?</span><span class="p">(</span><span class="no">Proc</span><span class="p">)</span> <span class="p">?</span> <span class="n">tip</span><span class="p">.</span><span class="nf">call</span> <span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="n">tip</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="string-interpolation">String interpolation</h3>

<p>Whenever you need to use string interpolation inside a gettext call, you need to follow several rules.</p>

<ul>
  <li>different languages might have different word orders so we <strong>use named placeholders</strong>:</li>
</ul>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">_</span><span class="p">(</span><span class="s2">"%{model} </span><span class="se">\"</span><span class="s2">%{name}</span><span class="se">\"</span><span class="s2"> was added"</span><span class="p">)</span> <span class="o">%</span> <span class="p">{</span><span class="ss">:model</span> <span class="o">=&gt;</span> <span class="n">ui_lookup</span><span class="p">(</span><span class="ss">:model</span><span class="o">=&gt;</span><span class="s2">"MiqReport"</span><span class="p">),</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="vi">@rpt</span><span class="p">.</span><span class="nf">name</span><span class="p">}</span>
</code></pre>
</div>

<p>These forms <strong>are not acceptable</strong>:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">_</span><span class="p">(</span><span class="s2">"%s (All %s)"</span> <span class="o">%</span> <span class="p">[</span><span class="vi">@ems_cluster</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">title_for_hosts</span><span class="p">])</span> <span class="c1"># the name of the placeholder can provide vital information to the translator</span>
<span class="n">_</span><span class="p">(</span><span class="s2">"No %s were selected to move up"</span><span class="p">)</span> <span class="o">%</span> <span class="s2">"fields"</span>          <span class="c1"># use named placeholder even in the case of a single placeholder</span>
</code></pre>
</div>

<ul>
  <li><strong>do not use variables inside gettext strings</strong> as these will not be extracted and placed in the gettext catalog</li>
</ul>

<p><strong>Incorrect</strong>:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">text</span> <span class="o">=</span> <span class="s2">"Some random text"</span>
<span class="n">_</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre>
</div>

<p><strong>Correct</strong>:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">_</span><span class="p">(</span><span class="s2">"Some random text"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="marking-gettext-strings-in-ui">Marking gettext strings in UI</h3>

<p>To be able to see strings which pass through gettext <em>(i.e. are translatable)</em>, you have to add the following to the servers advanced settings:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">ui</span><span class="pi">:</span>
  <span class="s">mark_translated_strings</span><span class="pi">:</span> <span class="s">true</span>
</code></pre>
</div>

<p>and <strong>restart</strong> the ManageIQ application. With these settings on, all strings passing through gettext will be marked with <code class="highlighter-rouge">»</code> and <code class="highlighter-rouge">«</code> markers:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>»webui text that went through some of the gettext routines«
</code></pre>
</div>

<h2 id="translating-manageiq">Translating ManageIQ</h2>

<p>To contribute with translation to ManageIQ, create an account at <a href="https://translate.zanata.org">Zanata</a>
and navigate to <a href="https://translate.zanata.org/zanata/project/view/manageiq">ManageIQ project page</a></p>

<h3 id="translator-notes">Translator notes</h3>

<ul>
  <li><strong>How do I translate keys in the form of <code class="highlighter-rouge">Hardware|Usage</code>? What do they mean?</strong>
    <ul>
      <li><code class="highlighter-rouge">Hardware|Usage</code> means Usage in namespace Hardware. This is the way we translate model attributes for ActiveRecord models for example. You do not have to translate “Hardware”, just translate “Usage”.</li>
    </ul>
  </li>
  <li><strong>What does the key <code class="highlighter-rouge">locale_name</code> mean?</strong>
    <ul>
      <li><code class="highlighter-rouge">local_name</code> meens name of the given language in the language itself. Such as “Deutsch” for German or “Česky” for Czech. Make sure to provide the value for this key, without it the language/locale cannot be presented in the UI.</li>
    </ul>
  </li>
</ul>

<h2 id="updating-translations-developers">Updating translations (developers)</h2>

<p>The general workflow for updating translations is:</p>
<ul>
  <li>extract strings from source code and create new gettext catalog.</li>
  <li>upload the new catalog into a translation tool <em>(we use Zanata)</em>.</li>
  <li>once the translations for the languages are complete, fetch the translations from the translation tool and put them into git.</li>
</ul>

<p>The instructions will differ in details depending on the specific ManageIQ project.</p>

<h3 id="zanata">Zanata</h3>

<p>We use <a href="https://translate.zanata.org">Zanata</a> for online translations. We maintain several zanata projects for the ManageIQ project:</p>
<ul>
  <li><a href="https://translate.zanata.org/project/view/manageiq?dswid=-9684">ManageIQ</a></li>
  <li><a href="https://translate.zanata.org/project/view/manageiq-ui-service?dswid=8199">ManageIQ Service UI</a></li>
  <li><a href="https://translate.zanata.org/project/view/manageiq-providers-amazon?dswid=8199">ManageIQ Amazon Provider</a></li>
</ul>

<p>To be able to use zanata from command line, make sure you have <code class="highlighter-rouge">zanata-cli</code> installed and configured (<a href="http://zanata.org/help/">documentation</a>)</p>

<p>To be able to manipulate zanata catalogs, you need to be maintainer of the project in zanata.</p>

<h3 id="manageiq-the-main-project">ManageIQ (the main project)</h3>

<p>Steps for updating translations:</p>

<ul>
  <li>Update gettext catalogs in ManageIQ git repository. This is done to make sure the gettext catalog contains up to date (i.e. current) strings for translators.
To update the catalog, run the following rake task in the root of ManageIQ git checkout:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bundle <span class="nb">exec </span>rake locale:update
</code></pre>
</div>

<p>This task will:</p>
<ul>
  <li>extract model attributes</li>
  <li>extract strings from <code class="highlighter-rouge">en.yml</code></li>
  <li>extract strings from other yaml files</li>
  <li>extract strings from ruby, javascript and haml sources</li>
</ul>

<p>Now, commit and push changed files into git (branch, pull request, etc.). Make sure no other files than the following list is commited:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>config/model_attributes.rb
config/dictionary_strings.rb
config/yaml_strings.rb
config/locales/manageiq.pot
config/locales/*/*.po
</code></pre>
</div>

<ul>
  <li>Upload the catalog created in previous step to <a href="http://translate.zanata.org">zanata</a>:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>config/locales
<span class="gp">$ </span>zanata-cli push --push-type <span class="nb">source</span>
</code></pre>
</div>

<p>Now translators in zanata will have the latest stuff to translate available.</p>

<ul>
  <li>Once the translators finish translations of a particular language, pull the translated catalog from zanata back to ManageIQ repository.</li>
</ul>

<p>Run the following in ManageIQ git checkout:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>config/locales
<span class="gp">$ </span>zanata-cli pull --pull-type trans    <span class="c"># add --locales ... if you wish to download only specific locales</span>
<span class="gp">$ </span>bundle <span class="nb">exec </span>rake gettext:po_to_json
</code></pre>
</div>

<p>If you are adding new locales / languages to ManageIQ, don’t forget to create yaml file containing localized names of each included
language. From the root of ManageIQ checkout, run the following:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bundle <span class="nb">exec </span>rake locale:extract_locale_names
</code></pre>
</div>

<p>This will update <code class="highlighter-rouge">config/human_locale_names.yaml</code> file.</p>

<p>Now commit and push the changes (branch, pull request, etc.). Make sure no other files than the following list is commited:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>config/locales/*/*.po
app/assets/javascripts/locale/*/*.js
config/human_locale_names.yaml        # optionally, if you added locales
</code></pre>
</div>

<h3 id="manageiq-self-service-ui">ManageIQ Self Service UI</h3>

<ul>
  <li>Update the gettext catalogs:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>client
<span class="gp">$ </span>gulp gettext-extract
</code></pre>
</div>

<ul>
  <li>Upload the catalogs to zanata:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>zanata-cli push --push-type <span class="nb">source</span>
</code></pre>
</div>

<ul>
  <li>Once the translations are complete, download the translated catalogs:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>zanata-cli pull --pull-type trans --locales ...
</code></pre>
</div>

<ul>
  <li>Convert the translated .po catalogs into .json files:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>gulp gettext-compile
</code></pre>
</div>

<ul>
  <li>Update locale names:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>gulp available-languages
</code></pre>
</div>

<ul>
  <li>Commit and push the new content into git:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git commit client/gettext/po client/gettext/json
<span class="gp">$ </span>git push
</code></pre>
</div>

<h3 id="manageiq-amazon-provider">ManageIQ Amazon Provider</h3>

<p>This procedure would apply to all rails engines hooked into ManageIQ in general.</p>

<ul>
  <li>Update the gettext catalog. With the Amazon provider engine (plugin) hooked into your ManageIQ instance, run the following from the ManageIQ git checkout:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rake locale:plugin:find[ManageIQ::Providers::Amazon]
</code></pre>
</div>

<ul>
  <li>Upload the catalog to zanata:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>zanata-cli push --push-type <span class="nb">source</span>
</code></pre>
</div>

<ul>
  <li>Once the translations are complete, download the translated catalogs:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>zanata-cli pull --pull-type trans --locales ...
</code></pre>
</div>

<ul>
  <li>Commit and push the new catalogs into git:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git commit locale/
<span class="gp">$ </span>git push
</code></pre>
</div>

<h2 id="internationalization-in-rails-engines-plugins">Internationalization in rails engines (plugins)</h2>

<ul>
  <li>Create an initializer in your engine / plugin with a content similar to:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>cat config/initializers/gettext.rb
Vmdb::Gettext::Domains.add_domain<span class="o">(</span><span class="s1">'ManageIQ_Providers_Amazon'</span>,
  ManageIQ::Providers::Amazon::Engine.root.join<span class="o">(</span><span class="s1">'locale'</span><span class="o">)</span>.to_s,
  :po<span class="o">)</span>

</code></pre>
</div>

<ul>
  <li>Initial extraction of gettext strings found in your engine / plugin:</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd</span> /path/to/your/plugin/root
<span class="gp">$ </span>mkdir ./locale
<span class="gp">$ </span><span class="k">for </span>locale <span class="k">in </span>en, ...; <span class="k">do </span>mkdir ./locale/<span class="nv">$locale</span>; <span class="k">done</span>
<span class="gp">$ </span><span class="nb">cd</span> /path/to/your/manageiq/root
<span class="gp">$ </span>rake locale:plugin:find[YourPlugin]
</code></pre>
</div>

<p>Refer to <a href="https://github.com/ManageIQ/manageiq-providers-amazon/pull/28">ManageIQ/manageiq-providers-amazon/pull/28</a> as an example.</p>

      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa fa-github"></i>
          Github
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa fa-gitter">
            <svg viewBox="45 47 78 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 40.1 (33804) - http://www.bohemiancoding.com/sketch -->
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(45.000000, 47.000000)">
        <g id="icon-gitter" transform="translate(10.000000, 0.000000)">
            <rect id="Rectangle-path" x="0" y="0.5" width="8.25" height="61"></rect>
            <rect id="Rectangle-path" x="49.75" y="14.5" width="8.25" height="47"></rect>
            <rect id="Rectangle-path" x="16.5" y="14.5" width="8.25" height="80.25"></rect>
            <rect id="Rectangle-path" x="33.25" y="14.5" width="8.25" height="80.25"></rect>
        </g>
    </g>
</svg>

          </i>
          Gitter
        </a>
      </li>
      <li>
        <a href="http://talk.manageiq.org/">
          <i class="fa fa-comments"></i>
          Forum
        </a>
      </li>
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2019 ManageIQ.
      </span>
      <span>
        <a href="http://community.redhat.com/software/" target="_blank">
          Sponsored by Red Hat, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://twitter.com/ManageIQ" class="social_link social_link-twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" class="social_link social_link-facebook">
            <span class="social_link-icon">
              <i class="fa fa-facebook"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://plus.google.com/+ManageiqOrg" class="social_link social_link-google_plus">
            <span class="social_link-icon">
              <i class="fa fa-google-plus"></i>
            </span>
          </a>
        </li>

        <!--  -->
        <li>
          <a href="https://www.linkedin.com/company/manageiq" class="social_link social_link-linkedin">
            <span class="social_link-icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" class="social_link social_link-youtube">
            <span class="social_link-icon">
              <i class="fa fa-youtube"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
  </body>
</html>
