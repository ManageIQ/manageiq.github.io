<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <link type="text/css" rel="stylesheet" href="/assets/main-2ecb08da1d573bdffe333b0e80b93902bc28b846101d882b1918a010f3f7b92b.css">
  <link rel="canonical" href="http://manageiq.org/docs/guides/ui/dialog_editor">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/guides/ui/dialog_editor">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li>
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li class="active">
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

    <div class="col-lg-4 col-md-4 col-sm-12 pull-right" style="margin-top: 10px">
        <script async src="https://cse.google.com/cse.js?cx=006042792541147862616:dfkijfebdts"></script>
         <div class="gcse-search"></div>
    </div>
</nav>

<script>
  window.onload = demo;
	function demo() {
	    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search Documentation")
	}
</script>

<div class="doc_container">
  <div class="doc_menu">
    
    

<ul class="menu menu-toplevel" id="guides_menu">

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Architecture
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/capacity_and_utilization_collection_explanation.html">
      Capacity And Utilization Collection Explanation
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/enterprise.html">
      Enterprise
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/source_code_layout.html">
      Source Code Layout
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Developer Setup
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/plugins.html">
      Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/running_test_suites.html">
      Running Test Suites
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/debugging.html">
      Interactive debugging
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      External Auth
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/configuration.html">
      Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/installation.html">
      Installation
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      User Interface
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/patterns.html">
      UI Patterns
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/plugins.html">
      UI Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/register_react_component.html">
      Shared React Component API
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/report_data_api.html">
      Report Data API
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Providers
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_overview.html">
      Providers Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_database_architecture.html">
      Providers Database Architecture
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/amazon_aws_config.html">
      Amazon AWS Config
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/containers.html">
      Containers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openshift.html">
      Openshift
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openstack_infra_provider.html">
      Openstack Infra Provider
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/provisioning/windows_imaging.html">
      Windows Imaging
    </a>
    
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/coding_style_and_standards.html">
      Coding Style And Standards
    </a>
    
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/i18n.html">
      I18n
    </a>
    
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc dev_doc">
      

      <div class="doc-content">
        
        <h1 id="dialog-editor">Dialog Editor</h1>

<h2 id="angular-components">Angular components</h2>

<h3 id="dialog-editor-1">Dialog Editor</h3>

<p><a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/dialog-editor"><code class="language-plaintext highlighter-rouge">%dialog-editor</code></a> is the component on the top of the hierarchy of the whole editor.</p>

<p>The overall dialog editor hierarchy is as follows:</p>
<div class="language-haml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">%dialog-editor</span>
  <span class="nt">%dialog-editor-tabs</span>
  <span class="nt">%dialog-editor-boxes</span>
    | %dialog-editor-field
  <span class="nt">%dialog-editor-modal</span> -# modal for editing properties of field/tab/box
    | %dialog-editor-modal-tab
    | %dialog-editor-modal-box
    | %dialog-editor-modal-field
        | %dialog-editor-modal-field-template -# per field type
</code></pre></div></div>

<p>The structure of JSON object used to describe the service dialogs is as follows:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">'</span><span class="s1">content</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
  <span class="dl">'</span><span class="s1">dialog_tabs</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
    <span class="p">...</span>
    <span class="dl">'</span><span class="s1">dialog_groups</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
      <span class="p">...</span>
      <span class="dl">'</span><span class="s1">dialog_fields</span><span class="dl">'</span><span class="p">:</span> <span class="p">[...],</span>
    <span class="p">}],</span>
  <span class="p">}],</span>
<span class="p">}],</span>
</code></pre></div></div>

<h3 id="dialog-tabs">Dialog Tabs</h3>

<p><a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/tab-list"><code class="language-plaintext highlighter-rouge">%dialog-editor-tabs</code></a> displays a list of tabs assigned to the dialog.</p>

<p>It is the main component as all the content is stored inside the object.</p>

<p>At the beginning, the componentâ€™s controller loads the tabs of the dialog:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">tabList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">DialogEditor</span><span class="p">.</span><span class="nx">getDialogTabs</span><span class="p">();</span>
</code></pre></div></div>
<p>and assigns id of the currently active tab in the  <code class="language-plaintext highlighter-rouge">activeTab</code> variable in the <code class="language-plaintext highlighter-rouge">DialogEditor</code> service.</p>

<h4 id="addtab"><code class="language-plaintext highlighter-rouge">addTab()</code></h4>

<p>function <code class="language-plaintext highlighter-rouge">addTab</code> creates a new empty tab, pushes it to the array with the other tabs, and updates <code class="language-plaintext highlighter-rouge">activeTab</code> to the new tab.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">description</span><span class="p">:</span> <span class="nx">__</span><span class="p">(</span><span class="dl">'</span><span class="s1">New tab </span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span> <span class="nx">nextIndex</span><span class="p">,</span>
  <span class="nx">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">edit</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">label</span><span class="p">:</span> <span class="nx">__</span><span class="p">(</span><span class="dl">'</span><span class="s1">New tab </span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span> <span class="nx">nextIndex</span><span class="p">,</span>
  <span class="nx">position</span><span class="p">:</span> <span class="nx">nextIndex</span><span class="p">,</span>
  <span class="nx">active</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">dialog_groups</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="removetabid-number"><code class="language-plaintext highlighter-rouge">removeTab(id: number)</code></h4>

<p>removes the tab with the ID sent in parameter and updates the <code class="language-plaintext highlighter-rouge">activeTab</code>.</p>

<h4 id="update-positions-of-tabs">Update positions of tabs</h4>

<p>Because it is possible to remove (or just move the position) tab in the middle of the list, after every change the positions are updated by calling <code class="language-plaintext highlighter-rouge">updatePosition</code> method defined in the <code class="language-plaintext highlighter-rouge">Dialog Editor</code> service:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">DialogEditor</span><span class="p">.</span><span class="nx">updatePositions</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tabList</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="dialog-groups">Dialog Groups</h3>

<p>On the first level, the <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/box"><code class="language-plaintext highlighter-rouge">%dialog-editor-boxes</code></a> component iterates through all the tabs, selects the one that is <code class="language-plaintext highlighter-rouge">active</code>, and renders its groups:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng-repeat='tab in vm.dialogTabs'
ng-if='tab.position === vm.service.activeTab'
</code></pre></div></div>

<p>After, it iterates through all the tabs, and calls <code class="language-plaintext highlighter-rouge">%dialog-editor-field</code> component belonging to the group (decided by the position of the group).</p>

<p>Working with groups is very similar to working with tabs â€“ <code class="language-plaintext highlighter-rouge">addBox()</code>, <code class="language-plaintext highlighter-rouge">removeBox(id: number)</code> have the same purpose.</p>

<p>After every change, the position needs to be updated:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">DialogEditor</span><span class="p">.</span><span class="nx">updatePositions</span><span class="p">(</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">dialogTabs</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">DialogEditor</span><span class="p">.</span><span class="nx">activeTab</span><span class="p">].</span><span class="nx">dialog_groups</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The Group is <code class="language-plaintext highlighter-rouge">droppable</code> which means that elements can be Drag&amp;Drop-ed into the content of the group.</p>

<p>Therefore in the controller of the component handling for updating position of dialog fields needs to be done:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">public</span> <span class="nx">droppableOptions</span><span class="p">(</span><span class="nx">e</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">ui</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">elementScope</span><span class="p">:</span> <span class="nx">any</span> <span class="o">=</span> <span class="nx">ng</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">scope</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">droppedItem</span><span class="p">:</span> <span class="nx">any</span> <span class="o">=</span> <span class="nx">elementScope</span><span class="p">.</span><span class="nx">dndDragItem</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">droppedPlace</span><span class="p">:</span> <span class="nx">any</span> <span class="o">=</span> <span class="nx">elementScope</span><span class="p">.</span><span class="nx">box</span><span class="p">;</span>
  <span class="c1">// update name for the dropped field</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">droppedItem</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateFieldName</span><span class="p">(</span><span class="nx">droppedItem</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// update indexes of other boxes after changing their order</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">DialogEditor</span><span class="p">.</span><span class="nx">updatePositions</span><span class="p">(</span>
    <span class="nx">droppedPlace</span><span class="p">.</span><span class="nx">dialog_fields</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="dialog-fields">Dialog Fields</h3>

<p>The most important part of <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/field"><code class="language-plaintext highlighter-rouge">%dialog-editor-field</code></a> component is <code class="language-plaintext highlighter-rouge">ng-switch</code> in the template of the component, that renders the dialog field according to its type (<code class="language-plaintext highlighter-rouge">on="vm.fieldData.type"</code>).</p>

<p>All the possible fields and their parameters are listed in this component.</p>

<p>The dialog field types are:</p>

<ul>
  <li>Text Box</li>
  <li>Text Area</li>
  <li>Check Box</li>
  <li>Date Control</li>
  <li>Date Time Control</li>
  <li>Dropdown List</li>
  <li>Radio Button</li>
  <li>Tag Control</li>
</ul>

<p>In case of Dropdown, the <code class="language-plaintext highlighter-rouge">default_value</code> can be represented either as an array (if the Dropdown is multiselect) or a string. For multiselect dropdowns there is a method for converting the <code class="language-plaintext highlighter-rouge">default_value</code> attribute:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">public</span> <span class="nx">convertValuesToArray</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fieldData</span><span class="p">.</span><span class="nx">default_value</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">fromJson</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fieldData</span><span class="p">.</span><span class="nx">default_value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="modal">Modal</h3>

<p><a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal"><code class="language-plaintext highlighter-rouge">%dialog-editor-modal</code></a> does not contain any template for the component. Instead it contains behavior for modal used to edit details for Tabs, Groups and Fields.</p>

<p>The primary function of the component is to load data it needs. Each type has its own mehthods to load the data into <code class="language-plaintext highlighter-rouge">this.modalData</code>. The source for the data is again the commonly used <code class="language-plaintext highlighter-rouge">DialogEditor</code> service method: <code class="language-plaintext highlighter-rouge">this.DialogEditor.getDialogTabs()</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="nx">loadModalTabData</span><span class="p">(</span><span class="nx">tab</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span>
<span class="k">public</span> <span class="nx">loadModalBoxData</span><span class="p">(</span><span class="nx">tab</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">box</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span>
<span class="k">public</span> <span class="nx">loadModalFieldData</span><span class="p">(</span><span class="nx">tab</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">box</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">field</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span>
</code></pre></div></div>

<p>Modal controller also contains methods <code class="language-plaintext highlighter-rouge">addEntry()</code> and <code class="language-plaintext highlighter-rouge">removeEntry()</code> that are specific for Dropdown List or Radio Button component.</p>

<p><code class="language-plaintext highlighter-rouge">resolveCategories()</code> , <code class="language-plaintext highlighter-rouge">setupCategoryOptions()</code> and <code class="language-plaintext highlighter-rouge">currentCategoryEntries()</code> are methods specific for Tag Control fields.</p>

<p>The methods are shared with other controllers by binding them to the componentâ€™s template in <code class="language-plaintext highlighter-rouge">buildTemplate()</code>.</p>

<p>Displaying the modal is done by <code class="language-plaintext highlighter-rouge">showModal(options: any)</code>.</p>

<h4 id="tab-modal">Tab Modal</h4>

<p>In <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal-tab"><code class="language-plaintext highlighter-rouge">dialog-editor-modal-tab</code></a> component, only the label and description of the Dialog Tab is set.</p>

<h4 id="group-modal">Group Modal</h4>

<p><a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal-box"><code class="language-plaintext highlighter-rouge">dialog-editor-modal-box</code></a> is also only used to set label and description of the Dialog Group.</p>

<h4 id="field-modal">Field Modal</h4>

<p>The main purpose of <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal-field"><code class="language-plaintext highlighter-rouge">dialog-editor-modal-field</code></a> is similar to the <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/field"><code class="language-plaintext highlighter-rouge">%dialog-editor-field</code></a> component.</p>

<p>The componentâ€™s template mostly consists of <code class="language-plaintext highlighter-rouge">ng-switch</code>, which renders templates of specific fields from the <code class="language-plaintext highlighter-rouge">modal-field-template</code> component described lower, with necessary methods passed into the component through the binding described in <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal"><code class="language-plaintext highlighter-rouge">%dialog-editor-modal</code></a> component.</p>

<p>Example for the Radio Button Dialog Field:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dialog-editor-modal-field-template</span>
<span class="na">ng-switch-when=</span><span class="s">"DialogFieldRadioButton"</span>
<span class="na">template=</span><span class="s">"radio-button.html"</span>
<span class="na">show-fully-qualified-name=</span><span class="s">"vm.showFullyQualifiedName"</span>
<span class="na">tree-options=</span><span class="s">"vm.treeOptions"</span>
<span class="na">modal-tab-is-set=</span><span class="s">"vm.modalTabIsSet"</span>
<span class="na">modal-tab=</span><span class="s">"vm.modalTab"</span>
<span class="na">add-entry=</span><span class="s">"vm.addEntry"</span>
<span class="na">remove-entry=</span><span class="s">"vm.removeEntry"</span>
<span class="na">modal-data=</span><span class="s">"vm.modalData"</span><span class="nt">&gt;</span>
</code></pre></div></div>
<p>Label and Description for the Dialog Field are also set in this component, as well as setting Dialog Field to be <em>Dynamic</em> or <em>Reconfigurable</em>, as these properties are same for all the fields except Tag Control types.</p>

<h4 id="field-template">Field Template</h4>

<p>Controller of <a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/modal-field-template"><code class="language-plaintext highlighter-rouge">dialog-editor-modal-field-template</code></a> contains mostly bindings to the methods related to specific components.</p>

<p>The main part of the component are templates for each of the dialog fields. All the parameters for Dialog Fields are described in the templates of this component.</p>

<p>The modal for Dialog Fields contains three permanent tabs - <em>Field Information</em>, <em>Options</em>, <em>Advanced</em>. If the Dialog Field is set as <code class="language-plaintext highlighter-rouge">dynamic</code>, a new tab with an <em>Overridable Options</em> heading is displayed.</p>

<p>In <em>Field Information</em> all the fields must have a <code class="language-plaintext highlighter-rouge">name</code> that is unique in the dialog, optionally a <code class="language-plaintext highlighter-rouge">label</code>, <code class="language-plaintext highlighter-rouge">description</code>, and (as mentioned before, except Tag Control) all the fields can be set as <code class="language-plaintext highlighter-rouge">dynamic</code> <em>(boolean)</em>.</p>

<p>In the <em>Advanced</em> tab, the <code class="language-plaintext highlighter-rouge">reconfigurable</code> <em>(boolean)</em> option can be set.</p>

<p>All the other parameters for the components the can be set in <em>Options</em> or <em>Overridable Options</em> tab through the modal are as follows:</p>

<h5 id="text-box">Text Box</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.protected</code> <em>(boolean)</em> â€“ for passwords, value will be replaced with <code class="language-plaintext highlighter-rouge">*</code></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_type</code> <em>(â€˜regexâ€™ (string) / false (boolean))</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_rule</code> <em>(string; only if <code class="language-plaintext highlighter-rouge">validatior_type</code> has a value <code class="language-plaintext highlighter-rouge">'regex'</code>)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">load_values_on_init</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.protected</code> <em>(boolean)</em> â€“ for passwords, value will be replaced with <code class="language-plaintext highlighter-rouge">*</code></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_type</code> <em>(â€˜regexâ€™ (string) / false (boolean))</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_rule</code> <em>(string; only if <code class="language-plaintext highlighter-rouge">validatior_type</code> has a value <code class="language-plaintext highlighter-rouge">'regex'</code>)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string)</em></li>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="text-area">Text Area</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_type</code> <em>(â€˜regexâ€™ (string) / false (boolean))</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_rule</code> <em>(string; only if <code class="language-plaintext highlighter-rouge">validatior_type</code> has a value <code class="language-plaintext highlighter-rouge">'regex'</code>)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">load_values_on_init</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_type</code> <em>(â€˜regexâ€™ (string) / false (boolean))</em></li>
      <li><code class="language-plaintext highlighter-rouge">validator_rule</code> <em>(string; only if <code class="language-plaintext highlighter-rouge">validatior_type</code> has a value <code class="language-plaintext highlighter-rouge">'regex'</code>)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string)</em></li>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="check-box">Check Box</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">load_values_on_init</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="date-control">Date Control</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(Date object, after <a href="https://github.com/ManageIQ/ui-components/pull/373/files">#373</a>)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_past_dates</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.show_past_dates</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="date-time-control">Date Time Control</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(Date object, after <a href="https://github.com/ManageIQ/ui-components/pull/373/files">#373</a>)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_past_dates</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.show_past_dates</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="dropdown-list">Dropdown List</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string, or a string representing an array for multiselect â€“ <code class="language-plaintext highlighter-rouge">default_value: "[\"1\", \"2\"]"</code>)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.force_multi_value</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.sort_by</code> <em>(select - none / value / description)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.sort_order</code> <em>(select - ascending / descending)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">values</code> <em>(array, [0] - value, [1] - key)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">load_values_on_init</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.force_multi_value</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">options.sort_by</code> <em>(select - none / value / description)</em></li>
          <li><code class="language-plaintext highlighter-rouge">options.sort_order</code> <em>(select - ascending / descending)</em></li>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="radio-button">Radio Button</h5>

<ul>
  <li><strong>if <code class="language-plaintext highlighter-rouge">dynamic</code> is not checked:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">default_value</code> <em>(string or array for multiselect)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.sort_by</code> <em>(select - none / value / description)</em></li>
      <li><code class="language-plaintext highlighter-rouge">options.sort_order</code> <em>(select - ascending / descending)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">values</code> <em>(array, [0] - value, [1] - key)</em></li>
    </ul>
  </li>
  <li><strong>if the field is <code class="language-plaintext highlighter-rouge">dynamic</code>:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
      <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
      <li><code class="language-plaintext highlighter-rouge">load_values_on_init</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
      <li><code class="language-plaintext highlighter-rouge">resource_action</code> <em>(path to automate method)</em></li>
      <li><code class="language-plaintext highlighter-rouge">show_refresh_button</code> <em>(boolean)</em></li>
      <li><strong>In <em>Overridable Options</em> tab:</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">options.sort_by</code> <em>(select - none / value / description)</em></li>
          <li><code class="language-plaintext highlighter-rouge">options.sort_order</code> <em>(select - ascending / descending)</em></li>
          <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
          <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="tag-control">Tag Control</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">data_type</code> <em>(select - string / integer)</em></li>
  <li><code class="language-plaintext highlighter-rouge">dialog_field_responders</code> <em>(multiple select - dynamic fields list)</em></li>
  <li><code class="language-plaintext highlighter-rouge">options.category_id</code> <em>(select - list of categories)</em></li>
  <li><code class="language-plaintext highlighter-rouge">options.force_single_value</code> <em>(boolean)</em></li>
  <li><code class="language-plaintext highlighter-rouge">options.sort_by</code> <em>(select - none / value / description)</em></li>
  <li><code class="language-plaintext highlighter-rouge">options.sort_order</code> <em>(select - ascending / descending)</em></li>
  <li><code class="language-plaintext highlighter-rouge">required</code> <em>(boolean)</em></li>
  <li><code class="language-plaintext highlighter-rouge">read_only</code> <em>(boolean)</em></li>
  <li><code class="language-plaintext highlighter-rouge">visible</code> <em>(boolean)</em></li>
</ul>

<p><em>*A <a href="https://github.com/ManageIQ/ui-components/pull/392#discussion_r296871830">note</a> by @eclarizio related to accessing values of the fields:</em></p>

<blockquote>
  <p>on the ui-components side for most of the field types,
<code class="language-plaintext highlighter-rouge">default_value</code> is the value that is getting passed back from the
refresh API call that we should be looking at to determine what to
show to the user after a refresh happens. We changed it in
<a href="https://github.com/ManageIQ/ui-components/commit/7dcb1f7ca9fc404588cfd8944796bd3ed726c376">7dcb1f7</a>.
For sorted items, <code class="language-plaintext highlighter-rouge">values</code> is the key we use since it needs to be a
list, and <code class="language-plaintext highlighter-rouge">default_value</code> is simply the one that is selected from that
list.</p>

  <p>On the ui-components side, because of the way datetime controls work,
there is special logic for the date and time parts because the
<code class="language-plaintext highlighter-rouge">default_value</code> comes in as a string (because it is just a JSON
response), and then it gets parsed and separated into a <code class="language-plaintext highlighter-rouge">dateField</code>
and a <code class="language-plaintext highlighter-rouge">timeField</code> since the controls are separate.</p>
</blockquote>

<h3 id="toolbox">Toolbox</h3>

<p><a href="https://github.com/ManageIQ/ui-components/tree/master/src/dialog-editor/components/toolbox"><code class="language-plaintext highlighter-rouge">dialog-editor-field-static</code></a> is the component used for dragging the Dialog Fields placeholders into the droppable Dialog Group.</p>

<p>Its controller describes default values for parameters of each Dialog Field.</p>

<h3 id="tree-selector-and-tree-view">Tree Selector and Tree View</h3>

<p>Components <a href="https://github.com/ManageIQ/ui-components/tree/master/src/tree-selector">Tree Selector</a> and <a href="https://github.com/ManageIQ/ui-components/tree/master/src/tree-view">Tree View</a> are set to be replaced by <a href="https://github.com/brumik/react-wooden-tree">react-wooden-tree</a>.</p>

<p>In the Dialog Editor text boxes are used for selecting path to Automate methods using <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/36522ada53a64a129cb3519b4183da8084dced1c/app/assets/javascripts/services/dialog_editor_http_service.js#L15-L26">Dialog Editor HTTP service</a> to lazy-load Automate methods.</p>

<h2 id="angular-services">Angular Services</h2>

<h3 id="dialog-editor-2">Dialog Editor</h3>

<p>The <a href="https://github.com/ManageIQ/ui-components/blob/master/src/dialog-editor/services/dialogEditorService.ts"><code class="language-plaintext highlighter-rouge">DialogEditor</code></a> serviceâ€™s primary use is to store the data of the edited dialog in the <code class="language-plaintext highlighter-rouge">setData</code> function:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">public</span> <span class="nx">setData</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="c1">// the dialog data are now stored in this.data.content[0]</span>
  <span class="c1">// as indicated earlier in the document</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">setData</code> function is then called in <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/62c50e0af7324eee16bc333b65d801e4398a5674/app/assets/javascripts/controllers/dialog_editor/dialog_editor_controller.js#L86">Dialog Editor controller</a></p>

<p>Another often used function is <code class="language-plaintext highlighter-rouge">public updatePositions(elements: any[])</code> used to re-calculate indexes of items in the dialog after a change of their position.</p>

<p>The Dialog Editor also uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage">sessionStorage</a> to protect the users from mistakenly losing the changes while editing the dialog. In the <code class="language-plaintext highlighter-rouge">sessionStorage</code> the dialogs are stored by identificator <code class="language-plaintext highlighter-rouge">'service_dialog-' + id</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">public</span> <span class="nx">clearSessionStorage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sessionStorageKey</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>
<span class="p">}</span>

<span class="kr">public</span> <span class="nx">backupSessionStorage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">dialog</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sessionStorageKey</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">dialog</span><span class="p">));</span>
<span class="p">}</span>

<span class="kr">public</span> <span class="nx">restoreSessionStorage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sessionStorageKey</span><span class="p">(</span><span class="nx">id</span><span class="p">)));</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="dialog-editor-validation">Dialog Editor Validation</h3>

<p>The <a href="https://github.com/ManageIQ/ui-components/blob/master/src/dialog-editor/services/dialogValidationService.ts"><code class="language-plaintext highlighter-rouge">DialogValidation</code></a> service contains set of rules that needs to be fulfilled in order to be able to submit the Dialog.</p>

<p>The rules are:</p>
<ul>
  <li>rules for Dialog:
    <ul>
      <li>Dialog needs to have a label</li>
      <li>Dialog needs to have at least one tab</li>
    </ul>
  </li>
  <li>rules for Dialog Tabs:
    <ul>
      <li>Dialog tab needs to have a label</li>
      <li>Dialog tab needs to have at least one group</li>
    </ul>
  </li>
  <li>rules for Dialog Groups:
    <ul>
      <li>Dialog group needs to have a label</li>
      <li>Dialog group needs to have at least one field</li>
    </ul>
  </li>
  <li>rules for Dialog Fields:
    <ul>
      <li>Dialog field needs to have a name</li>
      <li>Dialog field needs to have a label</li>
      <li>Dropdown needs to have entries</li>
      <li>Category needs to be set for TagControl field</li>
      <li>Entry Point needs to be set for Dynamic elements</li>
      <li>If the value is set as Integer, entered values must be a number</li>
    </ul>
  </li>
</ul>

<h2 id="workflow">Workflow</h2>

<h3 id="launch-the-action-to-open-dialog-editor">Launch the action to open Dialog Editor</h3>

<p>The Dialog Editor can be opened for three different actions - <code class="language-plaintext highlighter-rouge">edit</code>, <code class="language-plaintext highlighter-rouge">copy</code> or <code class="language-plaintext highlighter-rouge">new</code>.
If both <code class="language-plaintext highlighter-rouge">:id</code> and <code class="language-plaintext highlighter-rouge">:copy</code> keys are specified, action is <code class="language-plaintext highlighter-rouge">copy</code>. If the <code class="language-plaintext highlighter-rouge">:copy</code> key is missing, the action is <code class="language-plaintext highlighter-rouge">edit</code>, if ever <code class="language-plaintext highlighter-rouge">:id</code> is not present, a <code class="language-plaintext highlighter-rouge">new</code> Dialog is being created.
The behavior is described in <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/helpers/miq_ae_customization_helper.rb"><code class="language-plaintext highlighter-rouge">miq_ae_customization_helper.rb</code></a></p>

<p>The top level component <code class="language-plaintext highlighter-rouge">%dialog-editor</code> is used in the <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/views/miq_ae_customization/editor.html.haml">editor.html.haml</a> template, where the ID of the dialog is also stored by:</p>

<div class="language-haml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ManageIQ.angular.app.value('dialogIdAction', '<span class="si">#{</span> <span class="n">dialog_id_action</span><span class="p">.</span><span class="nf">to_json</span> <span class="si">}</span>');
</code></pre></div></div>

<h3 id="data-from-the-api">Data from the API</h3>

<p>Service Dialogs are serialized together from four database tables - <a href="https://github.com/ManageIQ/manageiq/blob/master/app/models/dialog.rb">dialog</a>, <a href="https://github.com/ManageIQ/manageiq/blob/master/app/models/dialog_tab.rb">dialog tab</a>, <a href="https://github.com/ManageIQ/manageiq/blob/master/app/models/dialog_group.rb">dialog group</a>, and <a href="https://github.com/ManageIQ/manageiq/blob/master/app/models/dialog_field.rb">dialog fields</a>. The data are serialized into a single object, before being passed to the Dialog Editor.</p>

<p>The data are loaded by <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/master/app/assets/javascripts/services/dialog_editor_http_service.js">Dialog Editor HTTP service</a> from API by the request:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nx">API</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/service_dialogs/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">?attributes=content,buttons,label</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>
<p>or in case of a new Dialog, an empty dialog structure, defined  in <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/62c50e0af7324eee16bc333b65d801e4398a5674/app/assets/javascripts/controllers/dialog_editor/dialog_editor_controller.js#L23-L35">Dialog Editor controller</a> is used:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">dialogInitContent</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">content</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
    <span class="dl">'</span><span class="s1">dialog_tabs</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
      <span class="dl">'</span><span class="s1">label</span><span class="dl">'</span><span class="p">:</span> <span class="nx">__</span><span class="p">(</span><span class="dl">'</span><span class="s1">New tab</span><span class="dl">'</span><span class="p">),</span>
      <span class="dl">'</span><span class="s1">position</span><span class="dl">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">dialog_groups</span><span class="dl">'</span><span class="p">:</span> <span class="p">[{</span>
        <span class="dl">'</span><span class="s1">label</span><span class="dl">'</span><span class="p">:</span> <span class="nx">__</span><span class="p">(</span><span class="dl">'</span><span class="s1">New section</span><span class="dl">'</span><span class="p">),</span>
        <span class="dl">'</span><span class="s1">position</span><span class="dl">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">dialog_fields</span><span class="dl">'</span><span class="p">:</span> <span class="p">[],</span>
      <span class="p">}],</span>
    <span class="p">}],</span>
  <span class="p">}],</span>
<span class="p">};</span>
</code></pre></div></div>

<p>from the API the data are received from the method <a href="https://github.com/ManageIQ/manageiq-api/blob/e9ca3256ded6d026fe412c0815e1bb672ee0d4e1/app/controllers/api/service_dialogs_controller.rb#L19-L22"><code class="language-plaintext highlighter-rouge">fetch_service_dialogs_content</code></a>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fetch_service_dialogs_content</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>
  <span class="n">target</span><span class="p">,</span> <span class="n">resource_action</span> <span class="o">=</span> <span class="n">validate_dialog_content_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
  <span class="n">resource</span><span class="p">.</span><span class="nf">content</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">resource_action</span><span class="p">,</span> <span class="kp">true</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>after JSON is loaded for dynamic fields, dialog_field_responders needs to have an id, customized by: <code class="language-plaintext highlighter-rouge">translateResponderNamesToIds</code>.</p>

<h3 id="submitting-the-dialog">Submitting the Dialog</h3>

<p>Before sumbitting the Dialog, a keys used by Angular need to be removed from the object describing the Dialog content. For that a <a href="https://github.com/ManageIQ/manageiq-ui-classic/blob/62c50e0af7324eee16bc333b65d801e4398a5674/app/assets/javascripts/controllers/dialog_editor/dialog_editor_controller.js#L94-L116"><code class="language-plaintext highlighter-rouge">customizer</code></a> function is used.</p>

<p>After, the Dialog is saved by calling:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nx">API</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/service_dialogs</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="p">{</span> <span class="na">action</span><span class="p">:</span> <span class="nx">action</span><span class="p">,</span> <span class="na">resource</span><span class="p">:</span> <span class="nx">data</span> <span class="p">},</span> <span class="p">{</span> <span class="na">skipErrors</span><span class="p">:</span> <span class="p">[</span><span class="mi">400</span><span class="p">]</span> <span class="p">});</span>
</code></pre></div></div>

<h2 id="demo">Demo</h2>

<p>To play with the Dialog Editor and see what the JSON object of the dialog looks like, you can run <a href="https://github.com/ManageIQ/ui-components">ui-components</a> and play with the Dialog Editor at http://localhost:4000/#/dialog/editor but please remember that</p>

<p><em>The demo is not connected to a real instance and there is no way to connect dynamic fields to Automate methods in it.</em></p>

      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa fa-github"></i>
          Github
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa fa-gitter">
            <svg viewBox="45 47 78 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 40.1 (33804) - http://www.bohemiancoding.com/sketch -->
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(45.000000, 47.000000)">
        <g id="icon-gitter" transform="translate(10.000000, 0.000000)">
            <rect id="Rectangle-path" x="0" y="0.5" width="8.25" height="61"></rect>
            <rect id="Rectangle-path" x="49.75" y="14.5" width="8.25" height="47"></rect>
            <rect id="Rectangle-path" x="16.5" y="14.5" width="8.25" height="80.25"></rect>
            <rect id="Rectangle-path" x="33.25" y="14.5" width="8.25" height="80.25"></rect>
        </g>
    </g>
</svg>

          </i>
          Gitter
        </a>
      </li>
      <li>
        <a href="http://talk.manageiq.org/">
          <i class="fa fa-comments"></i>
          Forum
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2021 ManageIQ.
      </span>
      <span>
        <a href="http://community.redhat.com/software/" target="_blank">
          Sponsored by Red Hat, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://twitter.com/ManageIQ" class="social_link social_link-twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" class="social_link social_link-facebook">
            <span class="social_link-icon">
              <i class="fa fa-facebook"></i>
            </span>
          </a>
        </li>

        <!--  -->
        <li>
          <a href="https://www.linkedin.com/company/manageiq" class="social_link social_link-linkedin">
            <span class="social_link-icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" class="social_link social_link-youtube">
            <span class="social_link-icon">
              <i class="fa fa-youtube"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
