<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <script>
    stored_theme = localStorage.getItem('miq-theme');
    theme        = stored_theme && JSON.parse(localStorage.getItem('miq-theme'));

    if (theme === "light-theme") {
      document.querySelector('html').classList.add("light-theme");
    }

    if (theme === "dark-theme") {
      document.querySelector('html').classList.add("dark-theme");
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="canonical" href="http://manageiq.org/docs/guides/external_auth/ipa">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa-solid fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa-solid fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa-solid theme-toggle" data-toggle-theme></i>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/guides/external_auth/ipa">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li>
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li class="active">
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

    <div class="col-lg-4 col-md-4 col-sm-12 pull-right" style="margin-top: 10px">
        <script async src="https://cse.google.com/cse.js?cx=006042792541147862616:dfkijfebdts"></script>
         <div class="gcse-search"></div>
    </div>
</nav>

<script>
  window.onload = demo;
	function demo() {
	    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search Documentation")
	}
</script>

<div class="doc_container">
  <div class="doc_menu">
    
    

<ul class="menu menu-toplevel" id="guides_menu">

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Architecture
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/capacity_and_utilization_collection_explanation.html">
      Capacity And Utilization Collection Explanation
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/enterprise.html">
      Enterprise
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/source_code_layout.html">
      Source Code Layout
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Developer Setup
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/plugins.html">
      Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/running_test_suites.html">
      Running Test Suites
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/developer_setup/debugging.html">
      Interactive debugging
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      External Auth
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth.html">
      Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/configuration.html">
      Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/external_auth/installation.html">
      Installation
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      User Interface
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/patterns.html">
      UI Patterns
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/plugins.html">
      UI Plugins
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/register_react_component.html">
      Shared React Component API
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/ui/report_data_api.html">
      Report Data API
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li class="menu-parent">
    
    <a href="#">
      Providers
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_overview.html">
      Providers Overview
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/architecture/providers_database_architecture.html">
      Providers Database Architecture
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/amazon_aws_config.html">
      Amazon AWS Config
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/containers.html">
      Containers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openshift.html">
      Openshift
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/guides/providers/openstack_infra_provider.html">
      Openstack Infra Provider
    </a>
    
  </li>


      </ul>
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/provisioning/windows_imaging.html">
      Windows Imaging
    </a>
    
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/coding_style_and_standards.html">
      Coding Style And Standards
    </a>
    
    
  </li>

  
  
  
  <li>
    
    <a href="/docs/guides/i18n.html">
      I18n
    </a>
    
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc dev_doc">
      

      <div class="doc-content">
        
        <h1 id="development-with-an-ipa-server">Development with an IPA server</h1>

<p>This document describes the steps needed to enable External
Authentication (httpd) on the Appliance against an IPA Server.</p>

<p>Once external authentication is enabled, users will be able
to login to the Appliance using their IPA Server credentials.
User accounts will be automatically created on the Appliance
and relevant information imported from the IPA Server.</p>

<p>To allow IPA server defined users to login to the Appliance,
they must be members of at least one group on the IPA server
which needs to be defined in the Appliance under
<em>Configure-&gt;Configuration-&gt;Access Control-&gt;Groups</em> with the
appropriate role assigned to that group.</p>

<p>The Appliance comes pre-loaded with the necessary IPA Client
software to be able to connect to the IPA Server. The software
is just not configured by default.</p>

<p>Enabling External Authentication is done by first enabling it
in the Appliance Web UI then via the Appliance Console.
Disabling External Authentication and returning to Internal
Database Authentication also needs to be done in both the
Appliance Web UI and then the Appliance Console.</p>

<hr />

<h1 id="testing-ipa-configuration-with-the-demo-ipa-server">Testing IPA configuration with the Demo IPA server</h1>

<p>If you want to test basic IPA client configuration and connectivity, the
free ipa team has a demo server sandbox that they frequently wipe clean
and comes with basic accounts, groups, and services.</p>

<p>See: https://www.freeipa.org/page/Demo</p>

<p>In this way, you can configure your client using <code class="language-plaintext highlighter-rouge">ipa-client-install</code>,
<code class="language-plaintext highlighter-rouge">kinit helpdesk</code> or another user they configure in their demo, and try
to use <code class="language-plaintext highlighter-rouge">ipa</code> from command line or from our <code class="language-plaintext highlighter-rouge">appliance_console_cli</code>.</p>

<hr />

<h3 id="appliance-requirements">Appliance Requirements</h3>

<ul>
  <li>
    <p>For an Appliance to leverage an IPA Server on the network,
the Appliance <strong>must</strong> have time synchronization enabled.
This can be done by either configuring NTP in the Appliance UI,
from <em>Configure-&gt;Configuration-&gt;Zone-&gt;Server-&gt;NTP Settings</em> or by using
the Virtual Machine’s hosting provider’s Advanced Setting
to Synchronize Time. Both Appliance and IPA Server must have
their clocks synchronized otherwise Kerberos and LDAP based
authentication will fail.</p>
  </li>
  <li>
    <p>The IPA Server needs to be known by DNS and accessible by name.
If DNS is not configured accordingly, the hosts files need to be
updated to reflect both IPA server and the Appliance on
both virtual machines.</p>
  </li>
</ul>

<hr />

<h3 id="configuring-appliance-for-external-authentication">Configuring Appliance for External Authentication:</h3>

<ul>
  <li>Appliance UI
    <ol>
      <li>Login to the Appliance via an administrative account</li>
      <li>Select <em>Configure-&gt;Configuration</em></li>
      <li>Click on <em>Authentication</em></li>
      <li>In the Authentication section, set Mode to <strong>External (httpd)</strong></li>
      <li>In the Role Settings section, select the <em>Get User Groups from
External Authentication (https)</em></li>
      <li>Click on <strong>Save</strong></li>
    </ol>
  </li>
  <li>Appliance Console
    <ol>
      <li>Login via the <strong>admin</strong> Username</li>
      <li>Summary screen should show <strong>External Auth</strong> as <em>not configured</em>,
Press any key</li>
      <li>From the Advanced Setting menu, select the menu item
<strong>Configure External Authentication (httpd)</strong></li>
      <li>Enter the Fully qualified Hostname of the IPA Server,
i.e. <em>ipaserver.test.company.com</em></li>
      <li>Enter the IPA Server domain, i.e. <em>test.company.com</em></li>
      <li>Enter the IPA Server Realm, i.e. <em>TEST.COMPANY.COM</em></li>
      <li>Press enter to select the default IPA Server Principal, i.e. <em>admin</em></li>
      <li>Enter the Password of the IPA Server Principal</li>
      <li>Review details, and Enter <strong>y</strong> to proceed.</li>
    </ol>

    <p><strong>Note:</strong> If any of the following conditions are true, the Configuration will fail:</p>

    <ul>
      <li>The IPA server is not reachable by its FQDN</li>
      <li>The IPA Server cannot reach the appliance by its FQDN</li>
      <li>The time is not synchronized between the Appliance and the IPA Server</li>
      <li>The IPA server <strong>admin</strong> password specified is incorrect</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="configuring-appliance-back-to-internal-database-authentication">Configuring Appliance back to Internal Database Authentication:</h3>

<ul>
  <li>Appliance UI
    <ol>
      <li>Login to the Appliance via an administrative account</li>
      <li>Select <em>Configure-&gt;Configuration</em></li>
      <li>Click on <em>Authentication</em></li>
      <li>In the Authentication section, set Mode to <strong>Database</strong></li>
      <li>Click on <strong>Save</strong></li>
    </ol>
  </li>
  <li>Appliance Console
    <ol>
      <li>Login via the <strong>admin</strong> Username</li>
      <li>Summary screen should have <strong>External Auth</strong> showing the fully qualified
host name of the IPA server, Press any key</li>
      <li>select the menu item <strong>Configure External Authentication (httpd)</strong></li>
      <li>Configure External Authentication (httpd) would show the currently
configured IPA Server Hostname and Domain.</li>
      <li>Enter <strong>y</strong> to Un-Configure the IPA Client</li>
      <li>Enter <strong>n</strong> to not proceed with the Re-Configuration.</li>
    </ol>
  </li>
</ul>

<hr />

<h3 id="optional-configuration-via-the-appliance-console-cli">Optional Configuration via the Appliance Console CLI</h3>

<p>In addition to using the Appliance Console, External Authentication can be
optionally configured and un-configured via the Appliance Console Command Line Interface.</p>

<p>Appliance Console CLI command and relevant options include:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/appliance_console_cli <span class="nt">--host</span> &lt;appliance_fqdn&gt;
                           <span class="nt">--ipaserver</span> &lt;ipa_server_fqdn&gt;
                           <span class="nt">--ipadomain</span> &lt;domain_of_ipa_server&gt;
                           <span class="nt">--iparealm</span> &lt;realm_of_ipa_server&gt;
                           <span class="nt">--ipaprincipal</span> &lt;ipa_server_principal&gt;
                           <span class="nt">--ipapassword</span> &lt;ipa_server_password&gt;
                           <span class="nt">--uninstall-ipa</span>
</code></pre></div></div>

<p>Note:</p>

<ul>
  <li>specifying --host will update the hostname of the appliance. If this
step was already performed via the Appliance Console and the necessary updates
made to /etc/hosts if DNS is not properly configured, the --host option
can be omitted.</li>
  <li>--ipadomain will be based on the appliance domain name if not specified.</li>
  <li>--iparealm will be based on the domain name of the ipaserver if not specified.</li>
  <li>--ipaprincipal will default to <strong>admin</strong> if not specified.</li>
</ul>

<h4 id="configuring-external-authentication-example">Configuring External Authentication Example:</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh root@appliance.test.company.com
appliance# /bin/appliance_console_cli <span class="nt">--host</span> appliance.test.company.com <span class="se">\</span>
                                      <span class="nt">--ipaserver</span> ipaserver.test.company.com <span class="se">\</span>
                                      <span class="nt">--ipadomain</span> test.company.com <span class="se">\</span>
                                      <span class="nt">--iparealm</span> TEST.COMPANY.COM <span class="se">\</span>
                                      <span class="nt">--ipaprincipal</span> admin <span class="se">\</span>
                                      <span class="nt">--ipapassword</span> smartvm1
</code></pre></div></div>

<h4 id="un-configuring-external-authentication-example">Un-Configuring External Authentication Example:</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh root@appliance.test.company.com
appliance# /bin/appliance_console_cli <span class="nt">--uninstall-ipa</span>
</code></pre></div></div>

<hr />

<h3 id="manual-configuration">Manual Configuration</h3>

<p>The following Instructions are for informational purposes and describe how to manually install the
necessary packages and configure the External Authentication (i.e. what is currently done behind
the scene via the Appliance Console):</p>

<ul>
  <li>Installing the required packages - <a href="./ipa-installation">Installation</a>
    <ul>
      <li>The packages required for enabling External Authentication are
installed by default on the Appliance so these steps are intended
to assist when building an appliance from scratch.</li>
      <li>The installation instructions are targeted for the CentOS 6.x
based ManageIQ Appliance.</li>
    </ul>
  </li>
  <li>Enabling External Authentication - <a href="./ipa-configuration">Configuration</a></li>
</ul>

      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
  <li>
    <button class="fa-solid theme-toggle" data-toggle-theme></i>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa-brands fa-github"></i>
          GitHub
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa-brands fa-gitter"></i>
          Gitter
        </a>
      </li>
      <li>
        <a href="https://github.com/orgs/ManageIQ/discussions">
          <i class="fa-solid fa-comments"></i>
          Forum
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2024 ManageIQ.
      </span>
      <span>
        <a href="https://www.ibm.com/opensource/" class="footer-link" target="_blank">
          Sponsored by IBM, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://x.com/ManageIQ" title="X / Twitter" class="social_link">
            <i class="fa-brands fa-x-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://bsky.app/profile/manageiq.bsky.social" title="Bluesky" class="social_link">
            <i class="fa-brands fa-bluesky"></i>
          </a>
        </li>

        <li>
          <a href="https://fosstodon.org/@manageiq" title="Mastodon" class="social_link">
            <i class="fa-brands fa-mastodon"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" title="Facebook" class="social_link">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </li>

        <li>
          <a href="https://www.linkedin.com/company/manageiq" title="LinkedIn" class="social_link">
            <i class="fa-brands fa-linkedin"></i>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" title="YouTube" class="social_link">
            <i class="fa-brands fa-youtube"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa-solid fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
